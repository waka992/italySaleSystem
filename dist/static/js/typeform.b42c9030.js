(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["typeform"],{"14e1":function(t,e,a){"use strict";var r=a("8273"),i=a.n(r);i.a},"5d58":function(t,e,a){t.exports=a("d8d6")},"67bb":function(t,e,a){t.exports=a("f921")},7618:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var r=a("5d58"),i=a.n(r),s=a("67bb"),l=a.n(s);function o(t){return o="function"===typeof l.a&&"symbol"===typeof i.a?function(t){return typeof t}:function(t){return t&&"function"===typeof l.a&&t.constructor===l.a&&t!==l.a.prototype?"symbol":typeof t},o(t)}},8273:function(t,e,a){},d22d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("app")]),a("el-breadcrumb-item",[t._v("分类管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("新建")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,stripe:"","row-key":"id","header-cell-class-name":"table-header","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称",align:"center"}}),a("el-table-column",{attrs:{prop:"type",label:"是否自定义",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0==e.row.type?"否":"自定义")+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"showStatus",label:"上架/下架",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0==e.row.showStatus?"下架":"上架")+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"imgUrl",label:"分类图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["eu"==t.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:e.row.imgUrl,expression:"scope.row.imgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.imgUrl,"preview-src-list":[e.row.imgUrl]}}):t._e(),"cn"==t.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:e.row.cnImgUrl,expression:"scope.row.cnImgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.cnImgUrl,"preview-src-list":[e.row.cnImgUrl]}}):t._e()]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.delType(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"create"===t.operate?"创建分类":"编辑分类",visible:t.dialogVisible,width:"700px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"120px","element-loading-text":"图片上传中"}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{staticClass:"w500",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"是否自定义"}},[a("el-select",{staticClass:"w500",model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{value:1,label:"是"}}),a("el-option",{attrs:{value:0,label:"否"}})],1)],1),0==t.form.type?a("el-form-item",{attrs:{label:"上级菜单"}},[a("el-cascader",{staticClass:"w500",attrs:{clearable:"",props:t.cascaderProps,options:t.filterTableData},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}})],1):t._e(),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticClass:"w500",model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"上架/下架"}},[a("el-select",{staticClass:"w500",model:{value:t.form.showStatus,callback:function(e){t.$set(t.form,"showStatus",e)},expression:"form.showStatus"}},[a("el-option",{attrs:{value:1,label:"上架"}}),a("el-option",{attrs:{value:0,label:"下架"}})],1)],1),a("el-form-item",{attrs:{label:"分类图片"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://www.missbonbon.co:8021/file/uploadOss","http-request":t.uploadSectionFile,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),"eu"==t.area?a("div",{staticClass:"pic-list"},t._l(t.form.imgUrl,(function(t,e){return a("div",{key:e,staticClass:"pic-list-item"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t,"preview-src-list":[t]}})],1)})),0):t._e(),"cn"==t.area?a("div",{staticClass:"pic-list"},t._l(t.form.cnImgUrl,(function(t,e){return a("div",{key:e,staticClass:"pic-list-item"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t,"preview-src-list":[t]}})],1)})),0):t._e()],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:t.formLoading},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)])},i=[],s=(a("28a5"),a("7618")),l=(a("c5f6"),a("a481"),a("365c")),o=a("fb08"),n=a("2ef0"),c={name:"TypeForm",props:{eventId:""},computed:{},data:function(){return{formLoading:!1,fileList:[],operate:"create",tableData:[],filterTableData:[],area:"cn",page:{no:1,total:0,size:20},cascaderProps:{label:"name",value:"id",checkStrictly:!0},form:{name:"",imgUrl:[],type:0,parentId:"",showStatus:"",sort:0,ossFilePathName:""},dialogVisible:!1,delList:[]}},created:function(){this.getData(),this.area=localStorage.getItem("area")||"eu"},methods:{handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(){var t=this;Object(l["ub"])().then((function(e){var a=e.filter((function(t){return 1!=t.type})),r=JSON.stringify(e),i=r.replace(/,"children":\[\]/g,"");t.tableData=JSON.parse(i);var s=JSON.stringify(a),l=s.replace(/,"children":\[\]/g,"");t.filterTableData=JSON.parse(l)}))},create:function(){this.operate="create",this.form={name:"",imgUrl:[],cnImgUrl:[],type:0,parentId:"",showStatus:1},this.openDialog()},edit:function(t){this.operate="edit",this.form=Object(n["cloneDeep"])(t),this.form.showStatus=Number(this.form.showStatus),this.form.imgUrl=[this.form.imgUrl],this.form.cnImgUrl=[this.form.cnImgUrl],this.openDialog()},delType:function(t){var e=this;this.$confirm("确认删除指定分类？").then((function(a){var r=t.id,i=t.ossFilePathName,s={id:r,ossFilePathName:i};Object(l["N"])(s).then((function(t){e.$message.success({message:"删除成功"}),e.getData()}))})).catch((function(t){}))},save:function(){var t=this;this.form.parentId?"object"==Object(s["a"])(this.form.parentId)&&(this.form.parentId=this.form.parentId[this.form.parentId.length-1]):this.form.parentId=0;var e=this.saveDataHandler();"create"==this.operate&&Object(l["v"])(e).then((function(e){t.$message.success({message:"创建成功"}),t.dialogVisible=!1,t.getData()})),"edit"==this.operate&&Object(l["S"])(e).then((function(e){t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.getData()}))},saveDataHandler:function(){var t=Object(n["cloneDeep"])(this.form);return t.imgUrl=t.imgUrl.join(","),t.cnImgUrl=t.cnImgUrl.join(","),t},getDataHandler:function(){this.form.imgUrl=this.form.imgUrl?this.form.imgUrl.split(","):[],this.form.cnImgUrl=this.form.cnImgUrl?this.form.cnImgUrl.split(","):[]},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},handleAvatarSuccess:function(t,e){t.data&&this.$set(this.form,"picture",t.data)},uploadSectionFile:function(t){this.formLoading=!0;var e=t.file,a=this,r=function(t,e){a.form.cnImgUrl=[t.cnUrl],a.form.imgUrl=[t.euUrl],a.form.ossFilePathName=e,a.$message({message:"上传成功!",type:"success"}),a.formLoading=!1};Object(o["a"])(e,r)}}},m=c,p=(a("14e1"),a("2877")),u=Object(p["a"])(m,r,i,!1,null,"7ceb88dc",null);e["default"]=u.exports}}]);