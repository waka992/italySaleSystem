(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["iteminfonew"],{"20ea":function(e,t,o){"use strict";var a=o("4ae5"),l=o.n(a);l.a},"4ae5":function(e,t,o){},"93fb":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{name:"iteminfo"}}},[e._v("单品")]),"new"==e.todo?o("el-breadcrumb-item",[e._v("添加单品")]):e._e(),"new"!==e.todo?o("el-breadcrumb-item",[e._v("查看单品信息")]):e._e()],1),"new"!==e.todo?o("div",{staticClass:"edit-btn"},[o("el-button",{attrs:{plain:"",icon:"el-icon-edit"},on:{click:e.edit}},[e._v("编辑")])],1):e._e()],1),o("div",{staticClass:"box"},[o("el-form",{ref:"form",staticClass:"new-prodt-form",attrs:{rules:e.rules,inline:!0,model:e.form,"label-width":"80px"}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{prop:"name"}},[o("span",{staticStyle:{color:"#F25643"},attrs:{slot:"label"},slot:"label"},[e._v("商品名称")]),o("el-input",{attrs:{disabled:"check"===e.todo,placeholder:"请输入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{prop:"size"}},[o("span",{staticStyle:{color:"#F25643"},attrs:{slot:"label"},slot:"label"},[e._v("尺码")]),o("el-select",{attrs:{disabled:"check"===e.todo,size:"mini",placeholder:"请选择"},model:{value:e.form.size,callback:function(t){e.$set(e.form,"size",t)},expression:"form.size"}},e._l(e.sizeOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.arrtibute,value:e.arrtibute}})})),1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"库存提醒"}},[o("el-input",{attrs:{disabled:"check"===e.todo,placeholder:"少于"},model:{value:e.form.noticenum,callback:function(t){e.$set(e.form,"noticenum",t)},expression:"form.noticenum"}},[o("template",{slot:"append"},[e._v("箱")])],2)],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{prop:"specification"}},[o("span",{staticStyle:{color:"#F25643"},attrs:{slot:"label"},slot:"label"},[e._v("型号编码")]),o("el-input",{attrs:{disabled:"check"===e.todo,placeholder:"请输入"},model:{value:e.form.specification,callback:function(t){e.$set(e.form,"specification",t)},expression:"form.specification"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{prop:"costPrice"}},[o("span",{staticStyle:{color:"#F25643"},attrs:{slot:"label"},slot:"label"},[e._v("进价")]),o("el-input",{attrs:{disabled:"check"===e.todo,placeholder:"请输入"},model:{value:e.form.costPrice,callback:function(t){e.$set(e.form,"costPrice",t)},expression:"form.costPrice"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"供应商"}},[o("el-select",{attrs:{disabled:"check"===e.todo,placeholder:"请选择"},model:{value:e.form.supplierName,callback:function(t){e.$set(e.form,"supplierName",t)},expression:"form.supplierName"}},e._l(e.supplierOptions,(function(e){return o("el-option",{key:e.id,attrs:{label:e.supplierName,value:e.supplierName}})})),1)],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{prop:"salePrice"}},[o("span",{staticStyle:{color:"#F25643"},attrs:{slot:"label"},slot:"label"},[e._v("售价")]),o("el-input",{attrs:{disabled:"check"===e.todo,placeholder:"请输入"},model:{value:e.form.salePrice,callback:function(t){e.$set(e.form,"salePrice",t)},expression:"form.salePrice"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",[o("span",{staticStyle:{color:"#F25643"},attrs:{slot:"label"},slot:"label"},[o("span",[e._v("*")]),e._v("总数量")]),o("el-input",{staticClass:"small-input",attrs:{disabled:"check"===e.todo,placeholder:"箱数"},model:{value:e.form.caseNum,callback:function(t){e.$set(e.form,"caseNum",t)},expression:"form.caseNum"}},[o("template",{slot:"append"},[e._v("箱")])],2),e._v("\n                            X\n                            "),o("el-input",{staticClass:"mid-input",attrs:{disabled:"check"===e.todo,placeholder:"每箱件数"},model:{value:e.form.goodsTotal,callback:function(t){e.$set(e.form,"goodsTotal",t)},expression:"form.goodsTotal"}},[o("template",{slot:"append"},[e._v("件")])],2)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"盈利"}},[o("el-input",{attrs:{disabled:"check"===e.todo,placeholder:"请输入"},model:{value:e.form.profit,callback:function(t){e.$set(e.form,"profit",t)},expression:"form.profit"}})],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品特色"}},[o("el-select",{attrs:{disabled:"check"===e.todo,size:"mini",placeholder:"请选择"},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}},e._l(e.labelOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.arrtibute,value:e.arrtibute}})})),1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",[o("span",{staticStyle:{color:"#F25643"},attrs:{slot:"label"},slot:"label"},[o("span",[e._v("*")]),e._v("尾箱")]),o("el-input",{staticClass:"small-input",attrs:{disabled:"check"===e.todo,placeholder:"箱数"},model:{value:e.form.tailBox,callback:function(t){e.$set(e.form,"tailBox",t)},expression:"form.tailBox"}},[o("template",{slot:"append"},[e._v("箱")])],2),e._v("\n                            X\n                            "),o("el-input",{staticClass:"mid-input",attrs:{disabled:"check"===e.todo,placeholder:"每箱件数"},model:{value:e.form.tailTotal,callback:function(t){e.$set(e.form,"tailTotal",t)},expression:"form.tailTotal"}},[o("template",{slot:"append"},[e._v("件")])],2)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"配比"}},[o("el-select",{attrs:{disabled:"check"===e.todo,size:"mini",placeholder:"请选择"},model:{value:e.form.mixtureAtio,callback:function(t){e.$set(e.form,"mixtureAtio",t)},expression:"form.mixtureAtio"}},e._l(e.ratioOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.arrtibute,value:e.arrtibute}})})),1)],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"面料信息"}},[o("el-select",{attrs:{disabled:"check"===e.todo,size:"mini",placeholder:"请选择"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}},e._l(e.componentOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.arrtibute,value:e.arrtibute}})})),1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"季度"}},[o("el-select",{attrs:{disabled:"check"===e.todo,size:"mini",placeholder:"请选择"},model:{value:e.form.quarter,callback:function(t){e.$set(e.form,"quarter",t)},expression:"form.quarter"}},e._l(e.seasonOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.configValue,value:e.configValue}})})),1)],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品颜色"}},[o("el-select",{attrs:{disabled:"check"===e.todo,size:"mini",placeholder:"请选择"},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}},e._l(e.colorOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.arrtibute,value:e.arrtibute}})})),1)],1)],1)],1),o("el-row",[o("div",{staticClass:"pic-upload"},[o("div",{staticClass:"pic-title"},[e._v("上传图片")]),e._l(e.form.goodsImgList,(function(t,a){return o("div",{key:a,staticClass:"pic-list-item"},["check"!==e.todo?o("span",{staticClass:"del-icon",on:{click:function(o){return o.stopPropagation(),e.delPic(t,a)}}},[e._v("X")]):e._e(),o("el-image",{staticClass:"pic-list-item-img",attrs:{src:t.cnImgUrl,"preview-src-list":[t.cnImgUrl]}})],1)})),"check"!==e.todo?o("el-upload",{staticClass:"upload-btn",attrs:{"show-file-list":!1,action:"http://www.missbonbon.co:8021/file/uploadOss","http-request":e.uploadListFile}},[o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e._e()],2)]),"new"!==e.todo?o("el-row",[o("div",{staticClass:"pic-upload"},[o("div",{staticClass:"pic-title"},[e._v("销售记录")]),o("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.sellTableData,stripe:"","header-cell-class-name":"table-header"}},[o("el-table-column",{attrs:{prop:"time",label:"卖出时间",align:"center"}}),o("el-table-column",{attrs:{prop:"buyer",label:"买家",align:"center"}}),o("el-table-column",{attrs:{prop:"color",label:"颜色",align:"center"}}),o("el-table-column",{attrs:{prop:"size",label:"尺码",align:"center"}}),o("el-table-column",{attrs:{prop:"amount",label:"数量",align:"center"}}),o("el-table-column",{attrs:{prop:"value",label:"金额",align:"center"}})],1),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{background:"","current-page":e.page.no,"page-size":e.page.size,"page-sizes":[5,10,20],total:e.page.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.basePageChange}})],1)],1)]):e._e()],1),"check"!==e.todo?o("div",{staticClass:"form-btns"},[o("el-button",{on:{click:e.back}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1):e._e()],1)])},l=[],s=(o("7f7f"),o("2ef0")),i=(o("4328"),o("fb08")),r=o("365c"),n={name:"SingleInfoNew",data:function(){return{todo:"check",pic:[],goodsImgListNum:0,transporterOptions:[],supplierOptions:[],form:{goodsImgList:[]},sizeOptions:[],colorOptions:[],labelOptions:[],seasonOptions:[],componentOptions:[],ratioOptions:[],containerOptions:[],rules:{name:[{required:!0,message:"请输入",trigger:"change"}],size:[{required:!0,message:"请输入",trigger:"change"}],transporter:[{required:!0,message:"请选择",trigger:"change"}],specification:[{required:!0,message:"请输入",trigger:"change"}],costPrice:[{required:!0,message:"请输入",trigger:"change"}],salePrice:[{required:!0,message:"请输入",trigger:"change"}]},sellTableData:[{time:"2021.11.13 13:05",buyer:"testman",color:"白色",size:"L",amount:"2",value:"34"}],page:{no:1,total:0,size:20}}},mounted:function(){this.getSelector(),this.todo=this.$route.params.todo,"new"==this.todo?this.resetData():(this.form.id=this.$route.params.id,this.getDetail())},methods:{resetData:function(){var e=this;this.pic=[],this.goodsImgListNum=0,this.form={id:"",name:"",size:"",specification:"",costPrice:"",supplierName:"",supplierId:"",salePrice:"",caseNum:"",goodsTotal:"",profit:"",label:"",tailBox:"",tailTotal:"",noticenum:"",component:"",mixtureAtio:"",color:"",quarter:"",goodsImgList:[]},this.$nextTick((function(){e.$refs.form.clearValidate()}))},back:function(){"new"==this.todo&&this.$router.push({name:"iteminfo",params:{}}),"edit"==this.todo&&(this.todo="check")},save:function(){var e=this,t=this.form,o=t.caseNum,a=t.goodsTotal,l=t.tailBox,i=t.tailTotal;this.judgeBlank([o,a,l,i])?this.$message.warning("请填写总数量和尾箱"):this.$refs.form.validate((function(t){var o=Object(s["cloneDeep"])(e.form);if(t){if(o.supplierName)for(var a=0;a<e.supplierOptions.length;a++){var l=e.supplierOptions[a];if(l.supplierName==o.supplierName){o.supplierId=l.id;break}}if("new"==e.todo)return void Object(r["m"])(o).then((function(t){e.$message.success("添加成功")}));if("edit"==e.todo)return void Object(r["m"])(o).then((function(t){e.$message.success("修改成功"),e.todo="check"}))}e.$message.warning("请填写单品相关必填项")}))},cancel:function(){this.$router.push({name:"iteminfo",params:{}})},judgeBlank:function(e){if(e instanceof Array){for(var t=0;t<e.length;t++){var o=e[t],a=""===o||void 0===o||null===o;if(a)return!0}return!1}return""===e||void 0===e||null===e},uploadListFile:function(e){this.fileuploadHandler(e,"goodsImgList")},fileuploadHandler:function(e,t){this.formLoading=!0;var o=e.file,a=this,l=function(e,o){"goodsImgList"===t&&(a.form.goodsImgList.push({id:a.form.secondMenu,cnImgUrl:e.cnUrl,imgUrl:e.euUrl,ossFilePathName:o,sort:a.goodsImgListNum}),a.goodsImgListNum++),a.$message({message:"上传成功!",type:"success"}),a.formLoading=!1};Object(i["a"])(o,l)},delPic:function(e,t){console.log(e),console.log(t),this.$confirm("删除后图片不再显示，确定要删除吗？","提示",{type:"warning"}).then((function(){})).catch((function(){}))},getSelector:function(){var e=this;Object(r["z"])({}).then((function(t){e.transporterOptions=t})),Object(r["K"])({}).then((function(t){e.supplierOptions=t})),Object(r["A"])().then((function(t){e.colorOptions=t[1],e.sizeOptions=t[1],e.labelOptions=t[5],e.componentOptions=t[2],e.ratioOptions=t[4]})),Object(r["M"])({status:"quarter"}).then((function(t){e.seasonOptions=t})),Object(r["y"])({}).then((function(t){e.containerOptions=t}))},getDetail:function(){var e=this;Object(r["O"])({id:this.form.id}).then((function(t){console.log(t);var o=t.goodsImgList,a=t.id,l=t.name,s=t.size,i=t.specification,r=t.profit,n=t.label,c=t.noticenum,p=t.component,m=t.container,u=t.containerId,d=t.mixtureAtio,f=t.color,b=t.sku,g=b.costPrice,h=b.supplierName,v=b.supplierId,k=b.salePrice,_=b.caseNum,O=b.goodsTotal,x=b.tailBox,$=b.tailTotal,w=b.quarter;e.pic=o,e.goodsImgListNum=0,e.form={id:a,name:l,size:s,specification:i,costPrice:g,supplierName:h,supplierId:v,salePrice:k,caseNum:_,goodsTotal:O,profit:r,label:n,tailBox:x,tailTotal:$,noticenum:c,component:p,container:m,containerId:u,mixtureAtio:d,color:f,quarter:w,goodsImgList:o},e.$nextTick((function(){e.$refs.form.clearValidate()}))}))},basePageChange:function(e){this.$set(this.page,"no",e),this.getData()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getData()},edit:function(){this.todo="edit"}}},c=n,p=(o("20ea"),o("2877")),m=Object(p["a"])(c,a,l,!1,null,"027320f0",null);t["default"]=m.exports}}]);