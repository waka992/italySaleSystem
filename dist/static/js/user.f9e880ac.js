(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{6454:function(e,a,l){"use strict";l.r(a);var t=function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",[l("div",{staticClass:"crumbs"},[l("el-breadcrumb",{attrs:{separator:"/"}},[l("el-breadcrumb-item",[e._v("用户管理")])],1)],1),l("div",{staticClass:"box"},[l("div",{staticClass:"handle-box"},[l("el-button",{staticClass:"new-btn",attrs:{type:"primary"},on:{click:e.create}},[e._v("新建")])],1),l("div",{staticStyle:{height:"43px"}}),l("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{prop:"userName",label:"昵称",align:"center"}}),l("el-table-column",{attrs:{prop:"level",label:"权限",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                "+e._s(e.dict.getDict(a.row.level,"userLevel"))+"\n            ")]}}])}),l("el-table-column",{attrs:{prop:"status",label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.edit(a.row)}}},[e._v("编辑")]),l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.del(a.row)}}},[e._v("注销")])]}}])})],1),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.page.no,"page-size":e.page.size,total:e.page.total},on:{"current-change":e.handlePageChange}})],1),l("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"create"===e.operate?"创建用户":"编辑用户",visible:e.dialogVisible,width:"700px"},on:{"update:visible":function(a){e.dialogVisible=a}}},[l("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form,"label-width":"80px"}},[l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"用户呢称"}},[l("el-input",{model:{value:e.form.userName,callback:function(a){e.$set(e.form,"userName",a)},expression:"form.userName"}})],1)],1),l("el-col",{attrs:{span:12}},["create"===e.operate?l("el-form-item",{attrs:{label:"用户密码"}},[l("el-input",{model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1):e._e()],1),l("el-col",{attrs:{span:12}},["create"!==e.operate?l("el-form-item",{attrs:{label:"新密码"}},[l("el-input",{attrs:{placeholder:"非必填，如需要修改密码请填写"},on:{input:e.newPasswordChange},model:{value:e.form.newPassword,callback:function(a){e.$set(e.form,"newPassword",a)},expression:"form.newPassword"}})],1):e._e()],1)],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"用户权限"}},[l("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择用户等级"},model:{value:e.form.level,callback:function(a){e.$set(e.form,"level",a)},expression:"form.level"}},e._l(e.dict.userLevel,(function(e,a){return l("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)])},s=[],o=l("365c"),n=l("2ef0"),r=l("7609"),i={name:"UserManage",props:{},data:function(){return{operate:"create",tableData:[],page:{no:1,total:0,size:20},form:{},dialogVisible:!1,selectRow:[],level:"",userName:"",dict:""}},created:function(){this.getData(),this.dict=r["a"]},methods:{search:function(){this.getData()},handlePageChange:function(){this.getData()},getData:function(){var e=this,a={pageSize:this.page.size,page:this.page.no,level:this.level,userName:this.userName};Object(o["vb"])(a).then((function(a){e.tableData=a.records,e.page.total=a.total,e.page.no=a.current}))},changeLevel:function(e){this.level=e,this.getData()},handleSelectionChange:function(e){this.selectRow=e},create:function(){this.operate="create",this.form={level:1,password:"",userName:""},this.openDialog()},edit:function(e){this.operate="edit",this.form=e,this.form.newPassword="",this.openDialog()},del:function(e){var a=this;this.$confirm("确认注销当前用户？").then((function(l){Object(o["O"])({id:e.id}).then((function(e){a.$message.success({message:"注销成功"}),a.getData()}))})).catch((function(e){}))},save:function(){var e=this,a=Object(n["cloneDeep"])(this.form);if("create"==this.operate&&(a.password&&(a.password=window.btoa(a.password)),Object(o["k"])(a).then((function(l){delete a.newPassword,l&&(e.$message.success({message:"创建成功"}),e.dialogVisible=!1,e.getData())}))),"edit"==this.operate){if(""!=a.newPassword){var l={userName:a.userName,password:window.btoa(a.newPassword)};Object(o["Lb"])(l).then((function(e){console.log(e)}))}delete a.newPassword,delete a.password,Object(o["k"])(a).then((function(a){a&&(e.$message.success({message:"修改成功"}),e.dialogVisible=!1,e.getData())}))}},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},newPasswordChange:function(e){this.form.newPassword=e,this.$forceUpdate()}}},u=i,c=(l("d052"),l("2877")),b=Object(c["a"])(u,t,s,!1,null,"e64a20e6",null);a["default"]=b.exports},7609:function(e,a,l){"use strict";var t={accountType:[{value:0,label:"现金"},{value:3,label:"发票"},{value:4,label:"汇款"},{value:5,label:"欠款"}],accountTypeEN:[{value:0,label:"CASH"},{value:3,label:"INVOICE"},{value:4,label:"REMITTANCE"},{value:5,label:"ARREARS"}],payWay:[{value:0,label:"发票"},{value:1,label:"汇款"}],payENWay:[{value:0,label:"INVOICE"},{value:1,label:"CASH"}],payStatus:[{value:0,label:"未支付"},{value:1,label:"已支付"},{value:2,label:"欠款"},{value:3,label:"已结欠"}],payENStatus:[{value:0,label:"PAID"},{value:1,label:"UNPAID"}],soldStatus:[{value:0,label:"即将到货"},{value:1,label:"现货"},{value:2,label:"售罄"}],settingItemValue:[{value:5,label:"特色/Special"},{value:0,label:"颜色/Color"},{value:1,label:"尺码/Size"},{value:2,label:"面料/Material"},{value:4,label:"配比/Ratio"},{value:6,label:"破洞/Destroyed"},{value:7,label:"面料(后台)/Material(back)"}],containerStatus:[{value:0,label:"未运输"},{value:1,label:"已发货"},{value:2,label:"已到达待确认"},{value:3,label:"已确认货物"}],transportType:[{value:0,label:"海运"},{value:2,label:"空运"},{value:3,label:"其他"}],verifyStatus:[{value:0,label:"未审核"},{value:1,label:"不通过"},{value:2,label:"审核通过"},{value:3,label:"通过欠款待发货"},{value:4,label:"仓库发货"},{value:5,label:"退审处理中"},{value:6,label:"退审处理中"}],verifyCheckStatus:[{value:0,label:"未审核"},{value:1,label:"已审核"},{value:2,label:"退审"}],userLevel:[{value:1,label:"销售人员"},{value:2,label:"管理员"}],customerLevel:[{value:1,label:"游客"},{value:2,label:"普通"},{value:3,label:"VIP"},{value:9,label:"隐藏"}],getDict:function(e,a){for(var l=0;l<t[a].length;l++){var s=t[a][l];if(s.value==e)return s.label}}};a["a"]=t},d052:function(e,a,l){"use strict";var t=l("fdf4"),s=l.n(t);s.a},fdf4:function(e,a,l){}}]);