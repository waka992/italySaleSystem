(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["compbaseinfodetail"],{"57e4":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("公司")]),t("el-breadcrumb-item",{attrs:{to:{name:"baseinfo"}}},[e._v("基本信息")]),t("el-breadcrumb-item",[e._v("详情")])],1)],1),t("div",{staticClass:"box"},[t("div",{staticClass:"detail-card"},[t("div",{staticClass:"handle-box"},[t("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:e.editReady}},[e._v("编辑")])],1),t("el-row",{staticClass:"detail-row"},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("公司名称：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.name))])]),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("营业执照注册号：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.license))])])],1),t("el-row",{staticClass:"detail-row"},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("法人代表：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.corporation))])]),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("税务码：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.taxation))])])],1),t("el-row",{staticClass:"detail-row"},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("电话：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.phone))])]),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("地址：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.address))])])],1),t("el-row",{staticClass:"detail-row"},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("邮箱：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.email))])]),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"detail-label"},[e._v("账号信息：")]),t("span",{staticClass:"detail-content"},[e._v("-")])])],1)],1),t("div",{staticClass:"record-card"},[t("div",{staticClass:"top"},[t("div",{staticClass:"title"},[e._v("支出收入记录("+e._s(e.tableData.length)+")")]),t("div",{staticClass:"search"},[t("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.logDate,callback:function(a){e.logDate=a},expression:"logDate"}}),t("div",{staticClass:"search-btn"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-search"},on:{click:e.getPayLog}})],1)],1),t("div",{staticClass:"handle-box"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:e.addIncomeReady}},[e._v("+新增记录")])],1)]),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","header-cell-class-name":"table-header"}},[t("el-table-column",{attrs:{prop:"customerName",label:"收付款方",align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"}}),t("el-table-column",{attrs:{prop:"money",label:"收入/支出",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{class:1==a.row.bookType?"red":"green"},[e._v(e._s(1==a.row.bookType?"+":"-")+e._s(a.row.money))])]}}])}),t("el-table-column",{attrs:{prop:"accountType",label:"资金来源",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                        "+e._s(e.getDict(a.row.accountType,"accountType"))+"\n                    ")]}}])}),t("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),t("el-table-column",{attrs:{prop:"balance",label:"余额",width:"120",align:"center"}}),t("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{width:"120",placement:"bottom"},model:{value:e.delRecordVisible,callback:function(a){e.delRecordVisible=a},expression:"delRecordVisible"}},[t("p",[e._v("确定删除吗？")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.delRecordVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.delRecordConfirm(a.row.id)}}},[e._v("确定")])],1),t("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.delRecordConfirm(a.row.id)}},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.page.no,"page-size":e.page.size,"page-sizes":[5,10,20],total:e.page.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.basePageChange}})],1)],1)]),t("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"编辑公司信息",visible:e.baseDialogVisible,width:"750px"},on:{"update:visible":function(a){e.baseDialogVisible=a}}},[t("el-popover",{attrs:{"popper-class":"del-confirm",placement:"bottom",width:"210"},model:{value:e.delVisible,callback:function(a){e.delVisible=a},expression:"delVisible"}},[t("div",{staticClass:"del-word"},[e._v("删除该公司后，数据不可恢复，是否确认删除？")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{staticClass:"del-btn1",attrs:{size:"mini",type:"text"},on:{click:function(a){e.delVisible=!1}}},[e._v("取消")]),t("el-button",{staticClass:"del-btn2",attrs:{size:"mini"},on:{click:e.delConfirm}},[e._v("确认删除")])],1),t("el-button",{staticClass:"del-btn2 outer",attrs:{slot:"reference"},slot:"reference"},[e._v("删除")])],1),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",inline:!0,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"公司名称",prop:"name"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入公司名",maxlength:"15","show-word-limit":""},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"法人代表",prop:"corporation"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入法人代表"},model:{value:e.form.corporation,callback:function(a){e.$set(e.form,"corporation",a)},expression:"form.corporation"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"营业执照号",prop:"license"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入营业执照注册号"},model:{value:e.form.license,callback:function(a){e.$set(e.form,"license",a)},expression:"form.license"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-select",{staticClass:"form-input",attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(a){e.$set(e.form,"status",a)},expression:"form.status"}},[t("el-option",{attrs:{label:"注销",value:0}}),t("el-option",{attrs:{label:"正常",value:1}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"税务代码",prop:"taxation"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入税务代码"},model:{value:e.form.taxation,callback:function(a){e.$set(e.form,"taxation",a)},expression:"form.taxation"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.bankName,callback:function(a){e.$set(e.form,"bankName",a)},expression:"form.bankName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入公司地址"},model:{value:e.form.address,callback:function(a){e.$set(e.form,"address",a)},expression:"form.address"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"银行账号",prop:"account"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.account,callback:function(a){e.$set(e.form,"account",a)},expression:"form.account"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"银行卡号",prop:"cardNo"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.cardNo,callback:function(a){e.$set(e.form,"cardNo",a)},expression:"form.cardNo"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"流水初始金额",prop:"balance"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.balance,callback:function(a){e.$set(e.form,"balance",a)},expression:"form.balance"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"银行所在地",prop:"bankAddress"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.bankAddress,callback:function(a){e.$set(e.form,"bankAddress",a)},expression:"form.bankAddress"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入联系电话"},model:{value:e.form.phone,callback:function(a){e.$set(e.form,"phone",a)},expression:"form.phone"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入联系邮箱"},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"其他备注",prop:"remark"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入备注内容"},model:{value:e.form.remark,callback:function(a){e.$set(e.form,"remark",a)},expression:"form.remark"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(a){e.baseDialogVisible=!1}}},[e._v("取消")]),t("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),t("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"新增支出/收入记录",visible:e.incomeDialogVisible,width:"551px"},on:{"update:visible":function(a){e.incomeDialogVisible=a}}},[t("el-form",{ref:"incomeform",attrs:{model:e.incomeform,"label-width":"178px",rules:e.incomerules}},[t("el-form-item",{attrs:{label:"收付款名称",prop:"customerName"}},[t("el-autocomplete",{staticClass:"form-input",attrs:{size:"mini","fetch-suggestions":e.queryName,maxlength:15,"show-word-limit":"",placeholder:"请输入客户名"},on:{select:e.handleSelect},model:{value:e.incomeform.customerName,callback:function(a){e.$set(e.incomeform,"customerName",a)},expression:"incomeform.customerName"}})],1),t("el-form-item",{attrs:{label:"日期",prop:"createTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择今日日期时间"},model:{value:e.incomeform.createTime,callback:function(a){e.$set(e.incomeform,"createTime",a)},expression:"incomeform.createTime"}})],1),t("el-form-item",{attrs:{label:"收入/支出",prop:"money"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"例如+1000"},model:{value:e.incomeform.money,callback:function(a){e.$set(e.incomeform,"money",a)},expression:"incomeform.money"}})],1),t("el-form-item",{attrs:{label:"资金状态",prop:"accountType"}},[t("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.incomeform.accountType,callback:function(a){e.$set(e.incomeform,"accountType",a)},expression:"incomeform.accountType"}},e._l(e.dict.accountType,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入备注内容"},model:{value:e.incomeform.remark,callback:function(a){e.$set(e.incomeform,"remark",a)},expression:"incomeform.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(a){e.incomeDialogVisible=!1}}},[e._v("取消")]),t("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.saveIncome}},[e._v("保存")])],1)],1)],1)},s=[],o=(t("7f7f"),t("2ef0")),i=t("365c"),r=t("7609"),n=(t("7659"),{name:"CompanyBaseInfo",data:function(){return{dict:{},delVisible:!1,baseDialogVisible:!1,incomeDialogVisible:!1,delRecordVisible:!1,searchAdvice:[],id:"",page:{no:1,total:0,size:20},comInfo:{},tableData:[],form:{},incomeform:{},rules:{name:[{required:!0,message:"请输入公司名",trigger:"change"}],person:[{required:!0,message:"请输入法人代表",trigger:"change"}],license:[{required:!0,message:"请输入营业执照注册号",trigger:"change"}],code:[{required:!0,message:"请输入税务代码",trigger:"change"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"change"}]},incomerules:{customerName:[{required:!0,message:"请输入客户名",trigger:"change"}],createTime:[{required:!0,message:"请输入日期",trigger:"change"}],money:[{required:!0,message:"请输入",trigger:"change"}]},logDate:"",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},created:function(){this.getDict=r["a"].getDict,this.dict=r["a"],this.id=this.$route.params.data.id,this.getData(),this.getPayLog()},methods:{editReady:function(){var e=this;this.baseDialogVisible=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},delConfirm:function(){var e=this,a=this.id;Object(i["z"])({id:a}).then((function(a){a&&(e.$message.success("删除成功"),e.delVisible=!1,e.baseDialogVisible=!1,e.$router.push({name:"baseinfo"}))}))},getData:function(){var e=this,a={id:this.id};Object(i["K"])(a).then((function(a){if(a){e.comInfo={name:a.name,corporation:a.corporation,license:a.license,taxation:a.taxation,phone:a.phone,address:a.address,email:a.email};var t=a.banks[0];e.form={name:a.name,corporation:a.corporation,license:a.license,status:1,taxation:a.taxation,address:a.address,phone:a.phone,balance:a.balance,email:a.email,remark:a.remark,bankName:t.bankName,bankAddress:t.address,account:t.account,cardNo:t.cardNo,password:t.password,bankCompanyId:t.companyId,bankId:t.id}}}))},getPayLog:function(){var e=this,a={id:this.id,page:this.page.no,pageSize:this.page.size,date:this.logDate};Object(i["M"])(a).then((function(a){if(a){var t=a.account;e.tableData=t.records,e.page.total=t.total,e.page.no=t.current}}))},save:function(){var e=this,a=Object(o["cloneDeep"])(this.form),t=[{account:this.form.account,address:this.form.bankAddress,bankName:this.form.bankName,cardNo:this.form.cardNo,password:this.form.password,id:this.form.bankId,companyId:this.form.bankCompanyId}];delete a.account,delete a.bankAddress,delete a.bankName,delete a.cardNo,delete a.password,a.banks=t,a.id=this.id,this.$refs.form.validate((function(t){t&&Object(i["b"])(a).then((function(a){a&&(e.$message.success({message:"修改成功"}),e.baseDialogVisible=!1,e.comInfo=Object(o["cloneDeep"])(e.form))}))}))},delRecordConfirm:function(e){var a=this;this.$confirm("确认删除当前收入记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t){"confirm"===t?Object(i["A"])({id:e}).then((function(e){a.$message.success("删除成功"),a.getPayLog()})):console.log("按下 取消")}})},addIncomeReady:function(){var e=this;this.incomeform={companyId:this.id,customerName:"",customerId:"",createTime:"",money:"",remark:"",accountType:""},this.incomeDialogVisible=!0,this.$nextTick((function(){e.$refs.incomeform.clearValidate()}))},saveIncome:function(){var e=this,a=Object(o["cloneDeep"])(this.incomeform);a.money<0?a.bookType=0:a.bookType=1,a.money=Math.abs(a.money);for(var t=0;t<this.searchAdvice.length;t++){var l=this.searchAdvice[t];a.customerName==l.memberName&&(a.customerId=l.id)}this.$refs.incomeform.validate((function(t){t&&Object(i["a"])(a).then((function(a){a&&(e.$message.success({message:"新增成功"}),e.incomeDialogVisible=!1,e.getPayLog())}))}))},queryName:function(e,a){var t=this;Object(i["ub"])({level:"",status:"",page:1,pageSize:5,userName:e}).then((function(e){for(var l=[],s=0;s<e.records.length;s++){var o=e.records[s];l.push({value:o.memberName,id:o.id,memberName:o.memberName})}t.searchAdvice=l,a(l)}))},handleSelect:function(e){this.incomeform.customerId=e.id},basePageChange:function(e){this.$set(this.page,"no",e),this.getPayLog()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getPayLog()}}}),c=n,m=(t("bd07"),t("2877")),p=Object(m["a"])(c,l,s,!1,null,"1a6430a6",null);a["default"]=p.exports},7609:function(e,a,t){"use strict";var l={accountType:[{value:0,label:"现金"},{value:3,label:"发票"},{value:4,label:"汇款"},{value:5,label:"欠款"}],accountTypeEN:[{value:0,label:"CASH"},{value:3,label:"INVOICE"},{value:4,label:"REMITTANCE"},{value:5,label:"ARREARS"}],payWay:[{value:0,label:"发票"},{value:1,label:"汇款"}],payENWay:[{value:0,label:"INVOICE"},{value:1,label:"CASH"}],payStatus:[{value:0,label:"未支付"},{value:1,label:"已支付"},{value:2,label:"欠款"},{value:3,label:"已结欠"}],payENStatus:[{value:0,label:"PAID"},{value:1,label:"UNPAID"}],soldStatus:[{value:0,label:"即将到货"},{value:1,label:"现货"},{value:2,label:"售罄"}],settingItemValue:[{value:5,label:"特色/Special"},{value:0,label:"颜色/Color"},{value:1,label:"尺码/Size"},{value:2,label:"面料/Material"},{value:4,label:"配比/Ratio"}],containerStatus:[{value:0,label:"未运输"},{value:1,label:"已发货"},{value:2,label:"已到达待确认"},{value:3,label:"已确认货物"}],transportType:[{value:0,label:"海运"},{value:2,label:"空运"},{value:3,label:"其他"}],verifyStatus:[{value:0,label:"未审核"},{value:1,label:"不通过"},{value:2,label:"审核通过"},{value:3,label:"通过欠款待发货"},{value:4,label:"仓库发货"},{value:5,label:"退审处理中"},{value:6,label:"退审处理中"}],verifyCheckStatus:[{value:0,label:"未审核"},{value:1,label:"已审核"},{value:2,label:"退审"}],userLevel:[{value:1,label:"销售人员"},{value:2,label:"管理员"}],getDict:function(e,a){for(var t=0;t<l[a].length;t++){var s=l[a][t];if(s.value==e)return s.label}}};a["a"]=l},bd07:function(e,a,t){"use strict";var l=t("cfb2"),s=t.n(l);s.a},cfb2:function(e,a,t){}}]);