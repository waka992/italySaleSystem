(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customerinfo"],{1844:function(e,a,t){"use strict";var l=t("316e"),s=t.n(l);s.a},"316e":function(e,a,t){},"9bc0":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("客户信息")])],1)],1),t("div",{staticClass:"box"},[t("div",{staticClass:"handle-box"},[t("div",{staticClass:"customer-title"},[e._v("客户信息")]),t("el-input",{staticClass:"name-search",attrs:{size:"mini","suffix-icon":"el-icon-search",placeholder:"输入客户名称"},model:{value:e.userName,callback:function(a){e.userName=a},expression:"userName"}}),t("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.getData}}),t("el-button",{staticClass:"new-btn",attrs:{type:"primary"},on:{click:e.addReady}},[e._v("+客户录入")])],1),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","header-cell-class-name":"table-header"}},[t("el-table-column",{attrs:{prop:"memberName",label:"客户名称",align:"center"}}),t("el-table-column",{attrs:{prop:"caseNum",label:"销售箱数",align:"center"}}),t("el-table-column",{attrs:{prop:"arrears",label:"欠款金额",align:"center"}}),t("el-table-column",{attrs:{prop:"price",label:"总金额",align:"center"}}),t("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.checkDetail(a.row)}}},[e._v("详情")]),t("el-button",{staticClass:"del-btn",attrs:{type:"text"},on:{click:function(t){return e.checkDetail(a.row.id)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.page.no,"page-size":e.page.size,"page-sizes":[5,10,20],total:e.page.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.basePageChange}})],1)],1),t("div",{staticClass:"bottom-box"},[t("div",{staticClass:"inner-box"},[t("div",{staticClass:"left-box"},[t("div",{staticClass:"box-title"},[e._v("本周最佳客户")]),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.bestTableData,stripe:"","header-cell-class-name":"table-header"}},[t("el-table-column",{attrs:{prop:"customer_name",label:"客户名称",align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                            "+e._s(e.dateFormat(a.row.createTime))+"\n                        ")]}}])}),t("el-table-column",{attrs:{prop:"caseNum",label:"箱件数",align:"center",width:"80"}}),t("el-table-column",{attrs:{prop:"price",label:"总金额",align:"center",width:"80"}})],1)],1),t("div",{staticClass:"right-box"},[t("div",{staticClass:"box-title"},[e._v("常用客户")]),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.commonTableData,stripe:"","header-cell-class-name":"table-header"}},[t("el-table-column",{attrs:{prop:"customer_name",label:"客户名称",align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                            "+e._s(e.dateFormat(a.row.createTime))+"\n                        ")]}}])}),t("el-table-column",{attrs:{prop:"caseNum",label:"箱件数",align:"center",width:"80"}}),t("el-table-column",{attrs:{prop:"price",label:"总金额",align:"center",width:"80"}})],1)],1)])]),t("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"客户录入",visible:e.baseDialogVisible,width:"888px"},on:{"update:visible":function(a){e.baseDialogVisible=a}}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",inline:!0,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"名称",prop:"memberName"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入公司名"},model:{value:e.form.memberName,callback:function(a){e.$set(e.form,"memberName",a)},expression:"form.memberName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"备忘录",prop:"remarks"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.remarks,callback:function(a){e.$set(e.form,"remarks",a)},expression:"form.remarks"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商地址"},model:{value:e.form.address,callback:function(a){e.$set(e.form,"address",a)},expression:"form.address"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"银行信息",prop:"bank"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.bank,callback:function(a){e.$set(e.form,"bank",a)},expression:"form.bank"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商电话"},model:{value:e.form.mobile,callback:function(a){e.$set(e.form,"mobile",a)},expression:"form.mobile"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"初始欠款",prop:"arrears"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.arrears,callback:function(a){e.$set(e.form,"arrears",a)},expression:"form.arrears"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"会员呢称",prop:"appName"}},[t("el-input",{staticClass:"form-input",attrs:{placeholder:"app登录账号"},model:{value:e.form.appName,callback:function(a){e.$set(e.form,"appName",a)},expression:"form.appName"}})],1)],1),t("el-col",{attrs:{span:12}},["create"===e.operate?t("el-form-item",{attrs:{label:"会员密码",prop:"password"}},[t("el-input",{staticClass:"form-input",attrs:{placeholder:"app登录密码"},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1):e._e()],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"会员状态",prop:"status"}},[t("el-select",{staticClass:"form-input",attrs:{disabled:"create"===e.operate,placeholder:"请选择会员状态"},model:{value:e.form.status,callback:function(a){e.$set(e.form,"status",a)},expression:"form.status"}},[t("el-option",{attrs:{value:0,label:"注销"}}),t("el-option",{attrs:{value:1,label:"激活"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"会员等级",prop:"level"}},[t("el-select",{staticClass:"form-input",attrs:{placeholder:"请选择会员等级"},model:{value:e.form.level,callback:function(a){e.$set(e.form,"level",a)},expression:"form.level"}},[t("el-option",{attrs:{value:1,label:"游客"}}),t("el-option",{attrs:{value:2,label:"普通"}}),t("el-option",{attrs:{value:3,label:"VIP"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"上传图片",prop:"cnImgUrl"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.cnImgUrl?t("img",{staticClass:"avatar",attrs:{src:e.form.cnImgUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(a){e.baseDialogVisible=!1}}},[e._v("取消")]),t("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},s=[],r=t("2ef0"),o=t("c1df"),i=t.n(o),n=t("365c"),c={name:"ContainerInfo",data:function(){return{baseDialogVisible:!1,timePicker:[],operate:"create",userName:"",page:{no:1,total:0,size:5},tableData:[],bestTableData:[],commonTableData:[],form:{},rules:{memberName:[{required:!0,message:"请输入",trigger:"change"}],address:[{required:!0,message:"请选择",trigger:"change"}],mobile:[{required:!0,message:"请选择",trigger:"change"}],appName:[{required:!0,message:"请输入",trigger:"change"}],password:[{required:!0,message:"请输入",trigger:"change"}]}}},created:function(){this.getData(),this.getBest()},methods:{resetData:function(){this.form={memberName:"",appName:"",password:"",status:1,level:1,address:"",bank:"",mobile:"",arrears:"",remarks:"",cnImgUrl:""}},addReady:function(){this.resetData(),this.baseDialogVisible=!0},getData:function(){var e=this,a={pageSize:this.page.size,page:this.page.no,userName:this.userName};Object(n["p"])(a).then((function(a){e.tableData=a.records,e.page.total=a.total,e.page.no=a.current}))},getBest:function(){var e=this;Object(n["B"])({}).then((function(a){console.log(a),e.bestTableData=a.star,e.commonTableData=a.commonly}))},save:function(){var e=this,a=Object(r["cloneDeep"])(this.form);this.$refs.form.validate((function(t){t&&(a.password&&(a.password=window.btoa(a.password)),Object(n["U"])(a).then((function(a){a&&(e.$message.success({message:"添加成功"}),e.baseDialogVisible=!1,e.getData())})))}))},checkDetail:function(e){this.$router.push({name:"customerinfodetail",params:{data:e}})},handleAvatarSuccess:function(e,a){this.form.cnImgUrl=URL.createObjectURL(a.raw)},basePageChange:function(e){this.$set(this.page,"no",e),this.getData()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getData()},dateFormat:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CN";return"CN"==a?i()(e).format("YYYY.MM.DD"):"EN"==a?i()(e).format("YYYY/MM/DD"):void 0}}},m=c,p=(t("1844"),t("2877")),u=Object(p["a"])(m,l,s,!1,null,"7209d40f",null);a["default"]=u.exports}}]);