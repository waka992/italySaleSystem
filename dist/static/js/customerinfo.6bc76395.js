(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customerinfo"],{"0279":function(e,t,a){},"07be":function(e,t,a){"use strict";var s=a("0279"),l=a.n(s);l.a},"9bc0":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("客户信息")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"customer-title"},[e._v("客户信息")]),a("el-input",{staticClass:"name-search",attrs:{size:"mini","suffix-icon":"el-icon-search",placeholder:"输入客户名称"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.getData}}),a("el-button",{staticClass:"new-btn",attrs:{type:"primary"},on:{click:e.addReady}},[e._v("+客户录入")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"memberName",label:"客户名称",align:"center"}}),a("el-table-column",{attrs:{prop:"caseNum",label:"销售箱数",align:"center"}}),a("el-table-column",{attrs:{prop:"arrears",label:"欠款金额",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"总金额",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:function(a){return e.checkDetail(t.row)}}},[e._v("详情")]),a("el-dropdown",{on:{command:function(a){e.operateUser(a,t.row)}}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"text"}},[e._v("操作")]),a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#409EFF"}})],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit"}},[e._v("修改")]),a("el-dropdown-item",{attrs:{command:"del"}},[e._v("删除")])],1)],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page.no,"page-size":e.page.size,"page-sizes":[5,10,20],total:e.page.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.basePageChange}})],1)],1),a("div",{staticClass:"bottom-box"},[a("div",{staticClass:"inner-box"},[a("div",{staticClass:"left-box"},[a("div",{staticClass:"box-title"},[e._v("本周最佳客户")]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.bestTableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"customer_name",label:"客户名称",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(e.dateFormat(t.row.createTime))+"\n                        ")]}}])}),a("el-table-column",{attrs:{prop:"caseNum",label:"箱件数",align:"center",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"总金额",align:"center",width:"80"}})],1)],1),a("div",{staticClass:"right-box"},[a("div",{staticClass:"box-title"},[e._v("常用客户")]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.commonTableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"customer_name",label:"客户名称",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(e.dateFormat(t.row.createTime))+"\n                        ")]}}])}),a("el-table-column",{attrs:{prop:"caseNum",label:"箱件数",align:"center",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"总金额",align:"center",width:"80"}})],1)],1)])]),a("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"客户录入",visible:e.baseDialogVisible,width:"888px"},on:{"update:visible":function(t){e.baseDialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",inline:!0,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"memberName"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入公司名"},model:{value:e.form.memberName,callback:function(t){e.$set(e.form,"memberName",t)},expression:"form.memberName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备忘录",prop:"remarks"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"银行信息",prop:"bank"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商电话"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"初始欠款",prop:"arrears"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.arrears,callback:function(t){e.$set(e.form,"arrears",t)},expression:"form.arrears"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"会员昵称",prop:"appName"}},[a("el-input",{staticClass:"form-input",attrs:{placeholder:"app登录账号"},model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}})],1)],1),a("el-col",{attrs:{span:12}},["create"===e.operate?a("el-form-item",{attrs:{label:"会员密码",prop:"password"}},[a("el-input",{staticClass:"form-input",attrs:{placeholder:"app登录密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"会员状态",prop:"status"}},[a("el-select",{staticClass:"form-input",attrs:{placeholder:"请选择会员状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{value:0,label:"注销"}}),a("el-option",{attrs:{value:1,label:"激活"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"会员等级",prop:"level"}},[a("el-select",{staticClass:"form-input",attrs:{placeholder:"请选择会员等级"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[a("el-option",{attrs:{value:1,label:"游客"}}),a("el-option",{attrs:{value:2,label:"普通"}}),a("el-option",{attrs:{value:3,label:"VIP"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上传图片",prop:"cnImgUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.cnImgUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.cnImgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.baseDialogVisible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},l=[],r=(a("c5f6"),a("2ef0")),o=a("365c"),i={name:"ContainerInfo",data:function(){return{baseDialogVisible:!1,timePicker:[],operate:"create",userName:"",page:{no:1,total:0,size:5},tableData:[],bestTableData:[],commonTableData:[],form:{},rules:{memberName:[{required:!0,message:"请输入",trigger:"change"}]}}},created:function(){this.getData(),this.getBest()},methods:{resetData:function(){this.form={memberName:"",appName:"",password:"",status:1,level:1,address:"",bank:"",mobile:"",arrears:"",remarks:"",cnImgUrl:""}},addReady:function(){this.resetData(),this.operate="create",this.baseDialogVisible=!0},getData:function(){var e=this,t={pageSize:this.page.size,page:this.page.no,userName:this.userName};Object(o["ob"])(t).then((function(t){e.tableData=t.records,e.page.total=t.total,e.page.no=t.current}))},getBest:function(){var e=this;Object(o["F"])({}).then((function(t){console.log(t),e.bestTableData=t.star,e.commonTableData=t.commonly}))},save:function(){var e=this,t=Object(r["cloneDeep"])(this.form);this.$refs.form.validate((function(a){a&&(t.password&&(t.password=window.btoa(t.password)),"create"==e.operate&&Object(o["hb"])(t).then((function(t){t&&(e.$message.success({message:"添加成功"}),e.baseDialogVisible=!1,e.getData())})),"edit"==e.operate&&(delete t.password,Object(o["pb"])(t).then((function(t){t&&(e.$message.success({message:"修改成功"}),e.baseDialogVisible=!1,e.getData())}))))}))},checkDetail:function(e){this.$router.push({name:"customerinfodetail",params:{data:e}})},operateUser:function(e,t){var a=this;if(console.log(e,t),"edit"==e){this.operate="edit";var s=t.memberName,l=t.appName,r=t.password,i=t.status,n=t.level,c=t.address,m=t.bank,p=t.mobile,u=t.arrears,b=t.remarks,d=t.cnImgUrl;this.form={memberName:s,appName:l,password:r,status:Number(i),level:n,address:c,bank:m,mobile:p,arrears:u,remarks:b,cnImgUrl:d},this.baseDialogVisible=!0}else"del"==e&&(this.$confirm,this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){Object(o["B"])({id:t.id}).then((function(e){a.$message.success("删除成功"),a.getData()}))})).catch((function(){})))},handleAvatarSuccess:function(e,t){this.form.cnImgUrl=URL.createObjectURL(t.raw)},basePageChange:function(e){this.$set(this.page,"no",e),this.getData()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getData()},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CN";return"CN"==t?this.$moment(e).format("YYYY.MM.DD"):"EN"==t?this.$moment(e).format("YYYY/MM/DD"):void 0}}},n=i,c=(a("07be"),a("2877")),m=Object(c["a"])(n,s,l,!1,null,"12969428",null);t["default"]=m.exports}}]);