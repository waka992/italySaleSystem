(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customerinfodetail"],{"04bf":function(e,t,a){},"1ab3":function(e,t,a){"use strict";t.__esModule=!0;var s=a("7fae"),i=a("6d8b"),o=a("2306"),n=a("7d6c"),r=a("e887"),l=a("bb70"),c=a("89b6"),u=a("7837"),d=a("d32f"),m=function(e){function t(t,a,s){var i=e.call(this)||this;i.z2=2;var n=new o.Polyline,r=new o.Text;return i.setTextGuideLine(n),i.setTextContent(r),i.updateData(t,a,s,!0),i}return s.__extends(t,e),t.prototype.updateData=function(e,t,a,r){var l=this,c=e.hostModel,u=e.getItemModel(t),m=u.getModel("emphasis"),f=e.getItemLayout(t),p=i.extend(d.getSectorCornerRadius(u.getModel("itemStyle"),f)||{},f);if(r){l.setShape(p);var h=c.getShallow("animationType");"scale"===h?(l.shape.r=f.r0,o.initProps(l,{shape:{r:f.r}},c,t)):null!=a?(l.setShape({startAngle:a,endAngle:a}),o.initProps(l,{shape:{startAngle:f.startAngle,endAngle:f.endAngle}},c,t)):(l.shape.endAngle=f.startAngle,o.updateProps(l,{shape:{endAngle:f.endAngle}},c,t))}else o.updateProps(l,{shape:p},c,t);l.useStyle(e.getItemVisual(t,"style")),n.setStatesStylesFromModel(l,u);var g=(f.startAngle+f.endAngle)/2,v=c.get("selectedOffset"),b=Math.cos(g)*v,y=Math.sin(g)*v,C=u.getShallow("cursor");C&&l.attr("cursor",C),this._updateLabel(c,e,t),l.ensureState("emphasis").shape=s.__assign({r:f.r+(m.get("scale")&&m.get("scaleSize")||0)},d.getSectorCornerRadius(m.getModel("itemStyle"),f)),i.extend(l.ensureState("select"),{x:b,y:y,shape:d.getSectorCornerRadius(u.getModel(["select","itemStyle"]),f)}),i.extend(l.ensureState("blur"),{shape:d.getSectorCornerRadius(u.getModel(["blur","itemStyle"]),f)});var _=l.getTextGuideLine(),w=l.getTextContent();i.extend(_.ensureState("select"),{x:b,y:y}),i.extend(w.ensureState("select"),{x:b,y:y}),n.enableHoverEmphasis(this,m.get("focus"),m.get("blurScope"))},t.prototype._updateLabel=function(e,t,a){var s=this,o=t.getItemModel(a),n=o.getModel("labelLine"),r=t.getItemVisual(a,"style"),l=r&&r.fill,d=r&&r.opacity;u.setLabelStyle(s,u.getLabelStatesModels(o),{labelFetcher:t.hostModel,labelDataIndex:a,inheritColor:l,defaultOpacity:d,defaultText:e.getFormattedLabel(a,"normal")||t.getName(a)});var m=s.getTextContent();s.setTextConfig({position:null,rotation:null}),m.attr({z2:10}),c.setLabelLineStyle(this,c.getLabelLineStatesModels(o),{stroke:l,opacity:i.retrieve3(n.get(["lineStyle","opacity"]),d,1)})},t}(o.Sector),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return s.__extends(t,e),t.prototype.init=function(){var e=new o.Group;this._sectorGroup=e},t.prototype.render=function(e,t,a,s){var i,n=e.getData(),r=this._data,c=this.group;if(!r&&n.count()>0){for(var u=n.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<n.count();++d)u=n.getItemLayout(d);u&&(i=u.startAngle)}n.diff(r).add((function(e){var t=new m(n,e,i);n.setItemGraphicEl(e,t),c.add(t)})).update((function(e,t){var a=r.getItemGraphicEl(t);a.updateData(n,e,i),a.off("click"),c.add(a),n.setItemGraphicEl(e,a)})).remove((function(t){var a=r.getItemGraphicEl(t);o.removeElementWithFadeOut(a,e,t)})).execute(),l["default"](e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=n)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var a=t.getData(),s=a.getItemLayout(0);if(s){var i=e[0]-s.cx,o=e[1]-s.cy,n=Math.sqrt(i*i+o*o);return n<=s.r&&n>=s.r0}},t.type="pie",t}(r["default"]);r["default"].registerClass(f),t["default"]=f},2107:function(e,t,a){},"292e":function(e,t,a){"use strict";t.__esModule=!0;var s=a("3842"),i=a("f934"),o=a("6d8b"),n=2*Math.PI,r=Math.PI/180;function l(e,t){return i.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function c(e,t,a){t.eachSeriesByType(e,(function(e){var t=e.getData(),i=t.mapDimension("value"),c=l(e,a),u=e.get("center"),d=e.get("radius");o.isArray(d)||(d=[0,d]),o.isArray(u)||(u=[u,u]);var m=s.parsePercent(c.width,a.getWidth()),f=s.parsePercent(c.height,a.getHeight()),p=Math.min(m,f),h=s.parsePercent(u[0],m)+c.x,g=s.parsePercent(u[1],f)+c.y,v=s.parsePercent(d[0],p/2),b=s.parsePercent(d[1],p/2),y=-e.get("startAngle")*r,C=e.get("minAngle")*r,_=0;t.each(i,(function(e){!isNaN(e)&&_++}));var w=t.getSum(i),D=Math.PI/(w||_)*2,x=e.get("clockwise"),S=e.get("roseType"),N=e.get("stillShowZeroSum"),T=t.getDataExtent(i);T[0]=0;var k=n,I=0,P=y,A=x?1:-1;if(t.setLayout({viewRect:c,r:b}),t.each(i,(function(e,a){var i;if(isNaN(e))t.setItemLayout(a,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:h,cy:g,r0:v,r:S?NaN:b});else{i="area"!==S?0===w&&N?D:e*D:n/_,i<C?(i=C,k-=C):I+=e;var o=P+A*i;t.setItemLayout(a,{angle:i,startAngle:P,endAngle:o,clockwise:x,cx:h,cy:g,r0:v,r:S?s.linearMap(e,T,[v,b]):b}),P=o}})),k<n&&_)if(k<=.001){var $=n/_;t.each(i,(function(e,a){if(!isNaN(e)){var s=t.getItemLayout(a);s.angle=$,s.startAngle=y+A*a*$,s.endAngle=y+A*(a+1)*$}}))}else D=k/I,P=y,t.each(i,(function(e,a){if(!isNaN(e)){var s=t.getItemLayout(a),i=s.angle===C?C:e*D;s.startAngle=P,s.endAngle=P+A*i,P+=A*i}}))}))}t["default"]=c},4650:function(e,t,a){"use strict";t.__esModule=!0;var s=a("3eba"),i=a("6d8b");function o(e,t,a){var s,o={},n="toggleSelected"===e;return a.eachComponent("legend",(function(a){n&&null!=s?a[s?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?a[e]():(a[e](t.name),s=a.isSelected(t.name));var r=a.getData();i.each(r,(function(e){var t=e.get("name");if("\n"!==t&&""!==t){var s=a.isSelected(t);o.hasOwnProperty(t)?o[t]=o[t]&&s:o[t]=s}}))})),"allSelect"===e||"inverseSelect"===e?{selected:o}:{name:t.name,selected:o}}s.registerAction("legendToggleSelect","legendselectchanged",i.curry(o,"toggleSelected")),s.registerAction("legendAllSelect","legendselectall",i.curry(o,"allSelect")),s.registerAction("legendInverseSelect","legendinverseselect",i.curry(o,"inverseSelect")),s.registerAction("legendSelect","legendselected",i.curry(o,"select")),s.registerAction("legendUnSelect","legendunselected",i.curry(o,"unSelect"))},"53d6":function(e,t,a){"use strict";var s=a("7f89"),i=a.n(s);i.a},"5e97":function(e,t,a){"use strict";t.__esModule=!0;var s=a("7fae"),i=a("6d8b"),o=a("a15a"),n=a("2306"),r=a("7d6c"),l=a("7837"),c=a("7919"),u=a("f934"),d=a("b12f"),m=a("41ef"),f=i.curry,p=i.each,h=n.Group,g=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.newlineDisabled=!1,a}return s.__extends(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new h),this.group.add(this._selectorGroup=new h),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,a){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),n=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===n?"right":"left");var r=e.get("selector",!0),l=e.get("selectorPosition",!0);!r||l&&"auto"!==l||(l="horizontal"===n?"end":"start"),this.renderInner(o,e,t,a,r,n,l);var d=e.getBoxLayoutParams(),m={width:a.getWidth(),height:a.getHeight()},f=e.get("padding"),p=u.getLayoutRect(d,m,f),h=this.layoutInner(e,o,p,s,r,l),g=u.getLayoutRect(i.defaults({width:h.width,height:h.height},d),m,f);this.group.x=g.x-h.x,this.group.y=g.y-h.y,this.group.markRedraw(),this.group.add(this._backgroundEl=c.makeBackground(h,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,a,s,o,n,r){var l=this.getContentGroup(),c=i.createHashMap(),u=t.get("selectedMode"),d=[];a.eachRawSeries((function(e){!e.get("legendHoverLink")&&d.push(e.id)})),p(t.getData(),(function(i,o){var n=i.get("name");if(!this.newlineDisabled&&(""===n||"\n"===n)){var r=new h;return r.newline=!0,void l.add(r)}var p=a.getSeriesByName(n)[0];if(!c.get(n)){if(p){var g=p.getData(),v=g.getVisual("style"),y=v[g.getVisual("drawType")]||v.fill,w=v.stroke,D=v.decal,x=g.getVisual("legendSymbol")||"roundRect",S=g.getVisual("symbol"),N=this._createItem(n,o,i,t,x,S,e,y,w,D,u);N.on("click",f(b,n,null,s,d)).on("mouseover",f(C,p.name,null,s,d)).on("mouseout",f(_,p.name,null,s,d)),c.set(n,!0)}else a.eachRawSeries((function(a){if(!c.get(n)&&a.legendVisualProvider){var r=a.legendVisualProvider;if(!r.containName(n))return;var l=r.indexOfName(n),p=r.getItemVisual(l,"style"),h=p.stroke,g=p.decal,v=p.fill,y=m.parse(p.fill);y&&0===y[3]&&(y[3]=.2,v=m.stringify(y,"rgba"));var w="roundRect",D=this._createItem(n,o,i,t,w,null,e,v,h,g,u);D.on("click",f(b,null,n,s,d)).on("mouseover",f(C,null,n,s,d)).on("mouseout",f(_,null,n,s,d)),c.set(n,!0)}}),this);0}}),this),o&&this._createSelector(o,t,s,n,r)},t.prototype._createSelector=function(e,t,a,s,i){var o=this.getSelectorGroup();p(e,(function(e){var s=e.type,i=new n.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:"all"===s?"legendAllSelect":"legendInverseSelect"})}});o.add(i);var c=t.getModel("selectorLabel"),u=t.getModel(["emphasis","selectorLabel"]);l.setLabelStyle(i,{normal:c,emphasis:u},{defaultText:e.title}),r.enableHoverEmphasis(i)}))},t.prototype._createItem=function(e,t,a,s,c,u,d,m,f,p,g){var b=s.get("itemWidth"),y=s.get("itemHeight"),C=s.get("inactiveColor"),_=s.get("inactiveBorderColor"),w=s.get("symbolKeepAspect"),D=s.getModel("itemStyle"),x=s.isSelected(e),S=new h,N=a.getModel("textStyle"),T=a.get("icon"),k=a.getModel("tooltip"),I=k.parentModel;c=T||c;var P=o.createSymbol(c,0,0,b,y,x?m:C,null==w||w);if(S.add(v(P,c,D,f,_,p,x)),!T&&u&&(u!==c||"none"===u)){var A=.8*y;"none"===u&&(u="circle");var $=o.createSymbol(u,(b-A)/2,(y-A)/2,A,A,x?m:C,null==w||w);S.add(v($,u,D,f,_,p,x))}var L="left"===d?b+5:-5,M=d,R=s.get("formatter"),O=e;"string"===typeof R&&R?O=R.replace("{name}",null!=e?e:""):"function"===typeof R&&(O=R(e)),S.add(new n.Text({style:l.createTextStyle(N,{text:O,x:L,y:y/2,fill:x?N.getTextColor():C,align:M,verticalAlign:"middle"})}));var E=new n.Rect({shape:S.getBoundingRect(),invisible:!0});if(k.get("show")){var z={componentType:"legend",legendIndex:s.componentIndex,name:e,$vars:["name"]};E.tooltip=i.extend({content:e,formatter:I.get("formatter",!0)||function(e){return e.name},formatterParams:z},k.option)}return S.add(E),S.eachChild((function(e){e.silent=!0})),E.silent=!g,this.getContentGroup().add(S),r.enableHoverEmphasis(S),S.__legendDataIndex=t,S},t.prototype.layoutInner=function(e,t,a,s,i,o){var n=this.getContentGroup(),r=this.getSelectorGroup();u.box(e.get("orient"),n,e.get("itemGap"),a.width,a.height);var l=n.getBoundingRect(),c=[-l.x,-l.y];if(r.markRedraw(),n.markRedraw(),i){u.box("horizontal",r,e.get("selectorItemGap",!0));var d=r.getBoundingRect(),m=[-d.x,-d.y],f=e.get("selectorButtonGap",!0),p=e.getOrient().index,h=0===p?"width":"height",g=0===p?"height":"width",v=0===p?"y":"x";"end"===o?m[p]+=l[h]+f:c[p]+=d[h]+f,m[1-p]+=l[g]/2-d[g]/2,r.x=m[0],r.y=m[1],n.x=c[0],n.y=c[1];var b={x:0,y:0};return b[h]=l[h]+f+d[h],b[g]=Math.max(l[g],d[g]),b[v]=Math.min(0,d[v]+m[1-p]),b}return n.x=c[0],n.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(d["default"]);function v(e,t,a,s,i,o,n){var r;return"line"!==t&&t.indexOf("empty")<0?(r=a.getItemStyle(),e.style.stroke=s,e.style.decal=o,n||(r.stroke=i)):r=a.getItemStyle(["borderWidth","borderColor"]),e.setStyle(r),e}function b(e,t,a,s){_(e,t,a,s),a.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),C(e,t,a,s)}function y(e){var t,a=e.getZr().storage.getDisplayList(),s=0,i=a.length;while(s<i&&!(t=a[s].states.emphasis))s++;return t&&t.hoverLayer}function C(e,t,a,s){y(a)||a.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:s})}function _(e,t,a,s){y(a)||a.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:s})}d["default"].registerClass(g),t["default"]=g},"6a47":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"autocomplete-area"},[a("el-autocomplete",{staticClass:"form-input",style:"width: "+e.width,attrs:{disabled:e.disabled,size:"mini","fetch-suggestions":e.queryName,maxlength:15,"show-word-limit":"",placeholder:"请输入客户名"},on:{select:e.handleSelect},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)},i=[],o=a("365c"),n={name:"CustomerNameSelector",props:{width:"",disabled:!1},data:function(){return{form:{name:""}}},methods:{queryName:function(e,t){Object(o["ob"])({level:"",status:"",page:1,pageSize:5,userName:e}).then((function(e){for(var a=[],s=0;s<e.records.length;s++){var i=e.records[s];i.value=i.memberName,a.push(i)}t(a)}))},handleSelect:function(e){this.$emit("selectData",e)},setName:function(e){this.$set(this.form,"name",e)},reset:function(){this.form.name=""}}},r=n,l=(a("c2db"),a("2877")),c=Object(l["a"])(r,s,i,!1,null,null,null);t["a"]=c.exports},"6f29":function(e,t,a){},"6f6f":function(e,t,a){"use strict";var s=a("2107"),i=a.n(s);i.a},"72e4":function(e,t,a){"use strict";var s=a("c027"),i=a.n(s);i.a},7919:function(e,t,a){"use strict";t.__esModule=!0;var s=a("f934"),i=a("eda2"),o=a("2306");function n(e,t,a){var i=t.getBoxLayoutParams(),o=t.get("padding"),n={width:a.getWidth(),height:a.getHeight()},r=s.getLayoutRect(i,n,o);s.box(t.get("orient"),e,t.get("itemGap"),r.width,r.height),s.positionElement(e,i,n,o)}function r(e,t){var a=i.normalizeCssArray(t.get("padding")),s=t.getItemStyle(["color","opacity"]);return s.fill=t.get("backgroundColor"),e=new o.Rect({shape:{x:e.x-a[3],y:e.y-a[0],width:e.width+a[1]+a[3],height:e.height+a[0]+a[2],r:t.get("borderRadius")},style:s,silent:!0,z2:-1}),e}t.layout=n,t.makeBackground=r},"7ea1":function(e,t,a){},"7f89":function(e,t,a){},"84d5":function(e,t,a){"use strict";t.__esModule=!0;var s=a("7fae"),i=a("6d8b"),o=a("4319"),n=a("e0d3"),r=a("6cb7"),l=function(e,t){return"all"===t?{type:"all",title:e.getLocale(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocale(["legend","selector","inverse"])}:void 0},c=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.layoutMode={type:"box",ignoreSize:!0},a}return s.__extends(t,e),t.prototype.init=function(e,t,a){this.mergeDefaultAndTheme(e,a),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,a){e.prototype.mergeOption.call(this,t,a),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,a=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),i.isArray(t)&&i.each(t,(function(e,s){i.isString(e)&&(e={type:e}),t[s]=i.merge(e,l(a,e.type))}))},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,a=0;a<e.length;a++){var s=e[a].get("name");if(this.isSelected(s)){this.select(s),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],a=[];e.eachRawSeries((function(s){var i,o=s.name;if(a.push(o),s.legendVisualProvider){var r=s.legendVisualProvider,l=r.getAllNames();e.isSeriesFiltered(s)||(a=a.concat(l)),l.length?t=t.concat(l):i=!0}else i=!0;i&&n.isNameSpecified(s)&&t.push(s.name)})),this._availableNames=a;var s=this.get("data")||t,r=i.map(s,(function(e){return"string"!==typeof e&&"number"!==typeof e||(e={name:e}),new o["default"](e,this,this.ecModel)}),this);this._data=r},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected,a=this.get("selectedMode");if("single"===a){var s=this._data;i.each(s,(function(e){t[e.get("name")]=!1}))}t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;i.each(e,(function(e){t[e.get("name",!0)]=!0}))},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;i.each(e,(function(e){var a=e.get("name",!0);t.hasOwnProperty(a)||(t[a]=!0),t[a]=!t[a]}))},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&i.indexOf(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(r["default"]);r["default"].registerClass(c),t["default"]=c},8949:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{name:"customerinfo"}}},[e._v("客户信息")]),a("el-breadcrumb-item",[e._v("客户信息详情")])],1),a("div",{staticClass:"operate-btns"},[a("el-button",{staticClass:"btn3 outer",on:{click:function(t){return e.showDialog("receive")}}},[e._v("收款")]),a("el-button",{staticClass:"btn3 outer",on:{click:function(t){return e.showDialog("balance")}}},[e._v("结欠")]),a("el-button",{staticClass:"btn2 outer",on:{click:function(t){return e.showDialog("bill")}}},[e._v("账单总汇")]),a("el-button",{staticClass:"btn2 outer",on:{click:function(t){return e.showDialog("sold")}}},[e._v("销售统计")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"detail-card"},[a("div",{staticClass:"title"},[e._v(e._s(e.comInfo.memberName))]),a("div",{staticClass:"handle-box"}),a("el-row",{staticClass:"detail-row"},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("地址：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.address))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("电话：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.mobile))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("银行信息：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.bank))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("初始欠款：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.arrears))])])],1),a("el-row",{staticClass:"detail-row"},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("会员昵称：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.appName))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("等级：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(1==e.comInfo.level?"游客":2==e.comInfo.level?"普通":3==e.comInfo.level?"VIP":""))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("状态：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(1==e.comInfo.status?"激活":"注销"))])])],1),a("el-row",{staticClass:"detail-row"},[a("el-col",{attrs:{span:18}},[a("span",{staticClass:"detail-label"},[e._v("备忘：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.remarks))])])],1)],1),a("div",{staticClass:"record-card"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title"},[e._v("销售记录")]),a("el-select",{staticStyle:{margin:"0 20px"},attrs:{size:"mini",placeholder:"请选择",clearable:""},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.dict.payStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{icon:"el-icon-search",size:"mini"},on:{click:e.getData}}),a("div",{staticClass:"operate-btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showDialog("new")}}},[e._v("+添加订单")])],1)],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","header-cell-class-name":"table-header"},on:{"selection-change":e.soldRecordChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.dateFormat(t.row.createTime))+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"caseNum",label:"箱数",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"销售金额",align:"center"}}),a("el-table-column",{attrs:{label:"支付状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.getDict(t.row.status,"payStatus"))+"\n                    ")]}}])}),a("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.getDict(t.row.process,"verifyStatus"))+"\n                    ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.process||1==t.row.process,expression:"scope.row.process == 0 || scope.row.process == 1"}],attrs:{type:"text"},on:{click:function(a){return e.showDialog("edit",t.row.id)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.row.process&&1!=t.row.process&&t.row.process&&0==t.row.status,expression:"scope.row.process != 0 && scope.row.process != 1 && scope.row.process && scope.row.status == 0"}],attrs:{type:"text"},on:{click:function(a){return e.showDialog("pay",t.row)}}},[e._v("支付")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page.no,"page-size":e.page.size,"page-sizes":[5,10,20],total:e.page.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.basePageChange}})],1)],1)]),a("div",{staticClass:"bottom-box"},[a("div",{staticClass:"inner-box"},[a("div",{staticClass:"left-box"},[a("div",{staticClass:"box-title"},[e._v("欠款总汇")]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.deptTableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"price",label:"销售金额",align:"center"}}),a("el-table-column",{attrs:{prop:"startArrears",label:"初始欠款",align:"center"}}),a("el-table-column",{attrs:{prop:"goodsTotal",label:"件数",align:"center",width:"80"}}),a("el-table-column",{attrs:{prop:"collection",label:"总收款",align:"center",width:"80"}}),a("el-table-column",{attrs:{prop:"arrears",label:"余数",align:"center",width:"80"}})],1)],1),a("div",{staticClass:"right-box"},[a("div",{staticClass:"box-title"},[e._v("收款总汇")]),a("div",{staticClass:"box-operate"}),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.receiveTableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"payWay",label:"收款方式",align:"center"}}),a("el-table-column",{attrs:{prop:"value",label:"金额",align:"center"}})],1)],1)])]),a("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!1,title:"新订单",visible:e.newOrderDialog,width:"830px"},on:{"update:visible":function(t){e.newOrderDialog=t}}},[a("dialog-new-order",{ref:"newOrderDialogRef",on:{saveData:e.saveSubmit}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.newOrderDialog=!1}}},[e._v("取消")]),a("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1),a("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!0,title:"结欠",visible:e.balanceDialog,width:"400px"},on:{"update:visible":function(t){e.balanceDialog=t}}},[a("dialog-balance",{ref:"balanceDialogRef",on:{balance:e.askBalance}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.balanceDialog=!1}}},[e._v("取消")]),a("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.getBalance}},[e._v("结欠")])],1)],1),a("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!0,title:"账单总汇",visible:e.billDialog,width:"830px"},on:{"update:visible":function(t){e.billDialog=t}}},[a("dialog-bill",{ref:"billDialog",on:{getPDF:e.receiveBillPDF}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.billDialog=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.getBillPDF}},[e._v("生成PDF")])],1)],1),a("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!0,title:"销售统计",visible:e.soldDialog,width:"830px"},on:{"update:visible":function(t){e.soldDialog=t}}},[a("dialog-sold",{ref:"soldDialog"})],1),a("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!0,title:"支付订单",visible:e.payDialog,width:"400px"},on:{"update:visible":function(t){e.payDialog=t}}},[a("dialog-pay",{ref:"payDialog",on:{pay:e.askPay}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.payDialog=!1}}},[e._v("取消")]),a("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.getPay}},[e._v("支付")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"新增收款",visible:e.incomeDialogVisible,width:"551px"},on:{"update:visible":function(t){e.incomeDialogVisible=t}}},[a("el-form",{ref:"incomeform",attrs:{model:e.incomeform,"label-width":"178px",rules:e.incomerules}},[a("el-form-item",{attrs:{label:"客户名",prop:"customerName"}},[a("el-autocomplete",{staticClass:"form-input",attrs:{size:"mini","fetch-suggestions":e.queryName,maxlength:15,"show-word-limit":"",placeholder:"请选择客户名"},on:{select:e.handleSelect},model:{value:e.incomeform.customerName,callback:function(t){e.$set(e.incomeform,"customerName",t)},expression:"incomeform.customerName"}})],1),a("el-form-item",{attrs:{label:"收款公司",prop:"companyName"}},[a("el-autocomplete",{staticClass:"form-input",attrs:{size:"mini","fetch-suggestions":e.queryCompanyName,placeholder:"请选择公司"},on:{select:e.handleCompanySelect},model:{value:e.incomeform.companyName,callback:function(t){e.$set(e.incomeform,"companyName",t)},expression:"incomeform.companyName"}})],1),a("el-form-item",{attrs:{label:"日期",prop:"createTime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择今日日期时间"},model:{value:e.incomeform.createTime,callback:function(t){e.$set(e.incomeform,"createTime",t)},expression:"incomeform.createTime"}})],1),a("el-form-item",{attrs:{label:"收款金额",prop:"money"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"例如+1000"},model:{value:e.incomeform.money,callback:function(t){e.$set(e.incomeform,"money",t)},expression:"incomeform.money"}})],1),a("el-form-item",{attrs:{label:"资金状态",prop:"accountType"}},[a("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.incomeform.accountType,callback:function(t){e.$set(e.incomeform,"accountType",t)},expression:"incomeform.accountType"}},e._l(e.dict.accountType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入备注内容"},model:{value:e.incomeform.remark,callback:function(t){e.$set(e.incomeform,"remark",t)},expression:"incomeform.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.incomeDialogVisible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.saveIncome}},[e._v("保存")])],1)],1)],1)},i=[],o=(a("7f7f"),a("c5f6"),a("ac6a"),a("7609")),n=a("de9e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-bill",attrs:{id:"billDialog"}},[a("div",{staticClass:"language"},[a("common-selector",{attrs:{width:"70px",placeholder:"请选择语言",options:[{label:"中文版本",value:"CN"},{label:"English",value:"EN"}]},on:{change:e.languageChange}})],1),a("div",{staticClass:"bill-form"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title"},[e._v(e._s(e.labels.customerName))]),a("span",{staticClass:"value"},[e._v(e._s(e.form.name))])]),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title"},[e._v(e._s(e.labels.supplier))]),a("span",{staticClass:"value"},[e._v(e._s(e.form.seller))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title"},[e._v(e._s(e.labels.date))]),"CN"==e.language?a("span",{staticClass:"value"},[e._v(e._s(e.dateFormat(e.form.date,"CN")))]):a("span",{staticClass:"value"},[e._v(e._s(e.dateFormat(e.form.date,"EN")))])])],1)],1),e._l(e.tableList,(function(t,s){return a("div",{key:s,staticClass:"prod-table"},[a("div",{staticClass:"table-area"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"title"},[e._v(e._s(e.labels.soldDate))]),"CN"==e.language?a("span",{staticClass:"value"},[e._v(e._s(e.dateFormat(t.createTime)))]):a("span",{staticClass:"value"},[e._v(e._s(e.dateFormat(t.createTime,"EN")))])])],1),a("div",{staticClass:"table-head"},e._l(e.tableTitles,(function(t,s){return a("div",{key:s,staticClass:"head-item"},[e._v(e._s(t.label))])})),0),e._l(t.details,(function(t,s){return a("div",{key:s,staticClass:"table-list",class:s%2==0?"odd":"double"},[a("div",{staticClass:"list-item"},[e._v("\n                    "+e._s(t.specification)+"\n                ")]),a("div",{staticClass:"list-item"},[e._v("\n                    "+e._s(t.caseNum)+"\n                ")]),a("div",{staticClass:"list-item"},[e._v("\n                    "+e._s(t.goodsTotal)+"\n                ")]),a("div",{staticClass:"list-item"},[e._v("\n                    "+e._s(t.goodsPrice)+"\n                ")]),a("div",{staticClass:"list-item"},[e._v("\n                    "+e._s(t.caseNum*t.goodsTotal*t.goodsPrice||0)+"\n                    ")])])})),a("div",{staticClass:"statistics",class:e.tableList.length>1?"multi":""},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.labels.totalSum))]),a("div",{staticClass:"item-value"},[e._v(e._s(t.price))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.labels.payStatus))]),"CN"==e.language?a("div",{staticClass:"item-value"},[e._v(e._s(e.getDict(t.status,"payStatus")))]):a("div",{staticClass:"item-value"},[e._v(e._s(e.getDict(t.status,"payENStatus")))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.labels.discount))]),a("div",{staticClass:"item-value"},[e._v(e._s(t.discount))])])])],2)])})),e.tableList.length>1?a("div",{staticClass:"total-statistics"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.labels.totalPics))]),a("div",{staticClass:"item-value"},[e._v(e._s(e.totalPics))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.labels.totalBoxes))]),a("div",{staticClass:"item-value"},[e._v(e._s(e.totalBoxes))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.labels.allTotalSum))]),a("div",{staticClass:"item-value"},[e._v(e._s(e.totalValue))])])]):e._e()],2)},l=[],c=a("2ef0"),u=a("f74d"),d={name:"DialogBill",components:{CommonSelector:u["a"]},data:function(){return{language:"CN",totalPics:2200,totalBoxes:2300,totalValue:2800,payStatus:0,form:{name:"",seller:"",date:""},labels:{},tableTitles:[],tableList:[]}},created:function(){this.getDict=o["a"].getDict},methods:{getPDF:function(){var e=Object(c["cloneDeep"])(this.form);e.product=Object(c["cloneDeep"])(this.tableList),this.$emit("getPDF",e)},resetData:function(e){var t=e.res;this.languageChange("CN"),this.form={name:e.name,seller:"",date:e.date},this.totalPics=0,this.totalBoxes=0,this.totalValue=0,console.log(t),this.tableList=t;for(var a=0;a<t.length;a++){var s=t[a];this.totalPics+=Number(s.goodsTotal),this.totalBoxes+=Number(s.caseNum),this.totalValue+=Number(s.price)}},languageChange:function(e){this.language=e,"CN"==e&&(this.tableTitles=[{label:"货品型号"},{label:"箱数"},{label:"件数"},{label:"售价"},{label:"金额"}],this.labels={customerName:"客户名称",date:"账单日期",soldDate:"销售日期",supplier:"销售方",totalSum:"总销售金额",payStatus:"支付状态",totalPics:"总销售件数",totalBoxes:"总销售箱数",allTotalSum:"总销售金额",discount:"折扣"}),"EN"==e&&(this.tableTitles=[{label:"Article Number"},{label:"Box"},{label:"Piece"},{label:"Price"},{label:"Sum"}],this.labels={customerName:"Costumer",date:"Date",soldDate:"Sold Date",supplier:"Supplier",totalSum:"Total Sum",payStatus:"Payment Status",totalPics:"Total Pieces",totalBoxes:"Total Boxes",allTotalSum:"Total Sum",discount:"Discount"})},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CN";return"CN"==t?this.$moment(e).format("YYYY-MM-DD"):"EN"==t?this.$moment(e).format("YYYY/MM/DD"):void 0}}},m=d,f=(a("e4d2"),a("2877")),p=Object(f["a"])(m,r,l,!1,null,"4ecffdd7",null),h=p.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-sold"},[a("div",{staticClass:"date-area"},[a("date-selector",{ref:"dateSelector",on:{change:e.getDateRange}})],1),a("div",{staticClass:"top-switch"},e._l(e.switchs,(function(t,s){return a("div",{key:s,staticClass:"item",class:s==e.selectedSwitch?"selected":"",on:{click:function(t){return e.selectSwitch(s)}}},[e._v(e._s(t.label)+"\n        ")])})),0),a("div",{staticClass:"second-switch"},e._l(e.dateSwitchs,(function(t,s){return a("div",{key:s,staticClass:"item",class:s==e.selectedDateSwitch?"selected":"",on:{click:function(t){return e.selectDateSwitch(s)}}},[e._v(e._s(t.label)+"\n        ")])})),0),a("statistics-pie",{ref:"pieChart",staticClass:"charts",attrs:{height:"325px"}}),a("div",{staticClass:"bottom-value"},[a("div",{staticClass:"title"},[e._v("总汇:")]),a("div",{staticClass:"items"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[e._v("客户名")]),a("span",{staticClass:"item-content"},[e._v(e._s(e.total.name))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[e._v("总销售金额")]),a("span",{staticClass:"item-content"},[e._v(e._s(e.total.value))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[e._v("总销售件数")]),a("span",{staticClass:"item-content"},[e._v(e._s(e.total.pics))])]),a("div",{staticClass:"item"},[a("span",{staticClass:"item-title"},[e._v("总销售箱数")]),a("span",{staticClass:"item-content"},[e._v(e._s(e.total.boxes))])])])])])],1)},v=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pie-chart-box"},[a("div",{staticClass:"pie-chart",style:"height:"+e.height,attrs:{id:"pie-chart"}})])},y=[],C=a("3eba");a("c037"),a("007d"),a("627c"),a("d28f");var _={name:"StatisticsPie",props:{height:{type:String,default:"213px"},width:{type:String,default:"213px"}},data:function(){return{chart:null}},mounted:function(){this.initCharts()},methods:{initCharts:function(){var e=null;if(!this.chart){var t=this.$el.querySelector(".pie-chart");e=C.init(t);var a={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"plain",orient:"vertical",right:10,top:80,bottom:20,data:[]},series:[{name:"",type:"pie",radius:"106px",center:["30%","50%"],data:[],animation:!1,hoverAnimation:!1,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#8DCBAE","#5BE7C7","#374E5D","#D78D73","#C63D3C","#78A98A","#8776D7","#E75BDB","#EDCACF","#FFCB51","#62C0B6","#B5F687"]};e.setOption(a),this.chart=e}},setData:function(e){this.chart.setOption(e)}}},w=_,D=(a("f2c4"),Object(f["a"])(w,b,y,!1,null,"a1cc6364",null)),x=D.exports,S=a("d0c2"),N=a("365c"),T={name:"DialogSold",components:{StatisticsPie:x,DateSelector:S["a"]},data:function(){return{attrType:0,dateType:0,date:"",id:"",selectedSwitch:0,switchs:[{label:"特色统计"},{label:"销售统计"}],selectedDateSwitch:0,dateSwitchs:[{label:"周"},{label:"月"},{label:"季"},{label:"年"}],total:{name:"",value:"",pics:"",boxes:""}}},created:function(){this.getDict=o["a"].getDict},mounted:function(){},methods:{setId:function(e){this.id=e,this.resetData()},setName:function(e){this.total.name=e},resetData:function(){var e=this;this.attrType=0,this.dateType=0,this.date="",this.selectedSwitch=0,this.selectedDateSwitch=0,this.total={name:"",value:"",pics:"",boxes:""},this.$nextTick((function(){e.$refs.dateSelector.resetDate()}))},getData:function(){var e=this,t={type:this.dateType,STime:this.date||this.$moment().format("YYYY-MM-DD"),id:this.id};Object(N["t"])(t).then((function(t){for(var a=t.label,s=t.sale,i=t.sum,o=0;o<s.length;o++){var n=s[o];n.caseNum=n.CASENUM,n.price=n.PRICE;var r=0==e.dateType?"周":1==e.dateType?"月":2==e.dateType?"季":3==e.dateType?"年":"";n.label=n.days+r}var l=[];0==e.attrType&&(l=a),1==e.attrType&&(l=s),e.total.value=i.PRICE,e.total.pics=i.GOODSTOTAL,e.total.boxes=i.CASENUM,e.setChartData(l)}))},selectSwitch:function(e){this.selectedSwitch=e,this.topSwitchHandle(e)},selectDateSwitch:function(e){this.selectedDateSwitch=e,this.timeSwitchHandle(e)},topSwitchHandle:function(e){this.attrType=e,this.getData()},timeSwitchHandle:function(e){this.dateType=e,this.getData()},getDateRange:function(e){e&&(this.date=this.$moment(e).format("YYYY-MM-DD"),this.getData())},setChartData:function(e){for(var t=[],a=Object(c["cloneDeep"])(e),s=0;s<e.length;s++){var i=e[s];t.push(i.label),a[s].name=i.label,a[s].value=i.caseNum}var o=[];if(t.length<6)o={data:t,orient:"vertical",right:250,top:80,bottom:20,formatter:function(e){var s=0,i=t;return i.forEach((function(t,a){t==e&&(s=a)})),e+" "+a[s].caseNum+"箱  "+a[s].price}};else for(var n=Math.ceil(t.length/6),r=n;r>0;r--)o.push({orient:"vertical",top:80,bottom:20,right:152*(r-1)+"px",data:t.slice(6*(n-r),6*(n-r+1)),formatter:function(e){var s=0,i=t;return i.forEach((function(t,a){t==e&&(s=a)})),e+" "+a[s].caseNum+"箱  "+a[s].price}});console.log(o);var l={legend:o,series:[{label:{formatter:function(e){var t=e.data;return t.name+"-"+t.value+"箱 "}},data:a}]};this.$refs.pieChart.setData(l)}}},k=T,I=(a("53d6"),Object(f["a"])(k,g,v,!1,null,"4d5cf304",null)),P=I.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"结欠金额",prop:"amount"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1)],1)],1)},$=[],L={name:"DialogBalance",components:{},data:function(){return{dict:{},form:{amount:0},rules:{amount:[{required:!0,message:"请输入",trigger:"change"}]}}},created:function(){this.dict=o["a"]},methods:{sendData:function(){this.$emit("balance",this.form)},resetData:function(e){var t=this;this.form.amount=e,this.$nextTick((function(){t.$refs.form.clearValidate()}))}}},M=L,R=(a("ba33"),Object(f["a"])(M,A,$,!1,null,"12ec0a53",null)),O=R.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"支付金额",prop:"amount"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",disabled:"",placeholder:"请输入"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1),a("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[a("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.form.payType,callback:function(t){e.$set(e.form,"payType",t)},expression:"form.payType"}},e._l(e.dict.accountType,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1)},z=[],B={name:"DialogPay",components:{},data:function(){return{id:"",dict:{},form:{amount:0,payType:""},rules:{amount:[{required:!0,message:"请输入",trigger:"change"}],payType:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.dict=o["a"]},methods:{sendData:function(){var e={orderId:this.id,money:this.form.amount,payType:this.form.payType,ossFilePathName:"",pic:""};this.$emit("pay",e)},setId:function(e){this.id=e},resetData:function(e){var t=this;this.id=e.id,this.form={amount:e.price,payType:""},this.$nextTick((function(){t.$refs.form.clearValidate()}))}}},j=B,V=(a("b77c"),Object(f["a"])(j,E,z,!1,null,"92784920",null)),Y=V.exports,F=a("7dba"),G={name:"CustomerInfoDetail",components:{DialogNewOrder:n["a"],DialogBill:h,DialogSold:P,DialogBalance:O,DialogPay:Y},data:function(){return{id:"",status:"",dict:{},newOrderDialog:!1,billDialog:!1,balanceDialog:!1,incomeDialogVisible:!1,soldDialog:!1,payDialog:!1,page:{no:1,total:0,size:10},comInfo:{},tableData:[],deptTableData:[],receiveTableData:[],selectedRecord:[],incomeform:{},incomerules:{customerName:[{required:!0,message:"请输入客户名",trigger:"change"}],companyName:[{required:!0,message:"请选择公司",trigger:"change"}],createTime:[{required:!0,message:"请输入日期",trigger:"change"}],money:[{required:!0,message:"请输入",trigger:"change"}]},searchAdvice:[],searchCompanyAdvice:[]}},created:function(){this.getDict=o["a"].getDict,this.dict=o["a"];var e=this.$route.params.data;this.id=e.id,this.comInfo={id:e.id,memberName:e.memberName,address:e.address,mobile:e.mobile,bank:e.bank,arrears:e.arrears,appName:e.appName,remarks:e.remarks,level:e.level,status:e.status},this.getData()},methods:{getData:function(){var e=this;if(this.id){var t={pageSize:this.page.size,page:this.page.no,customerId:this.id,status:this.status};Object(N["O"])(t).then((function(t){if(t.list){var a=t.list;e.tableData=a.records,e.page.total=a.total,e.page.no=a.current}if(t.arrears){var s=t.arrears;e.deptTableData=[s]}if(t.pay){for(var i=[],o=t.pay,n=0;n<e.dict.accountType.length;n++){var r=e.dict.accountType[n];for(var l in o){var c=o[l];l==r.value&&i.push({date:"",payWay:r.label,value:c})}}e.receiveTableData=i}}))}},basePageChange:function(e){this.$set(this.page,"no",e),this.getData()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getData()},save:function(){this.$refs.newOrderDialogRef.saveSubmit()},saveSubmit:function(e){var t=this;e.process=0,Object(N["r"])(e).then((function(e){t.$message.success("操作成功"),t.newOrderDialog=!1,t.getData()}))},soldRecordChange:function(e){this.selectedRecord=e},getBalance:function(){this.$refs.balanceDialogRef.sendData()},askBalance:function(e){for(var t=this,a=[],s=0;s<this.selectedRecord.length;s++){var i=this.selectedRecord[s];a.push(i.id)}var o={customerId:this.id,ids:a,price:e.amount,accountType:e.accountType};Object(N["ib"])(o).then((function(e){t.balanceDialog=!1,t.$message.success("结欠成功"),t.selectedRecord=[],t.getData()}))},getPay:function(){this.$refs.payDialog.sendData()},askPay:function(e){var t=this;Object(N["fb"])(e).then((function(e){t.payDialog=!1,t.$message.success("支付成功"),t.getData()}))},getBillPDF:function(){this.$refs.billDialog.getPDF()},receiveBillPDF:function(){Object(F["a"])("#billDialog","账单总汇")},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CN";return"CN"==t?this.$moment(e).format("YYYY.MM.DD"):"EN"==t?this.$moment(e).format("YYYY/MM/DD"):void 0},showDialog:function(e,t){var a=this;if("balance"==e){if(!this.selectedRecord.length)return void this.$message.warning("请选择需要结欠的销售记录");for(var s=0;s<this.selectedRecord.length;s++){var i=this.selectedRecord[s];if(0==i.process||1==i.process)return void this.$message.warning("需要通过审核才能进行结欠")}this.balanceDialog=!0,this.$nextTick((function(){a.$refs.balanceDialogRef.resetData(a.comInfo.arrears)}))}if("bill"==e){if(!this.selectedRecord.length)return void this.$message.warning("请选择需要汇总的销售记录");for(var o=[],n=0;n<this.selectedRecord.length;n++){var r=this.selectedRecord[n];o.push(r.id)}Object(N["jb"])(o).then((function(e){var t={name:a.comInfo.memberName,date:a.$moment().format("YYYY-MM-DD"),res:e.order};a.billDialog=!0,a.$nextTick((function(){a.$refs.billDialog.resetData(t)}))}))}"pay"==e&&(this.payDialog=!0,this.$nextTick((function(){a.$refs.payDialog.resetData(t)}))),"sold"==e&&(this.soldDialog=!0,this.$nextTick((function(){a.$refs.soldDialog.setId(a.id),a.$refs.soldDialog.setName(a.comInfo.memberName),a.$refs.soldDialog.getData()}))),"new"==e&&(this.newOrderDialog=!0,this.$nextTick((function(){a.$refs.newOrderDialogRef.resetData({customerName:a.comInfo.memberName,customerId:a.id},!1),a.$refs.newOrderDialogRef.setName(a.comInfo.memberName)}))),"edit"==e&&Object(N["eb"])({id:t}).then((function(e){var t=e.details,s=e.id,i=e.customerId,o=e.customerName,n=e.customerAddress,r=e.transportName,l=e.payType,c=e.monetaryUnit,u=e.discount,d=e.exchangeRate,m=e.taxRate,f=(e.createTime,e.status);t.forEach((function(e){e.isTail=1==e.isTail})),a.newOrderDialog=!0;var p={id:s,customerId:i,customerName:o,customerAddress:n,transportName:r,payType:Number(l),monetaryUnit:c,discount:u,exchangeRate:d,taxRate:100*m,status:Number(f)},h=t;a.$nextTick((function(){var e={form:p,goodsList:h};a.$refs.newOrderDialogRef.editData(e),a.$refs.newOrderDialogRef.setName(o)}))})),"receive"==e&&this.addIncomeReady()},addIncomeReady:function(){var e=this;this.incomeform={companyId:"",companyName:"",customerName:this.comInfo.memberName,customerId:this.comInfo.id,createTime:"",money:"",remark:"",accountType:""},this.incomeDialogVisible=!0,this.$nextTick((function(){e.$refs.incomeform.clearValidate()}))},saveIncome:function(){var e=this,t=Object(c["cloneDeep"])(this.incomeform);t.money<0?t.bookType=0:t.bookType=1,t.money=Math.abs(t.money);for(var a=0;a<this.searchAdvice.length;a++){var s=this.searchAdvice[a];t.customerName==s.memberName&&(t.customerId=s.id)}for(var i=0;i<this.searchCompanyAdvice.length;i++){var o=this.searchCompanyAdvice[i];t.companyName==o.name&&(t.companyId=o.id)}this.$refs.incomeform.validate((function(a){a&&Object(N["a"])(t).then((function(t){t&&(e.$message.success({message:"新增成功"}),e.incomeDialogVisible=!1)}))}))},queryName:function(e,t){var a=this;Object(N["ob"])({level:"",status:"",page:1,pageSize:5,userName:e}).then((function(e){for(var s=[],i=0;i<e.records.length;i++){var o=e.records[i];s.push({value:o.memberName,id:o.id,memberName:o.memberName})}a.searchAdvice=s,t(s)}))},handleSelect:function(e){this.incomeform.customerId=e.id},queryCompanyName:function(e,t){var a=this,s={pageSize:5,page:1,name:e};Object(N["H"])(s).then((function(e){for(var s=[],i=0;i<e.records.length;i++){var o=e.records[i];o.value=o.name,s.push(o)}a.searchCompanyAdvice=s,t(s)}))},handleCompanySelect:function(e){this.incomeform.companyName=e.name,this.incomeform.companyId=e.id}}},q=G,H=(a("fa7f"),Object(f["a"])(q,s,i,!1,null,"60229365",null));t["default"]=H.exports},"903c":function(e,t,a){"use strict";function s(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var a=0;a<t.length;a++)if(!t[a].isSelected(e.name))return!1;return!0}))}t.__esModule=!0,t["default"]=s},"9dcd":function(e,t,a){var s;(function(i){"use strict";var o,n=20,r=1,l=1e6,c=1e6,u=-7,d=21,m=!1,f="[big.js] ",p=f+"Invalid ",h=p+"decimal places",g=p+"rounding mode",v=f+"Division by zero",b={},y=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function _(){function e(t){var a=this;if(!(a instanceof e))return t===y?_():new e(t);if(t instanceof e)a.s=t.s,a.e=t.e,a.c=t.c.slice();else{if("string"!==typeof t){if(!0===e.strict)throw TypeError(p+"number");t=0===t&&1/t<0?"-0":String(t)}w(a,t)}a.constructor=e}return e.prototype=b,e.DP=n,e.RM=r,e.NE=u,e.PE=d,e.strict=m,e}function w(e,t){var a,s,i;if(!C.test(t))throw Error(p+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),i=t.length,s=0;s<i&&"0"==t.charAt(s);)++s;if(s==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=a-s-1,e.c=[],a=0;s<=i;)e.c[a++]=+t.charAt(s++)}return e}function D(e,t,a,s){var i=e.c;if(a===y&&(a=o.RM),0!==a&&1!==a&&2!==a&&3!==a)throw Error(g);if(t<1)s=3===a&&(s||!!i[0])||0===t&&(1===a&&i[0]>=5||2===a&&(i[0]>5||5===i[0]&&(s||i[1]!==y))),i.length=1,s?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(s=1===a&&i[t]>=5||2===a&&(i[t]>5||5===i[t]&&(s||i[t+1]!==y||1&i[t-1]))||3===a&&(s||!!i[0]),i.length=t--,s)for(;++i[t]>9;)i[t]=0,t--||(++e.e,i.unshift(1));for(t=i.length;!i[--t];)i.pop()}return e}function x(e,t,a){var s=e.e,i=e.c.join(""),o=i.length;if(t)i=i.charAt(0)+(o>1?"."+i.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)i="0"+i;i="0."+i}else if(s>0)if(++s>o)for(s-=o;s--;)i+="0";else s<o&&(i=i.slice(0,s)+"."+i.slice(s));else o>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&a?"-"+i:i}b.abs=function(){var e=new this.constructor(this);return e.s=1,e},b.cmp=function(e){var t,a=this,s=a.c,i=(e=new a.constructor(e)).c,o=a.s,n=e.s,r=a.e,l=e.e;if(!s[0]||!i[0])return s[0]?o:i[0]?-n:0;if(o!=n)return o;if(t=o<0,r!=l)return r>l^t?1:-1;for(n=(r=s.length)<(l=i.length)?r:l,o=-1;++o<n;)if(s[o]!=i[o])return s[o]>i[o]^t?1:-1;return r==l?0:r>l^t?1:-1},b.div=function(e){var t=this,a=t.constructor,s=t.c,i=(e=new a(e)).c,o=t.s==e.s?1:-1,n=a.DP;if(n!==~~n||n<0||n>l)throw Error(h);if(!i[0])throw Error(v);if(!s[0])return e.s=o,e.c=[e.e=0],e;var r,c,u,d,m,f=i.slice(),p=r=i.length,g=s.length,b=s.slice(0,r),C=b.length,_=e,w=_.c=[],x=0,S=n+(_.e=t.e-e.e)+1;for(_.s=o,o=S<0?0:S,f.unshift(0);C++<r;)b.push(0);do{for(u=0;u<10;u++){if(r!=(C=b.length))d=r>C?1:-1;else for(m=-1,d=0;++m<r;)if(i[m]!=b[m]){d=i[m]>b[m]?1:-1;break}if(!(d<0))break;for(c=C==r?i:f;C;){if(b[--C]<c[C]){for(m=C;m&&!b[--m];)b[m]=9;--b[m],b[C]+=10}b[C]-=c[C]}for(;!b[0];)b.shift()}w[x++]=d?u:++u,b[0]&&d?b[C]=s[p]||0:b=[s[p]]}while((p++<g||b[0]!==y)&&o--);return w[0]||1==x||(w.shift(),_.e--,S--),x>S&&D(_,S,a.RM,b[0]!==y),_},b.eq=function(e){return 0===this.cmp(e)},b.gt=function(e){return this.cmp(e)>0},b.gte=function(e){return this.cmp(e)>-1},b.lt=function(e){return this.cmp(e)<0},b.lte=function(e){return this.cmp(e)<1},b.minus=b.sub=function(e){var t,a,s,i,o=this,n=o.constructor,r=o.s,l=(e=new n(e)).s;if(r!=l)return e.s=-l,o.plus(e);var c=o.c.slice(),u=o.e,d=e.c,m=e.e;if(!c[0]||!d[0])return d[0]?e.s=-l:c[0]?e=new n(o):e.s=1,e;if(r=u-m){for((i=r<0)?(r=-r,s=c):(m=u,s=d),s.reverse(),l=r;l--;)s.push(0);s.reverse()}else for(a=((i=c.length<d.length)?c:d).length,r=l=0;l<a;l++)if(c[l]!=d[l]){i=c[l]<d[l];break}if(i&&(s=c,c=d,d=s,e.s=-e.s),(l=(a=d.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;a>r;){if(c[--a]<d[a]){for(t=a;t&&!c[--t];)c[t]=9;--c[t],c[a]+=10}c[a]-=d[a]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--m;return c[0]||(e.s=1,c=[m=0]),e.c=c,e.e=m,e},b.mod=function(e){var t,a=this,s=a.constructor,i=a.s,o=(e=new s(e)).s;if(!e.c[0])throw Error(v);return a.s=e.s=1,t=1==e.cmp(a),a.s=i,e.s=o,t?new s(a):(i=s.DP,o=s.RM,s.DP=s.RM=0,a=a.div(e),s.DP=i,s.RM=o,this.minus(a.times(e)))},b.plus=b.add=function(e){var t,a,s,i=this,o=i.constructor;if(e=new o(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var n=i.e,r=i.c,l=e.e,c=e.c;if(!r[0]||!c[0])return c[0]||(r[0]?e=new o(i):e.s=i.s),e;if(r=r.slice(),t=n-l){for(t>0?(l=n,s=c):(t=-t,s=r),s.reverse();t--;)s.push(0);s.reverse()}for(r.length-c.length<0&&(s=c,c=r,r=s),t=c.length,a=0;t;r[t]%=10)a=(r[--t]=r[t]+c[t]+a)/10|0;for(a&&(r.unshift(a),++l),t=r.length;0===r[--t];)r.pop();return e.c=r,e.e=l,e},b.pow=function(e){var t=this,a=new t.constructor("1"),s=a,i=e<0;if(e!==~~e||e<-c||e>c)throw Error(p+"exponent");for(i&&(e=-e);;){if(1&e&&(s=s.times(t)),e>>=1,!e)break;t=t.times(t)}return i?a.div(s):s},b.prec=function(e,t){if(e!==~~e||e<1||e>l)throw Error(p+"precision");return D(new this.constructor(this),e,t)},b.round=function(e,t){if(e===y)e=0;else if(e!==~~e||e<-l||e>l)throw Error(h);return D(new this.constructor(this),e+this.e+1,t)},b.sqrt=function(){var e,t,a,s=this,i=s.constructor,o=s.s,n=s.e,r=new i("0.5");if(!s.c[0])return new i(s);if(o<0)throw Error(f+"No square root");o=Math.sqrt(s+""),0===o||o===1/0?(t=s.c.join(""),t.length+n&1||(t+="0"),o=Math.sqrt(t),n=((n+1)/2|0)-(n<0||1&n),e=new i((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+n)):e=new i(o+""),n=e.e+(i.DP+=4);do{a=e,e=r.times(a.plus(s.div(a)))}while(a.c.slice(0,n).join("")!==e.c.slice(0,n).join(""));return D(e,(i.DP-=4)+e.e+1,i.RM)},b.times=b.mul=function(e){var t,a=this,s=a.constructor,i=a.c,o=(e=new s(e)).c,n=i.length,r=o.length,l=a.e,c=e.e;if(e.s=a.s==e.s?1:-1,!i[0]||!o[0])return e.c=[e.e=0],e;for(e.e=l+c,n<r&&(t=i,i=o,o=t,c=n,n=r,r=c),t=new Array(c=n+r);c--;)t[c]=0;for(l=r;l--;){for(r=0,c=n+l;c>l;)r=t[c]+o[l]*i[c-l-1]+r,t[c--]=r%10,r=r/10|0;t[c]=r}for(r?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},b.toExponential=function(e,t){var a=this,s=a.c[0];if(e!==y){if(e!==~~e||e<0||e>l)throw Error(h);for(a=D(new a.constructor(a),++e,t);a.c.length<e;)a.c.push(0)}return x(a,!0,!!s)},b.toFixed=function(e,t){var a=this,s=a.c[0];if(e!==y){if(e!==~~e||e<0||e>l)throw Error(h);for(a=D(new a.constructor(a),e+a.e+1,t),e=e+a.e+1;a.c.length<e;)a.c.push(0)}return x(a,!1,!!s)},b.toJSON=b.toString=function(){var e=this,t=e.constructor;return x(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},b.toNumber=function(){var e=Number(x(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(f+"Imprecise conversion");return e},b.toPrecision=function(e,t){var a=this,s=a.constructor,i=a.c[0];if(e!==y){if(e!==~~e||e<1||e>l)throw Error(p+"precision");for(a=D(new s(a),e,t);a.c.length<e;)a.c.push(0)}return x(a,e<=a.e||a.e<=s.NE||a.e>=s.PE,!!i)},b.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(f+"valueOf disallowed");return x(e,e.e<=t.NE||e.e>=t.PE,!0)},o=_(),o["default"]=o.Big=o,s=function(){return o}.call(t,a,t,e),void 0===s||(e.exports=s)})()},a578:function(e,t,a){},aec4:function(e,t,a){},b77c:function(e,t,a){"use strict";var s=a("04bf"),i=a.n(s);i.a},ba33:function(e,t,a){"use strict";var s=a("6f29"),i=a.n(s);i.a},bb70:function(e,t,a){"use strict";t.__esModule=!0;var s=a("3842"),i=a("2306"),o=a("6d8b"),n=a("89b6"),r=a("2355"),l=Math.PI/180;function c(e,t,a,s,i,o,n,l,c,u){if(!(e.length<2)){for(var d=e.length,m=0;m<d;m++)if("outer"===e[m].position&&"labelLine"===e[m].labelAlignTo){var f=e[m].label.x-u;e[m].linePoints[1][0]+=f,e[m].label.x=u}r.shiftLayoutOnY(e,c,c+n)&&h(e)}function p(e){for(var o=e.rB,n=o*o,r=0;r<e.list.length;r++){var l=e.list[r],c=Math.abs(l.label.y-a),u=s+l.len,d=u*u,m=Math.sqrt((1-Math.abs(c*c/n))*d);l.label.x=t+(m+l.len2)*i}}function h(e){for(var o={list:[],maxY:0},n={list:[],maxY:0},r=0;r<e.length;r++)if("none"===e[r].labelAlignTo){var l=e[r],c=l.label.y>a?n:o,u=Math.abs(l.label.y-a);if(u>c.maxY){var d=l.label.x-t-l.len2*i,m=s+l.len,f=d<m?Math.sqrt(u*u/(1-d*d/m/m)):m;c.rB=f,c.maxY=u}c.list.push(l)}p(o),p(n)}}function u(e,t,a,s,i,o,n,r){for(var l=[],u=[],m=Number.MAX_VALUE,f=-Number.MAX_VALUE,p=0;p<e.length;p++){var h=e[p].label;d(e[p])||(h.x<t?(m=Math.min(m,h.x),l.push(e[p])):(f=Math.max(f,h.x),u.push(e[p])))}c(u,t,a,s,1,i,o,n,r,f),c(l,t,a,s,-1,i,o,n,r,m);for(p=0;p<e.length;p++){var g=e[p];h=g.label;if(!d(g)){var v=g.linePoints;if(v){var b="edge"===g.labelAlignTo,y=g.rect.width,C=void 0;C=b?h.x<t?v[2][0]-g.labelDistance-n-g.edgeDistance:n+i-g.edgeDistance-v[2][0]-g.labelDistance:h.x<t?h.x-n-g.bleedMargin:n+i-h.x-g.bleedMargin,C<g.rect.width&&(g.label.style.width=C,"edge"===g.labelAlignTo&&(y=C));var _=v[1][0]-v[2][0];b?h.x<t?v[2][0]=n+g.edgeDistance+y+g.labelDistance:v[2][0]=n+i-g.edgeDistance-y-g.labelDistance:(h.x<t?v[2][0]=h.x+g.labelDistance:v[2][0]=h.x-g.labelDistance,v[1][0]=v[2][0]+_),v[1][1]=v[2][1]=h.y}}}}function d(e){return"center"===e.position}function m(e){var t,a,r=e.getData(),c=[],d=!1,m=(e.get("minShowLabelAngle")||0)*l,f=r.getLayout("viewRect"),p=r.getLayout("r"),h=f.width,g=f.x,v=f.y,b=f.height;function y(e){e.ignore=!0}function C(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}r.each((function(e){var n=r.getItemGraphicEl(e),l=n.shape,u=n.getTextContent(),f=n.getTextGuideLine(),v=r.getItemModel(e),b=v.getModel("label"),_=b.get("position")||v.get(["emphasis","label","position"]),w=b.get("distanceToLabelLine"),D=b.get("alignTo"),x=s.parsePercent(b.get("edgeDistance"),h),S=b.get("bleedMargin"),N=v.getModel("labelLine"),T=N.get("length");T=s.parsePercent(T,h);var k=N.get("length2");if(k=s.parsePercent(k,h),Math.abs(l.endAngle-l.startAngle)<m)return o.each(u.states,y),void(u.ignore=!0);if(C(u)){var I,P,A,$,L=(l.startAngle+l.endAngle)/2,M=Math.cos(L),R=Math.sin(L);t=l.cx,a=l.cy;var O,E="inside"===_||"inner"===_;if("center"===_)I=l.cx,P=l.cy,$="center";else{var z=(E?(l.r+l.r0)/2*M:l.r*M)+t,B=(E?(l.r+l.r0)/2*R:l.r*R)+a;if(I=z+3*M,P=B+3*R,!E){var j=z+M*(T+p-l.r),V=B+R*(T+p-l.r),Y=j+(M<0?-1:1)*k,F=V;I="edge"===D?M<0?g+x:g+h-x:Y+(M<0?-w:w),P=F,A=[[z,B],[j,V],[Y,F]]}$=E?"center":"edge"===D?M>0?"right":"left":M>0?"left":"right"}var G=b.get("rotate");if(O="number"===typeof G?G*(Math.PI/180):G?M<0?-L+Math.PI:-L:0,d=!!O,u.x=I,u.y=P,u.rotation=O,u.setStyle({verticalAlign:"middle"}),E){u.setStyle({align:$});var q=u.states.select;q&&(q.x+=u.x,q.y+=u.y)}else{var H=u.getBoundingRect().clone();H.applyTransform(u.getComputedTransform());var U=(u.style.margin||0)+2.1;H.y-=U/2,H.height+=U,c.push({label:u,labelLine:f,position:_,len:T,len2:k,minTurnAngle:N.get("minTurnAngle"),maxSurfaceAngle:N.get("maxSurfaceAngle"),surfaceNormal:new i.Point(M,R),linePoints:A,textAlign:$,labelDistance:w,labelAlignTo:D,edgeDistance:x,bleedMargin:S,rect:H})}n.setTextConfig({inside:E})}})),!d&&e.get("avoidLabelOverlap")&&u(c,t,a,p,h,b,g,v);for(var _=0;_<c.length;_++){var w=c[_],D=w.label,x=w.labelLine,S=isNaN(D.x)||isNaN(D.y);if(D){D.setStyle({align:w.textAlign}),S&&(o.each(D.states,y),D.ignore=!0);var N=D.states.select;N&&(N.x+=D.x,N.y+=D.y)}if(x){var T=w.linePoints;S||!T?(o.each(x.states,y),x.ignore=!0):(n.limitTurnAngle(T,w.minTurnAngle),n.limitSurfaceAngle(T,w.surfaceNormal,w.maxSurfaceAngle),x.setShape({points:T}),D.__hostTarget.textGuideLineConfig={anchor:new i.Point(T[0][0],T[0][1])})}}}t["default"]=m},c027:function(e,t,a){},c037:function(e,t,a){"use strict";t.__esModule=!0;var s=a("3eba"),i=a("6d8b");a("f7c6"),a("1ab3");var o=a("f3bb"),n=a("292e"),r=a("d3f47");o.createLegacyDataSelectAction("pie",s.registerAction),s.registerLayout(i.curry(n["default"],"pie")),s.registerProcessor(r["default"]("pie"))},c2db:function(e,t,a){"use strict";var s=a("7ea1"),i=a.n(s);i.a},c4a3:function(e,t,a){"use strict";t.__esModule=!0;var s=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},e.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},e.prototype.getItemVisual=function(e,t){var a=this._getDataWithEncodedVisual();return a.getItemVisual(e,t)},e}();t["default"]=s},cc8a:function(e,t,a){},d28f:function(e,t,a){"use strict";t.__esModule=!0;var s=a("3eba");a("84d5"),a("4650"),a("5e97");var i=a("903c"),o=a("6cb7");s.registerProcessor(s.PRIORITY.PROCESSOR.SERIES_FILTER,i["default"]),o["default"].registerSubTypeDefaulter("legend",(function(){return"plain"}))},d32f:function(e,t,a){"use strict";t.__esModule=!0;var s=a("6d8b"),i=a("e86a");function o(e,t){var a=e.get("borderRadius");return null==a?null:(s.isArray(a)||(a=[a,a]),{innerCornerRadius:i.parsePercent(a[0],t.r0),cornerRadius:i.parsePercent(a[1],t.r)})}t.getSectorCornerRadius=o},d3f47:function(e,t,a){"use strict";function s(e){return{seriesType:e,reset:function(e,t){var a=t.findComponents({mainType:"legend"});if(a&&a.length){var s=e.getData();s.filterSelf((function(e){for(var t=s.getName(e),i=0;i<a.length;i++)if(!a[i].isSelected(t))return!1;return!0}))}}}}t.__esModule=!0,t["default"]=s},de9e:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",inline:!0}},[a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("客户")]),a("customer-name-selector",{ref:"nameSelector",staticStyle:{"margin-right":"90px"},attrs:{width:"200px",disabled:e.lockCustomer},on:{selectData:e.handleSelect}})],1),a("el-form-item",{attrs:{label:"地址",prop:"customerAddress"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.customerAddress,callback:function(t){e.$set(e.form,"customerAddress",t)},expression:"form.customerAddress"}})],1),a("el-form-item",{attrs:{label:"托运部",prop:"transportName"}},[a("el-autocomplete",{staticClass:"form-input",attrs:{size:"mini","fetch-suggestions":e.queryTransport,placeholder:"请输入"},model:{value:e.form.transportName,callback:function(t){e.$set(e.form,"transportName",t)},expression:"form.transportName"}})],1),a("el-form-item",{attrs:{label:"公司",prop:"companyName"}},[a("el-autocomplete",{staticClass:"form-input",attrs:{size:"mini","fetch-suggestions":e.queryCompany,placeholder:"请输入"},on:{select:e.handleSelectCompany},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1),a("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[a("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.form.payType,callback:function(t){e.$set(e.form,"payType",t)},expression:"form.payType"}},e._l(e.accountType,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"货币",prop:"monetaryUnit"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.monetaryUnit,callback:function(t){e.$set(e.form,"monetaryUnit",t)},expression:"form.monetaryUnit"}})],1),a("el-form-item",{attrs:{label:"折扣",prop:"discount"}},[a("el-input",{staticClass:"form-input",attrs:{max:1,size:"mini",placeholder:"请输入折扣金额"},model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}})],1),a("el-form-item",{attrs:{label:"税率",prop:"taxRate"}},[a("el-input",{staticClass:"form-input",attrs:{max:1,size:"mini",placeholder:"例如输入14即为14%"},model:{value:e.form.taxRate,callback:function(t){e.$set(e.form,"taxRate",t)},expression:"form.taxRate"}})],1),a("el-form-item",{attrs:{label:"支付状态",prop:"status"}},[a("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.payStatus,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1)],1),a("div",{staticClass:"prod-table"},[a("div",{staticClass:"label"},[e._v("产品")]),a("div",{staticClass:"table-area"},[a("div",{staticClass:"table-head"},e._l(e.tableTitles,(function(t,s){return a("div",{key:s,staticClass:"head-item",class:"型号"==t.label?"code":""},[e._v(e._s(t.label))])})),0),e._l(e.goodsList,(function(t,s){return a("div",{key:s,staticClass:"table-list"},[a("div",{staticClass:"list-item code"},[a("el-autocomplete",{attrs:{size:"mini","fetch-suggestions":e.queryProduct,placeholder:"请输入产品名"},on:{select:function(t){e.handleProductSelect(t,s)}},model:{value:t.specification,callback:function(a){e.$set(t,"specification",a)},expression:"list.specification"}})],1),a("div",{staticClass:"list-item"},[a("el-input",{attrs:{size:"mini"},on:{change:function(a){return e.changaItem(a,t,s,"caseNum")}},model:{value:t.caseNum,callback:function(a){e.$set(t,"caseNum",a)},expression:"list.caseNum"}})],1),a("div",{staticClass:"list-item"},[a("el-input",{attrs:{size:"mini"},on:{change:function(a){return e.changaItem(a,t,s,"goodsTotal")}},model:{value:t.goodsTotal,callback:function(a){e.$set(t,"goodsTotal",a)},expression:"list.goodsTotal"}})],1),a("div",{staticClass:"list-item"},[a("el-input",{attrs:{size:"mini"},on:{change:function(a){return e.changaItem(a,t,s,"goodsPrice")}},model:{value:t.goodsPrice,callback:function(a){e.$set(t,"goodsPrice",a)},expression:"list.goodsPrice"}})],1),a("div",{staticClass:"list-item"},[a("span",{staticClass:"my-checkbox",on:{click:function(a){return e.changaItem(!0,t,s,"isTail")}}},[t.isTail?a("i",{staticClass:"el-icon-check",on:{click:function(a){return a.stopPropagation(),function(a){return e.changaItem(!1,t,s,"isTail")}()}}}):e._e(),t.isTail?e._e():a("i",{staticClass:"el-icon-check",staticStyle:{opacity:"0"}})])]),a("div",{staticClass:"list-item"},[e._v("\n                    "+e._s(t.stock)+"\n                ")]),a("div",{staticClass:"list-item"},[e._v("\n                    "+e._s(t.caseNum*t.goodsTotal*t.goodsPrice||0)+"\n                ")]),a("div",{staticClass:"del-btn",on:{click:function(t){return e.delList(s)}}},[a("el-button",{attrs:{type:"text",icon:"el-icon-close"}})],1)])})),a("div",{staticClass:"add-btn",on:{click:e.addList}},[a("span",{staticClass:"plus"},[e._v("+")]),a("el-button",{attrs:{type:"text"}},[e._v("添加产品")])],1)],2),a("div",{staticClass:"count"},[a("span",{staticClass:"count-label"},[e._v("总销售金额：")]),a("span",{staticClass:"value"},[e._v(e._s(e.getTotal("total")))]),a("span",{staticClass:"count-label"},[e._v("总箱数：")]),a("span",{staticClass:"value"},[e._v(e._s(e.getTotal("caseNum")))]),a("span",{staticClass:"count-label"},[e._v("折扣金额：")]),a("span",{staticClass:"value"},[e._v(e._s(e.getTotal("discount")))]),a("span",{staticClass:"count-label"},[e._v("税后金额：")]),a("span",{staticClass:"value"},[e._v(e._s(e.getTotal("tax")))])])])],1)},i=[],o=(a("c5f6"),a("7f7f"),a("ac6a"),a("2ef0")),n=a("7609"),r=a("365c"),l=a("6a47"),c=a("9dcd"),u=a.n(c),d={name:"DialogNewOrder",components:{CustomerNameSelector:l["a"]},data:function(){return{dict:{},form:{},payStatus:[],accountType:[],taxRate:0,tableTitles:[{label:"型号",name:"type"},{label:"箱数",name:"boxes"},{label:"件数/箱",name:"pics"},{label:"售价",name:"price"},{label:"是否尾箱",name:"isTail"},{label:"库存",name:"isTail"},{label:"总计",name:"total"}],lockCustomer:!1,goodsList:[],listOrigin:{specification:"",goodsName:"",goodsId:"",caseNum:"",goodsPrice:"",goodsTotal:"",isTail:!1},rules:{name:[{required:!0,message:"请输入",trigger:"change"}],status:[{required:!0,message:"请选择",trigger:"change"}],companyName:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.dict=n["a"],this.payStatus=[n["a"].payStatus[0],n["a"].payStatus[1]],this.accountType=[n["a"].accountType[0],n["a"].accountType[2],n["a"].accountType[3]],this.getTaxRate()},methods:{changaItem:function(e,t,a,s){if("isTail"==s&&!0===e&&t["goodsId"])return this.goodsList[a+1]&&this.goodsList[a+1].goodsId===t.goodsId||(0!==t.tailBox?this.goodsList.splice(a+1,0,{specification:t.specification,goodsId:t.goodsId,goodsName:t.goodsName,caseNum:t.tailBox,stock:t.tailBox+"（尾箱数)",goodsTotal:t.goodsTotal,goodsPrice:t.goodsPrice,isTail:!0}):this.$message.warning("当前商品尾箱数为0无法选择销售尾箱")),void this.$set(this.goodsList[a],s,!1);"isTail"==s&&!1===e&&t["goodsId"]?this.delList(a):this.$set(this.goodsList[a],s,e)},addList:function(){var e=Object(o["cloneDeep"])(this.listOrigin);this.goodsList.push(e)},delList:function(e){this.goodsList.splice(e,1)},saveSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.form.exchangeRate=e.taxRate;var a=Object(o["cloneDeep"])(e.form);a.goodsList=Object(o["cloneDeep"])(e.goodsList);var s=!0;if(a.goodsList.forEach((function(t){t.caseNum>t.stock&&(e.$message.warning("销售箱数不能大于库存！请重新填写"),s=!1),t.isTail?t.isTail=1:t.isTail=0,delete t.stock,delete t.tailBox})),!s)return;a.taxRate=a.taxRate/100,e.$emit("saveData",a)}}))},resetData:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&e.customerId?this.lockCustomer=!0:this.lockCustomer=!1,this.form={customerId:e?e.customerId:"",customerName:e?e.customerName:"",customerAddress:"",transportName:"",payType:"",monetaryUnit:"欧元",discount:0,exchangeRate:"",taxRate:0,companyName:"",companyId:"",status:""},this.goodsList=[{specification:"",goodsName:"",goodsId:"",caseNum:"",goodsPrice:"",goodsTotal:"",isTail:!1}],this.$nextTick((function(){a&&t.$refs.nameSelector.reset(),t.$refs.form.clearValidate()}))},setName:function(e){this.$refs.nameSelector.setName(e)},editData:function(e){var t=this;this.form=e.form,this.goodsList=e.goodsList,this.$nextTick((function(){t.$refs.form.clearValidate()}))},queryName:function(e,t){Object(r["ob"])({level:"",status:"",page:1,pageSize:10,userName:e}).then((function(e){for(var a=[],s=0;s<e.records.length;s++){var i=e.records[s];a.push({value:i.memberName,id:i.id,memberName:i.memberName})}t(a)}))},queryProduct:function(e,t){Object(r["m"])({page:1,pageSize:5,specification:e}).then((function(e){for(var a=[],s=0;s<e.records.length;s++){var i=e.records[s];i.value=i.specification,a.push(i)}t(a)}))},queryTransport:function(e,t){var a={pageSize:5,page:1,transporterName:e};Object(r["Y"])(a).then((function(e){for(var a=[],s=0;s<e.records.length;s++){var i=e.records[s];i.value=i.transporterName,a.push(i)}t(a)}))},queryCompany:function(e,t){var a={pageSize:5,page:1,name:e};Object(r["H"])(a).then((function(e){for(var a=[],s=0;s<e.records.length;s++){var i=e.records[s];i.value=i.name,a.push(i)}t(a)}))},handleProductSelect:function(e,t){this.$set(this.goodsList[t],"goodsId",e.goodsId),this.$set(this.goodsList[t],"goodsName",e.name),this.$set(this.goodsList[t],"stock",e.caseNum),this.$set(this.goodsList[t],"tailBox",e.tailBox),this.$set(this.goodsList[t],"caseNum",1),this.$set(this.goodsList[t],"goodsTotal",e.goodsTotal),this.$set(this.goodsList[t],"goodsPrice",e.salePrice)},handleSelect:function(e){this.form.customerName=e.memberName,this.form.customerId=e.id},handleSelectCompany:function(e){this.form.companyId=e.id},getTaxRate:function(){var e=this,t={status:"taxRate"};Object(r["X"])(t).then((function(t){var a=t instanceof Array?t:[];e.taxRate=a[0].configValue}))},getTotal:function(e){for(var t=0,a=0,s=this.form.discount||0,i=this.form.taxRate||0,o=0;o<this.goodsList.length;o++){var n=this.goodsList[o];t+=Number(n.caseNum),a+=Number(n.caseNum*n.goodsTotal*n.goodsPrice)}if("caseNum"==e)return t;if("total"==e)return a;if("discount"==e){var r=new u.a(a).minus(s).toNumber();return r}if("tax"==e){var l=new u.a(a).minus(s),c=new u.a(1).minus(i/100);return l.times(c).toNumber()}}}},m=d,f=(a("6f6f"),a("2877")),p=Object(f["a"])(m,s,i,!1,null,"3ab084f2",null);t["a"]=p.exports},e46b:function(e,t,a){"use strict";t.__esModule=!0;var s=a("b1d4"),i=a("6179"),o=a("6d8b");function n(e,t,a){t=o.isArray(t)&&{coordDimensions:t}||o.extend({},t);var n=e.getSource(),r=s["default"](n,t),l=new i["default"](r,e);return l.initData(n,a),l}t["default"]=n},e4d2:function(e,t,a){"use strict";var s=a("aec4"),i=a.n(s);i.a},f2c4:function(e,t,a){"use strict";var s=a("cc8a"),i=a.n(s);i.a},f74d:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-selector"},[a("div",{staticClass:"date"},[a("el-select",{ref:"selector",attrs:{placeholder:e.placeholder},on:{change:e.change},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"showDate",style:"width:"+e.width,on:{click:e.dateClick}},[e._v("\n        "+e._s(e.showValue?e.showValue:e.placeholder)+"\n        "),a("span",{staticClass:"unfold-pic"})])])},i=[],o={name:"DateSelector",props:{placeholder:String,options:Array,width:{type:String,default:"83px"}},data:function(){return{value:"",showValue:""}},mounted:function(){},methods:{dateClick:function(){console.log(this.$refs),this.$refs.selector.focus()},change:function(e){console.log(e);for(var t=0;t<this.options.length;t++){var a=this.options[t];if(a.value==e){this.showValue=a.label;break}}this.$emit("change",e)}}},n=o,r=(a("72e4"),a("2877")),l=Object(r["a"])(n,s,i,!1,null,"f8f72a3c",null);t["a"]=l.exports},f7c6:function(e,t,a){"use strict";t.__esModule=!0;var s=a("7fae"),i=a("e46b"),o=a("6d8b"),n=a("e0d3"),r=a("3842"),l=a("0f99"),c=a("c4a3"),u=a("4f85"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useColorPaletteOnData=!0,t}return s.__extends(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new c["default"](o.bind(this.getData,this),o.bind(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return i["default"](this,{coordDimensions:["value"],encodeDefaulter:o.curry(l.makeSeriesEncodeForNameBased,this)})},t.prototype.getDataParams=function(t){var a=this.getData(),s=e.prototype.getDataParams.call(this,t),i=[];return a.each(a.mapDimension("value"),(function(e){i.push(e)})),s.percent=r.getPercentWithPrecision(i,t,a.hostModel.get("percentPrecision")),s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(e){n.defaultEmphasis(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(u["default"]);u["default"].registerClass(d),t["default"]=d},fa7f:function(e,t,a){"use strict";var s=a("a578"),i=a.n(s);i.a}}]);