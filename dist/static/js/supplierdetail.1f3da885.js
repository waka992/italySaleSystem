(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["supplierdetail"],{7609:function(e,a,t){"use strict";var l={accountType:[{value:0,label:"现金"},{value:3,label:"发票"},{value:4,label:"汇款"},{value:5,label:"欠款"}],accountTypeEN:[{value:0,label:"CASH"},{value:3,label:"INVOICE"},{value:4,label:"REMITTANCE"},{value:5,label:"ARREARS"}],payWay:[{value:0,label:"发票"},{value:1,label:"汇款"}],payENWay:[{value:0,label:"INVOICE"},{value:1,label:"CASH"}],payStatus:[{value:0,label:"未支付"},{value:1,label:"已支付"},{value:2,label:"欠款"},{value:3,label:"已结欠"}],payENStatus:[{value:0,label:"PAID"},{value:1,label:"UNPAID"}],soldStatus:[{value:0,label:"即将到货"},{value:1,label:"现货"},{value:2,label:"售罄"}],settingItemValue:[{value:5,label:"特色/Special"},{value:0,label:"颜色/Color"},{value:1,label:"尺码/Size"},{value:2,label:"面料/Material"},{value:4,label:"配比/Ratio"}],containerStatus:[{value:0,label:"未运输"},{value:1,label:"已发货"},{value:2,label:"已到达待确认"},{value:3,label:"已确认货物"}],transportType:[{value:0,label:"海运"},{value:2,label:"空运"},{value:3,label:"其他"}],verifyStatus:[{value:0,label:"待审核"},{value:1,label:"不通过"},{value:2,label:"审核通过"},{value:3,label:"通过欠款待发货"},{value:4,label:"仓库发货"},{value:5,label:"退审处理中"}],verifyCheckStatus:[{value:0,label:"未审核"},{value:1,label:"已审核"},{value:2,label:"退审"}],userLevel:[{value:1,label:"销售人员"},{value:2,label:"管理员"}],getDict:function(e,a){for(var t=0;t<l[a].length;t++){var i=l[a][t];if(i.value==e)return i.label}}};a["a"]=l},"9bad":function(e,a,t){},b25b:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("采购")]),t("el-breadcrumb-item",{attrs:{to:{name:"supplier"}}},[e._v("供应商")]),t("el-breadcrumb-item",[e._v("供应商详情")])],1)],1),t("div",{staticClass:"box"},[t("div",{staticClass:"detail-card"},[t("div",{staticClass:"title"},[e._v("供应商详情")]),t("div",{staticClass:"handle-box"},[t("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:e.editReady}},[e._v("编辑")])],1),t("el-row",{staticClass:"detail-row"},[t("el-col",{attrs:{span:6}},[t("span",{staticClass:"detail-label"},[e._v("名称：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierName))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"detail-label"},[e._v("地址：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierAddress))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"detail-label"},[e._v("电话：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierMobile))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"detail-label"},[e._v("其他联系方式：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierOther))])])],1),t("el-row",{staticClass:"detail-row"},[t("el-col",{attrs:{span:6}},[t("span",{staticClass:"detail-label"},[e._v("备忘：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.memorandum))])]),t("el-col",{attrs:{span:6}},[t("span",{staticClass:"detail-label"},[e._v("作用：")]),t("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.effect))])])],1)],1),t("div",{staticClass:"record-card"},[t("div",{staticClass:"top"},[t("div",{staticClass:"title"},[e._v("查询")]),t("div",{staticClass:"handle-box"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:e.addIncomeReady}},[e._v("新增付款")])],1)]),t("div",{staticClass:"pay-record"},[t("div",{staticClass:"topic"},[e._v("付款记录")]),t("div",{staticClass:"search"},[t("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.date,callback:function(a){e.date=a},expression:"date"}})],1),t("el-button",{staticClass:"search-btn",attrs:{size:"mini",icon:"el-icon-search"},on:{click:e.getData}}),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","header-cell-class-name":"table-header"}},[t("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称",align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                                "+e._s(e.timeFormat(a.row.createTime))+"\n                            ")]}}])}),t("el-table-column",{attrs:{prop:"money",label:"支付金额",align:"center"}}),t("el-table-column",{attrs:{prop:"companyName",label:"支付名",align:"center"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{color:"red",cursor:"pointer"},on:{click:function(t){return e.delPay(a.row.id)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.page.no,"page-size":e.page.size,total:e.page.total,"page-sizes":[5,10,20],layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.basePageChange}})],1)],1),t("div",{staticClass:"operation-record"},[t("div",{staticClass:"topic"},[e._v("合作记录")]),t("div",{staticClass:"search"},[t("el-select",{attrs:{size:"mini",placeholder:"请选择",clearable:""},model:{value:e.cooperationSeason,callback:function(a){e.cooperationSeason=a},expression:"cooperationSeason"}},e._l(e.seasonOptions,(function(e){return t("el-option",{key:e.configValue,attrs:{label:e.configValue,value:e.configValue}})})),1)],1),t("el-button",{staticClass:"search-btn",attrs:{size:"mini",icon:"el-icon-search"},on:{click:e.getCooperationRecord}}),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.cooperationTableData,stripe:"","header-cell-class-name":"table-header"}},[t("el-table-column",{attrs:{prop:"supplierName",label:"季度",align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:"总箱数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                                "+e._s(e.timeFormat(a.row.createTime))+"\n                            ")]}}])}),t("el-table-column",{attrs:{prop:"money",label:"总件数",align:"center"}}),t("el-table-column",{attrs:{prop:"companyName",label:"金额",align:"center"}})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.coopPage.no,"page-size":e.coopPage.size,total:e.coopPage.total,"page-sizes":[5,10,20],layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleCoopSizeChange,"current-change":e.coopPageChange}})],1)],1)])]),t("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"编辑供应商信息",visible:e.baseDialogVisible,width:"551px"},on:{"update:visible":function(a){e.baseDialogVisible=a}}},[t("el-popover",{attrs:{"popper-class":"del-confirm",placement:"bottom",width:"210"},model:{value:e.delVisible,callback:function(a){e.delVisible=a},expression:"delVisible"}},[t("div",{staticClass:"del-word"},[e._v("删除该供应商后，数据不可恢复，是否确认删除？")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{staticClass:"del-btn1",attrs:{size:"mini",type:"text"},on:{click:function(a){e.delVisible=!1}}},[e._v("取消")]),t("el-button",{staticClass:"del-btn2",attrs:{size:"mini"},on:{click:e.delConfirm}},[e._v("确认删除")])],1),t("el-button",{staticClass:"del-btn2 outer",attrs:{slot:"reference"},slot:"reference"},[e._v("删除")])],1),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"158px",rules:e.rules}},[t("el-form-item",{attrs:{label:"供应商名称",prop:"supplierName"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商名",maxlength:"15","show-word-limit":""},model:{value:e.form.supplierName,callback:function(a){e.$set(e.form,"supplierName",a)},expression:"form.supplierName"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"supplierAddress"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商地址"},model:{value:e.form.supplierAddress,callback:function(a){e.$set(e.form,"supplierAddress",a)},expression:"form.supplierAddress"}})],1),t("el-form-item",{attrs:{label:"电话",prop:"supplierMobile"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商电话"},model:{value:e.form.supplierMobile,callback:function(a){e.$set(e.form,"supplierMobile",a)},expression:"form.supplierMobile"}})],1),t("el-form-item",{attrs:{label:"其他联系方式",prop:"supplierOther"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.supplierOther,callback:function(a){e.$set(e.form,"supplierOther",a)},expression:"form.supplierOther"}})],1),t("el-form-item",{attrs:{label:"备忘录",prop:"memorandum"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.memorandum,callback:function(a){e.$set(e.form,"memorandum",a)},expression:"form.memorandum"}})],1),t("el-form-item",{attrs:{label:"作用",prop:"effect"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.effect,callback:function(a){e.$set(e.form,"effect",a)},expression:"form.effect"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(a){e.baseDialogVisible=!1}}},[e._v("取消")]),t("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),t("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"新增记录",visible:e.incomeDialogVisible,width:"551px"},on:{"update:visible":function(a){e.incomeDialogVisible=a}}},[t("el-form",{ref:"incomeform",attrs:{model:e.incomeform,"label-width":"178px",rules:e.incomerules}},[t("el-form-item",{attrs:{label:"日期",prop:"createTime"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择今日日期时间"},model:{value:e.incomeform.createTime,callback:function(a){e.$set(e.incomeform,"createTime",a)},expression:"incomeform.createTime"}})],1),t("el-form-item",{attrs:{label:"支付金额",prop:"money"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.incomeform.money,callback:function(a){e.$set(e.incomeform,"money",a)},expression:"incomeform.money"}})],1),t("el-form-item",{attrs:{label:"支付名",prop:"status"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.incomeform.companyName,callback:function(a){e.$set(e.incomeform,"companyName",a)},expression:"incomeform.companyName"}})],1),t("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[t("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.incomeform.payType,callback:function(a){e.$set(e.incomeform,"payType",a)},expression:"incomeform.payType"}},e._l(e.dict.accountType,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入备注内容"},model:{value:e.incomeform.remark,callback:function(a){e.$set(e.incomeform,"remark",a)},expression:"incomeform.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(a){e.incomeDialogVisible=!1}}},[e._v("取消")]),t("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.saveIncome}},[e._v("保存")])],1)],1)],1)},i=[],s=t("2ef0"),o=t("7609"),r=t("365c"),n={name:"SupplierDetail",data:function(){return{date:"",dict:{},seasonOptions:[],cooperationSeason:"",delVisible:!1,baseDialogVisible:!1,incomeDialogVisible:!1,page:{no:1,total:0,size:10},coopPage:{no:1,total:0,size:10},comInfo:{id:"",supplierName:"",supplierAddress:"",supplierMobile:"",supplierOther:"",memorandum:"",payDetail:"",effect:""},tableData:[],cooperationTableData:[],form:{name:"",address:"",mobile:"",otherContact:"",remark:"",payStatus:"",use:""},incomeform:{},rules:{supplierName:[{required:!0,message:"请输入供应商名",trigger:"change"}],supplierAddress:[{required:!0,message:"请输入供应商地址",trigger:"change"}],supplierMobile:[{required:!0,message:"请输入联系电话",trigger:"change"}]},incomerules:{name:[{required:!0,message:"请输入客户名",trigger:"change"}],createTime:[{required:!0,message:"请选择日期",trigger:"change"}],money:[{required:!0,message:"请输入",trigger:"change"}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},created:function(){var e=this.$route.params.data;this.comInfo={id:e.id,supplierName:e.supplierName,supplierAddress:e.supplierAddress,supplierMobile:e.supplierMobile,supplierOther:e.supplierOther,memorandum:e.memorandum,payDetail:e.payDetail,effect:e.effect}},mounted:function(){this.dict=o["a"],this.getSeason(),this.getData(),this.getCooperationRecord()},methods:{editReady:function(){var e=this;this.form=Object(s["cloneDeep"])(this.comInfo),this.baseDialogVisible=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},delConfirm:function(){var e=this,a=this.$route.params.data.id;Object(r["y"])({id:a}).then((function(a){a&&(e.$message.success("删除成功"),e.delVisible=!1,e.baseDialogVisible=!1,e.$router.push({name:"supplier"}))}))},getSeason:function(){var e=this,a={status:"quarter"};Object(r["X"])(a).then((function(a){var t=a instanceof Array?a:[];e.seasonOptions=t||[]}))},getData:function(){var e=this,a={pageSize:this.page.size,page:this.page.no,supplierId:this.comInfo.id,date:this.date};Object(r["W"])(a).then((function(a){e.tableData=a.records,e.page.total=a.total,e.page.no=a.current}))},getCooperationRecord:function(){var e={id:this.comInfo.id,season:this.cooperationSeason,pageSize:this.coopPage.size,page:this.coopPage.no};Object(r["U"])(e).then((function(e){}))},save:function(){var e=this,a=Object(s["cloneDeep"])(this.form);this.$refs.form.validate((function(t){t&&Object(r["g"])(a).then((function(a){a&&(e.$message.success({message:"修改成功"}),e.baseDialogVisible=!1,e.comInfo=Object(s["cloneDeep"])(e.form))}))}))},addIncomeReady:function(){var e=this;this.incomeform={createTime:"",money:"",companyName:"",payType:"",remark:""},this.incomeDialogVisible=!0,this.$nextTick((function(){e.$refs.incomeform.clearValidate()}))},saveIncome:function(){var e=this,a=Object(s["cloneDeep"])(this.incomeform);a.supplierId=this.comInfo.id,a.supplierName=this.comInfo.supplierName,this.$refs.incomeform.validate((function(t){t&&Object(r["h"])(a).then((function(a){a&&(e.$message.success({message:"添加成功"}),e.incomeDialogVisible=!1,e.getData())}))}))},delPay:function(e){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){Object(r["z"])({id:e}).then((function(e){a.$message.success({message:"删除成功"}),a.getData()}))})).catch((function(){}))},timeFormat:function(e){return this.$moment(e).add(8,"h").format("YYYY-MM-DD")},back:function(){this.$router.push({name:"supplier"})},basePageChange:function(e){this.$set(this.page,"no",e),this.getData()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getData()},coopPageChange:function(e){this.$set(this.coopPage,"no",e),this.getCooperationRecord()},handleCoopSizeChange:function(e){this.$set(this.coopPage,"size",e),this.$set(this.coopPage,"no",1),this.getCooperationRecord()}}},c=n,p=(t("bc42"),t("2877")),m=Object(p["a"])(c,l,i,!1,null,"20168fee",null);a["default"]=m.exports},bc42:function(e,a,t){"use strict";var l=t("9bad"),i=t.n(l);i.a}}]);