(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profitstatistics"],{"4ea2":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"profit-statistics"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("公司")]),e("el-breadcrumb-item",[t._v("盈利统计")])],1)],1),e("div",{staticClass:"top-box"},[e("div",{staticClass:"title"},[t._v("销售统计")]),e("div",{staticClass:"date-select"},[e("date-selector",{on:{change:t.getSellDate}})],1),e("div",[e("div",{staticClass:"top-switch"},t._l(t.topTab,(function(a,s){return e("div",{key:a.name,staticClass:"tab",class:t.topSelected==s?"active":"",on:{click:function(a){return t.topTapClick(s)}}},[t._v(t._s(a.name))])})),0),e("div",{staticClass:"date-switch"},t._l(t.dateTab,(function(a,s){return e("div",{key:a.name,staticClass:"tab",class:t.dateSelected==s?"active":"",on:{click:function(a){return t.dateTapClick(s)}}},[t._v(t._s(a.name))])})),0),e("div",{staticClass:"charts"},[e("line-chart",{ref:"lineChart",attrs:{height:"180px",width:"300px"}})],1)])]),e("div",{staticClass:"top-box"},[e("div",{staticClass:"title"},[t._v("销售利润")]),e("div",{staticClass:"horizon-charts"},[e("horizon-line",{ref:"horizonLine",attrs:{height:"180px",width:"300px"}})],1)])])},i=[],n=e("33e7"),l=e("cd5e"),r=e("d0c2"),o=e("365c"),c={name:"ProfitStatistics",components:{LineChart:n["a"],DateSelector:r["a"],HorizonLine:l["a"]},data:function(){return{topTar:"sold",year:2020,topSelected:0,dateSelected:0,saleDate:"",topTab:[{name:"销售"},{name:"收入"},{name:"支出"},{name:"利润"}],dateTab:[{name:"今日"},{name:"7日"},{name:"14日"}]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this,a={saleDate:this.saleDate||this.$moment().format("YYYY-MM-DD"),saleType:7*this.dateSelected-1>0?7*this.dateSelected-1:0};Object(o["Db"])(a).then((function(a){var e=[];switch(t.topSelected){case 0:e=a.sale;break;case 1:e=a.income;break;case 2:e=a.pay;break;case 3:e=a.profit;break}for(var s=0;s<e.length;s++){var i=e[s];e[s].x=i.days.slice(5),e[s].y=i.price,e[s].caseNum=i.caseNum}t.setData(e),t.$refs.horizonLine.setData(a.saleToday)}))},getSellDate:function(t){this.saleDate=t,this.getData()},topTapClick:function(t){this.topSelected=t,0==t&&(this.topTar="sold"),1==t&&(this.topTar="income"),2==t&&(this.topTar="pay"),3==t&&(this.topTar="profit"),this.getData()},dateTapClick:function(t){this.dateSelected=t,this.getData()},setData:function(t){for(var a=[],e=[],s=0;s<t.length;s++){var i=t[s];a.push(i.x),e.push({value:i.y,amount:i.caseNum})}var n={xAxis:{data:a},series:[{data:e}]};"sold"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"金额:"+t.data.value+"&nbsp箱数"+t.data.amount}}),"income"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"收入金额:"+t.data.value}}),"pay"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"支出金额:"+t.data.value}}),"profit"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"利润:"+t.data.value}}),this.$refs.lineChart.setData(n)}}},u=c,d=(e("f56c"),e("2877")),f=Object(d["a"])(u,s,i,!1,null,"49934fc6",null);a["default"]=f.exports},"580e":function(t,a,e){},c84b:function(t,a,e){},cd5e:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"horizon-line-box",style:"width: 100%;"},t._l(t.lineData,(function(a,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showTarget.includes(a.id),expression:"showTarget.includes(line.id)"}],key:s,staticClass:"line-item"},[e("div",{staticClass:"line-area"},[e("div",{staticClass:"label"},[t._v(t._s(a.label))]),e("div",{staticClass:"horizon-line-bg"},[e("div",{staticClass:"line",style:"backgroundColor:"+a.color+";transform:translateX("+a.offset+");"})])]),e("div",{staticClass:"value-area"},t._l(a.value,(function(a,s){return e("span",{key:s,staticStyle:{"margin-right":"10px"}},[e("span",{staticClass:"value-label"},[t._v(t._s(a.label)+"：")]),e("span",{staticClass:"value-amount"},[t._v(t._s(a.value))])])})),0)])})),0)},i=[],n={name:"HorizonLine",props:{showTarget:{type:Array,default:function(){return["amount","profit"]}},height:{type:String,default:"0px"},width:{type:String,default:"0px"}},data:function(){return{lineData:[{id:"amount",label:"销售量",color:"#2183EA",offset:"-100%",value:[{label:"金额",value:0},{label:"总箱数",value:0}]},{id:"profit",label:"利润",offset:"-100%",color:"#E62A9A",value:[{label:"金额",value:0}]}]}},mounted:function(){},methods:{setData:function(t){var a=t||{},e=a.salePrice||0;this.lineData[0].value[0].value=e,this.lineData[0].value[1].value=a.caseNum||0,this.lineData[1].value[0].value=a.saleProfit||0;var s=e/.6;if(0==s)this.lineData[0].offset="-100%",this.lineData[1].offset="-100%";else{this.lineData[0].offset="-36%";a.saleProfit;this.lineData[1].offset="-60%"}}}},l=n,r=(e("ea07"),e("2877")),o=Object(r["a"])(l,s,i,!1,null,"a5f4cd76",null);a["a"]=o.exports},ea07:function(t,a,e){"use strict";var s=e("c84b"),i=e.n(s);i.a},f56c:function(t,a,e){"use strict";var s=e("580e"),i=e.n(s);i.a}}]);