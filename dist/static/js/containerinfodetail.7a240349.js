(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["containerinfodetail"],{"189f":function(t,e,a){"use strict";var s=a("3520"),l=a.n(s);l.a},3520:function(t,e,a){},"93c3":function(t,e,a){"use strict";var s=a("c9aa"),l=a.n(s);l.a},ba89:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("采购")]),a("el-breadcrumb-item",{attrs:{to:{name:"containerinfo"}}},[t._v("货柜信息")]),a("el-breadcrumb-item",[t._v("详情")])],1),a("el-popover",{attrs:{"popper-class":"del-confirm",placement:"bottom",width:"210"},model:{value:t.delVisible,callback:function(e){t.delVisible=e},expression:"delVisible"}},[a("div",{staticClass:"del-word"},[t._v("是否确定到货")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.delVisible=!1}}},[t._v("取消")]),a("el-button",{staticClass:"del-btn2",attrs:{size:"mini"},on:{click:t.arriveConfirm}},[t._v("确定")])],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.comInfo.contaninerType,expression:"comInfo.contaninerType == 1"}],staticClass:"del-btn2 outer",attrs:{slot:"reference"},slot:"reference"},[t._v("确定到货")])],1)],1),a("div",{staticClass:"box",attrs:{id:"containerInfoDetail"}},[a("div",{staticClass:"detail-card"},[a("div",{staticClass:"title"},[t._v(t._s(t.comInfo.container))]),a("div",{staticClass:"handle-box"}),a("el-row",{staticClass:"detail-row"},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[t._v("运输商：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.comInfo.transpoterName))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"detail-label"},[t._v("货柜类型：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.getDict(t.comInfo.transpoterType,"transportType")))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"detail-label"},[t._v("货柜费用：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.comInfo.cost))])]),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"detail-label"},[t._v("总件数：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.comInfo.goodsTotal))])]),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"detail-label"},[t._v("总箱数：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.comInfo.caseNum))])])],1),a("el-row",{staticClass:"detail-row"},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[t._v("出货日期：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.timeFormat(t.comInfo.startTime)))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"detail-label"},[t._v("到货日期：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.timeFormat(t.comInfo.estimate)))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"detail-label"},[t._v("货物总金额：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.comInfo.goodsCost))])]),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"detail-label"},[t._v("平均运费：")]),a("span",{staticClass:"detail-content"},[t._v(t._s(t.comInfo.averageCost))])])],1)],1),a("div",{staticClass:"record-card"},[t._m(0),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"specification",label:"型号",align:"center"}}),a("el-table-column",{attrs:{prop:"label",label:"特色",align:"center"}}),a("el-table-column",{attrs:{prop:"caseNum",label:"箱数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.caseNum+("1"==e.row.isTail?"（尾箱）":""))+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"goodsTotal",label:"件数",align:"center"}}),a("el-table-column",{attrs:{label:"金额",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.caseNum*e.row.costPrice*e.row.goodsTotal)+"\n                    ")]}}])}),a("el-table-column",{attrs:{label:"是否尾箱",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(0==e.row.isTail?"否":1==e.row.isTail?"是":"")+"\n                    ")]}}])})],1)],1),a("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!1,title:"单品列表",visible:t.baseDialogVisible,width:"980px"},on:{"update:visible":function(e){t.baseDialogVisible=e}}},[a("good-list",{ref:"goodList",attrs:{id:t.id},on:{addSuccess:t.addContainerSuccess,addDialogShow:t.addDialogShow}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(e){t.baseDialogVisible=!1}}},[t._v("完成")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,"append-to-body":"",title:"数量设置",visible:t.addDialogVisible,width:"480px"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[t._l(t.selectedGoods,(function(e,s){return a("el-form",{key:s,ref:"form",refInFor:!0,staticClass:"amount-form",attrs:{"label-width":"90px",inline:!0,"label-position":"left"}},[a("el-col",[a("span",{staticClass:"add-form-title"},[t._v("型号："+t._s(e.specification))])]),a("el-col",[a("el-form-item",{attrs:{label:"总数量"}},[a("el-input",{staticClass:"small-input",attrs:{placeholder:"箱数"},model:{value:e.caseNum,callback:function(a){t.$set(e,"caseNum",a)},expression:"good.caseNum"}},[a("template",{slot:"append"},[t._v("箱")])],2),t._v("\n                        X\n                        "),a("el-input",{staticClass:"mid-input",attrs:{placeholder:"每箱件数"},model:{value:e.goodsTotal,callback:function(a){t.$set(e,"goodsTotal",a)},expression:"good.goodsTotal"}},[a("template",{slot:"append"},[t._v("件")])],2)],1)],1),a("el-col",[1==e.isTail?a("el-form-item",{attrs:{label:"尾箱数"}},[a("el-input",{staticClass:"small-input",attrs:{placeholder:"箱数"},model:{value:e.tailBox,callback:function(a){t.$set(e,"tailBox",a)},expression:"good.tailBox"}},[a("template",{slot:"append"},[t._v("箱")])],2),t._v("\n                        X\n                        "),a("el-input",{staticClass:"mid-input",attrs:{placeholder:"每箱件数"},model:{value:e.tailTotal,callback:function(a){t.$set(e,"tailTotal",a)},expression:"good.tailTotal"}},[a("template",{slot:"append"},[t._v("件")])],2)],1):t._e()],1),a("el-col",[a("el-form-item",{attrs:{label:"单品类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.skuType,callback:function(a){t.$set(e,"skuType",a)},expression:"good.skuType"}},[a("el-option",{attrs:{label:"入货",value:0}}),a("el-option",{attrs:{label:"加单",value:1}})],1)],1)],1),a("el-col",[a("el-form-item",{attrs:{label:"是否有尾箱"}},[a("el-checkbox",{on:{change:function(e){t.isTailChange(e,s)}},model:{value:e.isTail,callback:function(a){t.$set(e,"isTail",a)},expression:"good.isTail"}})],1)],1)],1)})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(e){t.addDialogVisible=!1}}},[t._v("完成")]),a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:t.addToContainer}},[t._v("添加")])],1)],2)],1),a("div",{staticClass:"operate"},[a("el-button",{attrs:{plain:""},on:{click:t.back}},[t._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:t.downPdf}},[t._v("生成pdf")])],1)])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top"},[a("div",{staticClass:"title"},[t._v("货柜单品")])])}],i=a("2ef0"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"name-search",attrs:{size:"mini","suffix-icon":"el-icon-search",placeholder:"输入关键词"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}}),a("div",{staticClass:"status"},[a("span",{staticClass:"label"},[t._v("尺码")]),a("el-select",{attrs:{size:"mini",multiple:"",placeholder:"请选择"},model:{value:t.search.size,callback:function(e){t.$set(t.search,"size",e)},expression:"search.size"}},t._l(t.sizeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.arrtibute,value:t.arrtibute}})})),1)],1),a("div",{staticClass:"status"},[a("span",{staticClass:"label"},[t._v("特色")]),a("el-select",{attrs:{size:"mini",multiple:"",placeholder:"请选择"},model:{value:t.search.label,callback:function(e){t.$set(t.search,"label",e)},expression:"search.label"}},t._l(t.labelOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.arrtibute,value:t.arrtibute}})})),1)],1),a("div",{staticClass:"status"},[a("span",{staticClass:"label"},[t._v("面料")]),a("el-select",{attrs:{size:"mini",multiple:"",placeholder:"请选择"},model:{value:t.search.component,callback:function(e){t.$set(t.search,"component",e)},expression:"search.component"}},t._l(t.componentOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.arrtibute,value:t.arrtibute}})})),1)],1),a("div",{staticClass:"status"},[a("span",{staticClass:"label"},[t._v("状态")]),a("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:t.search.skuStatus,callback:function(e){t.$set(t.search,"skuStatus",e)},expression:"search.skuStatus"}},t._l(t.soldStatus,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:t.getData}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.addReady}},[t._v("添加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,stripe:"","header-cell-class-name":"table-header"},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{prop:"specification",label:"型号",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"label",label:"特色",align:"center"}}),a("el-table-column",{attrs:{prop:"component",label:"面料",align:"center"}}),a("el-table-column",{attrs:{prop:"size",label:"尺码",align:"center"}}),a("el-table-column",{attrs:{prop:"color",label:"颜色",align:"center"}}),a("el-table-column",{attrs:{prop:"skuStatus",label:"状态",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(0===e.row.skuStatus?"即将到货":1===e.row.skuStatus?"现货":2===e.row.skuStatus?"售罄":"预录入")+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"caseNum",label:"箱数",align:"center"}}),a("el-table-column",{attrs:{prop:"salePrice",label:"售价",align:"center"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":t.page.no,"page-size":t.page.size,"page-sizes":[5,10,20],total:t.page.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.basePageChange}})],1)],1)},n=[],c=(a("ac6a"),a("365c")),r=a("7609"),d={name:"GoodList",props:{id:""},data:function(){return{page:{no:1,total:0,size:10},tableData:[],selectedGoods:[],search:{name:"",size:[],label:[],color:[],component:[],skuStatus:""},amountForm:{caseNum:""},getDict:null,soldStatus:[],sizeOptions:[],labelOptions:[],componentOptions:[]}},mounted:function(){this.getData(),this.getOptions(),this.soldStatus=r["a"].soldStatus},methods:{getData:function(){var t=this,e={pageSize:this.page.size,page:this.page.no,isSell:""};Object(c["P"])(e).then((function(e){t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},getOptions:function(){var t=this;Object(c["I"])().then((function(e){t.sizeOptions=e[1],t.labelOptions=e[5],t.componentOptions=e[2]}))},selectionChange:function(t){var e=Object(i["cloneDeep"])(t);e.forEach((function(t){t.isTail=!1,t.tailBox=0,t.tailTotal=0})),this.selectedGoods=e},addReady:function(){this.selectedGoods.length?this.$emit("addDialogShow",this.selectedGoods):this.$message.warning("请先选择需要添加到货柜的单品")},add:function(t){for(var e=this,a=[],s=0;s<t.length;s++){var l=t[s];1==l.isTail&&a.push({caseNum:l.tailBox,goodsTotal:l.tailTotal,skuId:l.skuId,skuType:l.skuType,isTail:1}),a.push({caseNum:l.caseNum,goodsTotal:l.goodsTotal,skuId:l.skuId,skuType:l.skuType,isTail:0})}var i={id:this.id,skuList:a};Object(c["d"])(i).then((function(t){e.selectedGoods=[],e.$refs.multipleTable.clearSelection(),e.$message.success("添加成功"),e.$emit("addSuccess")}))},basePageChange:function(t){this.$set(this.page,"no",t),this.getData()},handleSizeChange:function(t){this.$set(this.page,"size",t),this.$set(this.page,"no",1),this.getData()}}},u=d,p=(a("189f"),a("2877")),b=Object(p["a"])(u,o,n,!1,null,"03696ba5",null),m=b.exports,f=a("7dba"),h={name:"ContainerInfoDetail",components:{GoodList:m},data:function(){return{delVisible:!1,baseDialogVisible:!1,addDialogVisible:!1,selectedGoods:[],id:"",page:{no:1,total:0,size:10},comInfo:{},tableData:[]}},created:function(){this.getDict=r["a"].getDict;var t=this.$route.params.data;this.id=t.id,this.getData()},methods:{arriveConfirm:function(){var t=this,e={id:this.id};Object(c["o"])(e).then((function(e){t.$message.success("操作成功"),t.delVisible=!1,t.getData()}))},getData:function(){var t=this,e={id:this.id};Object(c["p"])(e).then((function(e){var a=e.container,s=e.transpoterName,l=e.transpoterType,i=e.cost,o=e.goodsTotal,n=e.goodsCost,c=e.caseNum,r=e.startTime,d=e.estimate,u=e.averageCost,p=e.details,b=e.contaninerType;t.comInfo={container:a,transpoterName:s,transpoterType:l,cost:i,goodsTotal:o,goodsCost:n,caseNum:c,startTime:r,estimate:d,averageCost:u,contaninerType:b},t.tableData=p}))},back:function(){this.$router.push({name:"containerinfo",params:{}})},basePageChange:function(t){this.$set(this.page,"no",t),this.getData()},handleSizeChange:function(t){this.$set(this.page,"size",t),this.$set(this.page,"no",1),this.getData()},timeFormat:function(t){return this.$moment(t).format("YYYY-MM-DD")},addGoods:function(){this.baseDialogVisible=!0},addDialogShow:function(t){this.addDialogVisible=!0,this.selectedGoods=t},isTailChange:function(t,e){this.$set(this.selectedGoods[e],"isTail",t),this.$forceUpdate()},addToContainer:function(){var t=Object(i["cloneDeep"])(this.selectedGoods);this.$refs.goodList.add(t)},addContainerSuccess:function(){this.getData(),this.addDialogVisible=!1},downPdf:function(){Object(f["a"])("#containerInfoDetail","货柜详情")}}},g=h,v=(a("93c3"),Object(p["a"])(g,s,l,!1,null,"7d2f1abe",null));e["default"]=v.exports},c9aa:function(t,e,a){}}]);