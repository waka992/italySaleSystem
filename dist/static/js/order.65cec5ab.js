(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order"],{"0bf5":function(t,e,s){"use strict";var a=s("980a"),i=s.n(a);i.a},"118a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-box"},[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[t._v("销售")]),s("el-breadcrumb-item",[t._v("销售订单")])],1)],1),s("div",{staticClass:"switch"},[s("div",{staticClass:"switch-item",class:0==t.selectedSwitch?"selected":"",on:{click:function(e){return t.switchSelect(0)}}},[t._v("全部订单")])]),s("el-button",{staticClass:"new-btn",attrs:{type:"primary"},on:{click:function(e){return t.showDialog("new")}}},[t._v("新订单")]),s("div",{staticClass:"box"},[s("div",{staticClass:"handle-box"},[s("el-input",{staticClass:"name-search",attrs:{size:"mini","suffix-icon":"el-icon-search",placeholder:"输入客户名"},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:"customerName"}}),s("div",{staticClass:"time"},[s("span",{staticClass:"label"},[t._v("时间")]),s("div",{staticClass:"time-comp"},[s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)]),s("div",{staticClass:"status"},[s("span",{staticClass:"label"},[t._v("审核状态")]),s("el-select",{attrs:{size:"mini",placeholder:"请选择",clearable:""},model:{value:t.process,callback:function(e){t.process=e},expression:"process"}},t._l(t.dict.verifyCheckStatus,(function(t,e){return s("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),s("el-button",{attrs:{size:"mini",icon:"el-icon-search"},on:{click:t.getData}})],1),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,stripe:"","header-cell-class-name":"table-header"}},[s("el-table-column",{attrs:{prop:"customerName",label:"客户",align:"center"}}),s("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.timeFormat(e.row.createTime))+"\n                ")]}}])}),s("el-table-column",{attrs:{label:"订单状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getDict(e.row.process,"verifyStatus")))]}}])}),s("el-table-column",{attrs:{prop:"caseNum",label:"箱数",align:"center"}}),s("el-table-column",{attrs:{prop:"price",label:"金额",align:"center"}}),s("el-table-column",{attrs:{prop:"payStatus",label:"支付方式",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.getDict(e.row.payType,"accountType"))+"\n                ")]}}])}),s("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.showDialog("edit",e.row.id)}}},[t._v("编辑")]),s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.showDialog("review",e.row.id)}}},[t._v("预览")])]}}])})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","current-page":t.page.no,"page-size":t.page.size,"page-sizes":[5,10,20],total:t.page.total,layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.basePageChange}})],1)],1),s("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!1,title:"新订单",visible:t.baseDialogVisible,width:"830px"},on:{"update:visible":function(e){t.baseDialogVisible=e}}},[s("dialog-new-order",{ref:"newOrderDialog",on:{saveData:t.saveSubmit}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(e){t.baseDialogVisible=!1}}},[t._v("取消")]),s("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1),s("el-dialog",{staticClass:"custom-dialog",attrs:{"close-on-click-modal":!1,"show-close":!1,title:"订单预览",visible:t.reviewDialogVisible,width:"830px"},on:{"update:visible":function(e){t.reviewDialogVisible=e}}},[s("dialog-review",{ref:"dialogReview",on:{getPDF:t.getReviewPDF}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(e){t.reviewDialogVisible=!1}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.askReviewPDF}},[t._v("生成PDF")])],1)],1)],1)},i=[],o=s("7609"),l=s("de9e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialog-bill"},[s("div",{staticClass:"language"},[s("common-selector",{attrs:{width:"70px",placeholder:"请选择语言",options:[{label:"中文版本",value:"CN"},{label:"English",value:"EN"}]},on:{change:t.languageChange}})],1),s("div",{attrs:{id:"dialogReview"}},["CN"==t.language?s("div",{staticClass:"bill-form"},[s("el-row",[s("el-col",{attrs:{span:8}},[s("span",{staticClass:"title"},[t._v("订单日期")]),s("span",{staticClass:"value"},[t._v(t._s(t.form.date))])]),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"title"},[t._v("销售方")]),s("span",{staticClass:"value"},[t._v(t._s(t.form.seller))])]),s("el-col",{attrs:{span:8}},[s("span",{staticClass:"title"},[t._v("订单状态")]),s("span",{staticClass:"value"},[t._v(t._s(t.getDict(t.form.process,"verifyStatus")))])])],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("span",{staticClass:"title"},[t._v("客户名称")]),s("span",{staticClass:"value"},[t._v(t._s(t.form.name))])])],1)],1):t._e(),"EN"==t.language?s("div",{staticClass:"bill-form"},[s("el-row",[s("el-col",{attrs:{span:8}},[s("span",{staticClass:"title"},[t._v(t._s(t.labels.date))]),"CN"==t.language?s("span",{staticClass:"value"},[t._v(t._s(t.dateFormat(t.form.date,"CN")))]):s("span",{staticClass:"value"},[t._v(t._s(t.dateFormat(t.form.date,"EN")))])])],1),s("el-row"),s("el-row",[s("el-col",{attrs:{span:8}},[s("span",{staticClass:"title"},[t._v(t._s(t.labels.customerName))]),s("span",{staticClass:"value"},[t._v(t._s(t.form.name))])])],1),s("el-row")],1):t._e(),t._l(t.tableList,(function(e,a){return s("div",{key:a,staticClass:"prod-table"},[s("div",{staticClass:"table-area"},[s("div",{staticClass:"table-head"},t._l(t.tableTitles,(function(e,a){return s("div",{key:a,staticClass:"head-item"},[t._v(t._s(e.label))])})),0),t._l(e.data,(function(e,a){return s("div",{key:a,staticClass:"table-list",class:a%2==0?"odd":"double"},[s("div",{staticClass:"list-item"},[t._v("\n                        "+t._s(e.specification)+"\n                    ")]),s("div",{staticClass:"list-item"},[t._v("\n                        "+t._s(e.caseNum)+"\n                    ")]),s("div",{staticClass:"list-item"},[t._v("\n                        "+t._s(e.goodsTotal)+"\n                    ")]),s("div",{staticClass:"list-item"},[t._v("\n                        "+t._s(e.goodsPrice)+"\n                    ")]),s("div",{staticClass:"list-item"},[t._v("\n                        "+t._s(e.caseNum*e.goodsTotal*e.goodsPrice||0)+"\n                        ")])])}))],2)])})),s("div",{staticClass:"total-statistics"},[s("div",{staticClass:"statistics-title"},[t._v("总汇：")]),s("div",{staticClass:"statistics-box"},[s("div",{staticClass:"statistics-inner"},[s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.allTotalSum))]),s("div",{staticClass:"item-value"},[t._v(t._s(t.total.value))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.totalBoxes))]),s("div",{staticClass:"item-value"},[t._v(t._s(t.total.boxes))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.payType))]),"CN"==t.language?s("div",{staticClass:"item-value"},[t._v(t._s(t.getDict(t.total.payType,"accountType")))]):s("div",{staticClass:"item-value"},[t._v(t._s(t.getDict(t.total.payType,"accountTypeEN")))])])]),s("div",{staticClass:"statistics-inner"},[s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.taxRate))]),s("div",{staticClass:"item-value"},[t._v(t._s(t.total.taxRate))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.pieces))]),s("div",{staticClass:"item-value"},[t._v(t._s(t.form.pieces))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.discount))]),s("div",{staticClass:"item-value"},[t._v(t._s(t.total.discount))])])]),s("div",{staticClass:"statistics-inner"},[s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.discountValue))]),s("div",{staticClass:"item-value"},[t._v(t._s(t.total.discountValue))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s(t.labels.taxValue))]),s("div",{staticClass:"item-value"},[t._v(t._s(t.total.taxValue))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"item-title"},[t._v(t._s())]),s("div",{staticClass:"item-value"},[t._v(t._s())])])])])])],2)])},r=[],c=(s("c5f6"),s("85f2")),u=s.n(c);function m(t,e,s){return e in t?u()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var d=s("2ef0"),f=s("f74d"),p=s("9dcd"),h=s.n(p),v={name:"DialogBill",components:{CommonSelector:f["a"]},data:function(){var t;return{language:"CN",totalBoxes:2300,totalValue:2800,payStatus:0,form:{},labels:(t={customerName:"客户名称",date:"账单日期",supplier:"销售方",totalSum:"总销售金额",payStatus:"支付状态",totalBoxes:"总销售箱数",allTotalSum:"总销售金额"},m(t,"totalBoxes","总箱数"),m(t,"payType","支付方式"),m(t,"taxRate","税收"),m(t,"pieces","总件数"),m(t,"discount","折扣"),m(t,"discountValue","折扣金额"),m(t,"taxValue","税后金额"),t),total:{value:"1",boxes:"1",payType:"1",taxRate:"1",discount:"1"},tableTitles:[{label:"货品型号"},{label:"箱数"},{label:"件数"},{label:"售价"},{label:"金额"}],tableList:[{date:"",data:[],total:0,payStatus:0}]}},created:function(){this.getDict=o["a"].getDict},methods:{getPDF:function(){var t=Object(d["cloneDeep"])(this.form);t.product=Object(d["cloneDeep"])(this.tableList),this.$emit("getPDF",t)},resetData:function(){this.languageChange("CN"),this.form={name:"",seller:"",date:""},this.tableList=[{date:"",data:[],total:0,payStatus:0}]},editData:function(t){for(var e=t.customerName,s=t.status,a=t.details,i=t.createTime,o=t.price,l=t.payType,n=t.taxRate,r=t.discount,c=t.process,u=0,m=0,d=0;d<a.length;d++){var f=a[d];u+=Number(f.caseNum),m+=f.goodsTotal*f.caseNum}this.form={seller:"",date:this.$moment(i).format("YYYY-MM-DD"),orderStatus:s,name:e,pieces:m,process:c},this.tableList=[{date:this.$moment(i).format("YYYY-MM-DD"),data:a}];var p=new h.a(1).minus(n);this.total={value:o,boxes:u,payType:l,taxRate:n,discount:r,discountValue:new h.a(o).minus(r).toNumber(),taxValue:new h.a(o).minus(r).times(p).toNumber()}},languageChange:function(t){var e,s;(this.language=t,"CN"==t)&&(this.tableTitles=[{label:"货品型号"},{label:"箱数"},{label:"件数"},{label:"售价"},{label:"金额"}],this.labels=(e={customerName:"客户名称",date:"账单日期",supplier:"销售方",totalSum:"总销售金额",payStatus:"支付状态",totalBoxes:"总销售箱数",allTotalSum:"总销售金额"},m(e,"totalBoxes","总箱数"),m(e,"payType","支付方式"),m(e,"taxRate","税收"),m(e,"discount","折扣"),m(e,"pieces","总件数"),m(e,"discountValue","折扣金额"),m(e,"taxValue","税后金额"),e));"EN"==t&&(this.tableTitles=[{label:"Code ID"},{label:"Box"},{label:"Piece"},{label:"Price"},{label:"Sum"}],this.labels=(s={customerName:"Costumer",date:"Date",supplier:"Supplier",payStatus:"Payment Status",totalPics:"Total Piece",totalBoxes:"Total Box",allTotalSum:"Total Sum",taxFee:"TaxRate Fee",pieces:"Pieces",salesInTotal:"Sales In Total",paymentMethod:"Payment Method",price:"Price",codeID:"Code ID",discount:"Discount",sum:"Sum",totalBox:"Total Box",totalSum:"Total Sum",payType:"Payment Method",taxRate:"TaxRate Revenue"},m(s,"discount","Discount"),m(s,"discountValue","Amount after Discount"),m(s,"taxValue","Amount after Tax"),s))},dateFormat:function(t,e){return"CN"==e?this.$moment(t).format("YYYY.MM.DD"):"EN"==e?this.$moment(t).format("YYYY/MM/DD"):void 0}}},g=v,b=(s("c1e4"),s("2877")),C=Object(b["a"])(g,n,r,!1,null,"32f42558",null),_=C.exports,y=s("7dba"),w=s("365c"),x={name:"Order",components:{DialogNewOrder:l["a"],DialogReview:_},data:function(){return{getDict:null,baseDialogVisible:!1,reviewDialogVisible:!1,status:0,selectedSwitch:0,customerName:"",process:"",dict:{},time:[this.$moment().add(-1,"days").format("YYYY-MM-DD"),this.$moment().format("YYYY-MM-DD")],page:{no:1,total:0,size:20},tableData:[],form:{name:"",season:"",transporter:"",containerType:"",fund:"",arriveTime:"",sellTime:""},rules:{name:[{required:!0,message:"请输入",trigger:"change"}],season:[{required:!0,message:"请选择",trigger:"change"}],transporter:[{required:!0,message:"请选择",trigger:"change"}]},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}}}},created:function(){this.getData(),this.getDict=o["a"].getDict,this.dict=o["a"]},methods:{switchSelect:function(t){this.selectedSwitch=t},showDialog:function(t,e){var s=this;"new"==t&&(this.baseDialogVisible=!0,this.$nextTick((function(){s.$refs.newOrderDialog.resetData()}))),"edit"==t&&this.$router.push({name:"orderinfoedit",params:{id:e}}),"review"==t&&Object(w["eb"])({id:e}).then((function(t){s.reviewDialogVisible=!0,s.$nextTick((function(){var e=t;s.$refs.dialogReview.editData(e)}))}))},getData:function(){var t=this,e={pageSize:this.page.size,page:this.page.no,customerName:this.customerName,startTime:this.time?this.time[0]:"",endTime:this.time?this.time[1]:"",process:this.process};Object(w["P"])(e).then((function(e){t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},save:function(){this.$refs.newOrderDialog.saveSubmit()},saveSubmit:function(t){var e=this;t.process=0,Object(w["r"])(t).then((function(t){e.$message.success("操作成功"),e.baseDialogVisible=!1,e.getData()}))},askReviewPDF:function(){this.$refs.dialogReview.getPDF()},getReviewPDF:function(){Object(y["a"])("#dialogReview","订单预览")},basePageChange:function(t){this.$set(this.page,"no",t),this.getData()},handleSizeChange:function(t){this.$set(this.page,"size",t),this.$set(this.page,"no",1),this.getData()},timeFormat:function(t){return this.$moment(t).format("YYYY.MM.DD")}}},T=x,N=(s("72c4"),Object(b["a"])(T,a,i,!1,null,"7d5b0784",null));e["default"]=N.exports},"454f":function(t,e,s){s("46a7");var a=s("584a").Object;t.exports=function(t,e,s){return a.defineProperty(t,e,s)}},"46a7":function(t,e,s){var a=s("63b6");a(a.S+a.F*!s("8e60"),"Object",{defineProperty:s("d9f6").f})},"6a47":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"autocomplete-area"},[s("el-autocomplete",{staticClass:"form-input",style:"width: "+t.width,attrs:{disabled:t.disabled,size:"mini","fetch-suggestions":t.queryName,maxlength:15,"show-word-limit":"",placeholder:"请输入客户名"},on:{select:t.handleSelect},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)},i=[],o=s("365c"),l={name:"CustomerNameSelector",props:{width:"",disabled:!1},data:function(){return{form:{name:""}}},methods:{queryName:function(t,e){Object(o["ob"])({level:"",status:"",page:1,pageSize:5,userName:t}).then((function(t){for(var s=[],a=0;a<t.records.length;a++){var i=t.records[a];i.value=i.memberName,s.push(i)}e(s)}))},handleSelect:function(t){this.$emit("selectData",t)},setName:function(t){this.$set(this.form,"name",t)},reset:function(){this.form.name=""}}},n=l,r=(s("c2db"),s("2877")),c=Object(r["a"])(n,a,i,!1,null,null,null);e["a"]=c.exports},"72c4":function(t,e,s){"use strict";var a=s("c405"),i=s.n(a);i.a},"72e4":function(t,e,s){"use strict";var a=s("c027"),i=s.n(a);i.a},"7ea1":function(t,e,s){},"85f2":function(t,e,s){t.exports=s("454f")},"980a":function(t,e,s){},"9d28":function(t,e,s){},"9dcd":function(t,e,s){var a;(function(i){"use strict";var o,l=20,n=1,r=1e6,c=1e6,u=-7,m=21,d=!1,f="[big.js] ",p=f+"Invalid ",h=p+"decimal places",v=p+"rounding mode",g=f+"Division by zero",b={},C=void 0,_=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function y(){function t(e){var s=this;if(!(s instanceof t))return e===C?y():new t(e);if(e instanceof t)s.s=e.s,s.e=e.e,s.c=e.c.slice();else{if("string"!==typeof e){if(!0===t.strict)throw TypeError(p+"number");e=0===e&&1/e<0?"-0":String(e)}w(s,e)}s.constructor=t}return t.prototype=b,t.DP=l,t.RM=n,t.NE=u,t.PE=m,t.strict=d,t}function w(t,e){var s,a,i;if(!_.test(e))throw Error(p+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(s=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(s<0&&(s=a),s+=+e.slice(a+1),e=e.substring(0,a)):s<0&&(s=e.length),i=e.length,a=0;a<i&&"0"==e.charAt(a);)++a;if(a==i)t.c=[t.e=0];else{for(;i>0&&"0"==e.charAt(--i););for(t.e=s-a-1,t.c=[],s=0;a<=i;)t.c[s++]=+e.charAt(a++)}return t}function x(t,e,s,a){var i=t.c;if(s===C&&(s=o.RM),0!==s&&1!==s&&2!==s&&3!==s)throw Error(v);if(e<1)a=3===s&&(a||!!i[0])||0===e&&(1===s&&i[0]>=5||2===s&&(i[0]>5||5===i[0]&&(a||i[1]!==C))),i.length=1,a?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(a=1===s&&i[e]>=5||2===s&&(i[e]>5||5===i[e]&&(a||i[e+1]!==C||1&i[e-1]))||3===s&&(a||!!i[0]),i.length=e--,a)for(;++i[e]>9;)i[e]=0,e--||(++t.e,i.unshift(1));for(e=i.length;!i[--e];)i.pop()}return t}function T(t,e,s){var a=t.e,i=t.c.join(""),o=i.length;if(e)i=i.charAt(0)+(o>1?"."+i.slice(1):"")+(a<0?"e":"e+")+a;else if(a<0){for(;++a;)i="0"+i;i="0."+i}else if(a>0)if(++a>o)for(a-=o;a--;)i+="0";else a<o&&(i=i.slice(0,a)+"."+i.slice(a));else o>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&s?"-"+i:i}b.abs=function(){var t=new this.constructor(this);return t.s=1,t},b.cmp=function(t){var e,s=this,a=s.c,i=(t=new s.constructor(t)).c,o=s.s,l=t.s,n=s.e,r=t.e;if(!a[0]||!i[0])return a[0]?o:i[0]?-l:0;if(o!=l)return o;if(e=o<0,n!=r)return n>r^e?1:-1;for(l=(n=a.length)<(r=i.length)?n:r,o=-1;++o<l;)if(a[o]!=i[o])return a[o]>i[o]^e?1:-1;return n==r?0:n>r^e?1:-1},b.div=function(t){var e=this,s=e.constructor,a=e.c,i=(t=new s(t)).c,o=e.s==t.s?1:-1,l=s.DP;if(l!==~~l||l<0||l>r)throw Error(h);if(!i[0])throw Error(g);if(!a[0])return t.s=o,t.c=[t.e=0],t;var n,c,u,m,d,f=i.slice(),p=n=i.length,v=a.length,b=a.slice(0,n),_=b.length,y=t,w=y.c=[],T=0,N=l+(y.e=e.e-t.e)+1;for(y.s=o,o=N<0?0:N,f.unshift(0);_++<n;)b.push(0);do{for(u=0;u<10;u++){if(n!=(_=b.length))m=n>_?1:-1;else for(d=-1,m=0;++d<n;)if(i[d]!=b[d]){m=i[d]>b[d]?1:-1;break}if(!(m<0))break;for(c=_==n?i:f;_;){if(b[--_]<c[_]){for(d=_;d&&!b[--d];)b[d]=9;--b[d],b[_]+=10}b[_]-=c[_]}for(;!b[0];)b.shift()}w[T++]=m?u:++u,b[0]&&m?b[_]=a[p]||0:b=[a[p]]}while((p++<v||b[0]!==C)&&o--);return w[0]||1==T||(w.shift(),y.e--,N--),T>N&&x(y,N,s.RM,b[0]!==C),y},b.eq=function(t){return 0===this.cmp(t)},b.gt=function(t){return this.cmp(t)>0},b.gte=function(t){return this.cmp(t)>-1},b.lt=function(t){return this.cmp(t)<0},b.lte=function(t){return this.cmp(t)<1},b.minus=b.sub=function(t){var e,s,a,i,o=this,l=o.constructor,n=o.s,r=(t=new l(t)).s;if(n!=r)return t.s=-r,o.plus(t);var c=o.c.slice(),u=o.e,m=t.c,d=t.e;if(!c[0]||!m[0])return m[0]?t.s=-r:c[0]?t=new l(o):t.s=1,t;if(n=u-d){for((i=n<0)?(n=-n,a=c):(d=u,a=m),a.reverse(),r=n;r--;)a.push(0);a.reverse()}else for(s=((i=c.length<m.length)?c:m).length,n=r=0;r<s;r++)if(c[r]!=m[r]){i=c[r]<m[r];break}if(i&&(a=c,c=m,m=a,t.s=-t.s),(r=(s=m.length)-(e=c.length))>0)for(;r--;)c[e++]=0;for(r=e;s>n;){if(c[--s]<m[s]){for(e=s;e&&!c[--e];)c[e]=9;--c[e],c[s]+=10}c[s]-=m[s]}for(;0===c[--r];)c.pop();for(;0===c[0];)c.shift(),--d;return c[0]||(t.s=1,c=[d=0]),t.c=c,t.e=d,t},b.mod=function(t){var e,s=this,a=s.constructor,i=s.s,o=(t=new a(t)).s;if(!t.c[0])throw Error(g);return s.s=t.s=1,e=1==t.cmp(s),s.s=i,t.s=o,e?new a(s):(i=a.DP,o=a.RM,a.DP=a.RM=0,s=s.div(t),a.DP=i,a.RM=o,this.minus(s.times(t)))},b.plus=b.add=function(t){var e,s,a,i=this,o=i.constructor;if(t=new o(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var l=i.e,n=i.c,r=t.e,c=t.c;if(!n[0]||!c[0])return c[0]||(n[0]?t=new o(i):t.s=i.s),t;if(n=n.slice(),e=l-r){for(e>0?(r=l,a=c):(e=-e,a=n),a.reverse();e--;)a.push(0);a.reverse()}for(n.length-c.length<0&&(a=c,c=n,n=a),e=c.length,s=0;e;n[e]%=10)s=(n[--e]=n[e]+c[e]+s)/10|0;for(s&&(n.unshift(s),++r),e=n.length;0===n[--e];)n.pop();return t.c=n,t.e=r,t},b.pow=function(t){var e=this,s=new e.constructor("1"),a=s,i=t<0;if(t!==~~t||t<-c||t>c)throw Error(p+"exponent");for(i&&(t=-t);;){if(1&t&&(a=a.times(e)),t>>=1,!t)break;e=e.times(e)}return i?s.div(a):a},b.prec=function(t,e){if(t!==~~t||t<1||t>r)throw Error(p+"precision");return x(new this.constructor(this),t,e)},b.round=function(t,e){if(t===C)t=0;else if(t!==~~t||t<-r||t>r)throw Error(h);return x(new this.constructor(this),t+this.e+1,e)},b.sqrt=function(){var t,e,s,a=this,i=a.constructor,o=a.s,l=a.e,n=new i("0.5");if(!a.c[0])return new i(a);if(o<0)throw Error(f+"No square root");o=Math.sqrt(a+""),0===o||o===1/0?(e=a.c.join(""),e.length+l&1||(e+="0"),o=Math.sqrt(e),l=((l+1)/2|0)-(l<0||1&l),t=new i((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+l)):t=new i(o+""),l=t.e+(i.DP+=4);do{s=t,t=n.times(s.plus(a.div(s)))}while(s.c.slice(0,l).join("")!==t.c.slice(0,l).join(""));return x(t,(i.DP-=4)+t.e+1,i.RM)},b.times=b.mul=function(t){var e,s=this,a=s.constructor,i=s.c,o=(t=new a(t)).c,l=i.length,n=o.length,r=s.e,c=t.e;if(t.s=s.s==t.s?1:-1,!i[0]||!o[0])return t.c=[t.e=0],t;for(t.e=r+c,l<n&&(e=i,i=o,o=e,c=l,l=n,n=c),e=new Array(c=l+n);c--;)e[c]=0;for(r=n;r--;){for(n=0,c=l+r;c>r;)n=e[c]+o[r]*i[c-r-1]+n,e[c--]=n%10,n=n/10|0;e[c]=n}for(n?++t.e:e.shift(),r=e.length;!e[--r];)e.pop();return t.c=e,t},b.toExponential=function(t,e){var s=this,a=s.c[0];if(t!==C){if(t!==~~t||t<0||t>r)throw Error(h);for(s=x(new s.constructor(s),++t,e);s.c.length<t;)s.c.push(0)}return T(s,!0,!!a)},b.toFixed=function(t,e){var s=this,a=s.c[0];if(t!==C){if(t!==~~t||t<0||t>r)throw Error(h);for(s=x(new s.constructor(s),t+s.e+1,e),t=t+s.e+1;s.c.length<t;)s.c.push(0)}return T(s,!1,!!a)},b.toJSON=b.toString=function(){var t=this,e=t.constructor;return T(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},b.toNumber=function(){var t=Number(T(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(f+"Imprecise conversion");return t},b.toPrecision=function(t,e){var s=this,a=s.constructor,i=s.c[0];if(t!==C){if(t!==~~t||t<1||t>r)throw Error(p+"precision");for(s=x(new a(s),t,e);s.c.length<t;)s.c.push(0)}return T(s,t<=s.e||s.e<=a.NE||s.e>=a.PE,!!i)},b.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(f+"valueOf disallowed");return T(t,t.e<=e.NE||t.e>=e.PE,!0)},o=y(),o["default"]=o.Big=o,a=function(){return o}.call(e,s,e,t),void 0===a||(t.exports=a)})()},c027:function(t,e,s){},c1e4:function(t,e,s){"use strict";var a=s("9d28"),i=s.n(a);i.a},c2db:function(t,e,s){"use strict";var a=s("7ea1"),i=s.n(a);i.a},c405:function(t,e,s){},de9e:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px",inline:!0}},[s("el-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[s("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v("客户")]),s("customer-name-selector",{ref:"nameSelector",staticStyle:{"margin-right":"90px"},attrs:{width:"200px",disabled:t.lockCustomer},on:{selectData:t.handleSelect}})],1),s("el-form-item",{attrs:{label:"地址",prop:"customerAddress"}},[s("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:t.form.customerAddress,callback:function(e){t.$set(t.form,"customerAddress",e)},expression:"form.customerAddress"}})],1),s("el-form-item",{attrs:{label:"托运部",prop:"transportName"}},[s("el-autocomplete",{staticClass:"form-input",attrs:{size:"mini","fetch-suggestions":t.queryTransport,placeholder:"请输入"},model:{value:t.form.transportName,callback:function(e){t.$set(t.form,"transportName",e)},expression:"form.transportName"}})],1),s("el-form-item",{attrs:{label:"公司",prop:"companyName"}},[s("el-autocomplete",{staticClass:"form-input",attrs:{size:"mini","fetch-suggestions":t.queryCompany,placeholder:"请输入"},on:{select:t.handleSelectCompany},model:{value:t.form.companyName,callback:function(e){t.$set(t.form,"companyName",e)},expression:"form.companyName"}})],1),s("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[s("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:t.form.payType,callback:function(e){t.$set(t.form,"payType",e)},expression:"form.payType"}},t._l(t.accountType,(function(t,e){return s("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),s("el-form-item",{attrs:{label:"货币",prop:"monetaryUnit"}},[s("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:t.form.monetaryUnit,callback:function(e){t.$set(t.form,"monetaryUnit",e)},expression:"form.monetaryUnit"}})],1),s("el-form-item",{attrs:{label:"折扣",prop:"discount"}},[s("el-input",{staticClass:"form-input",attrs:{max:1,size:"mini",placeholder:"请输入折扣金额"},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1),s("el-form-item",{attrs:{label:"税率",prop:"taxRate"}},[s("el-input",{staticClass:"form-input",attrs:{max:1,size:"mini",placeholder:"例如输入14即为14%"},model:{value:t.form.taxRate,callback:function(e){t.$set(t.form,"taxRate",e)},expression:"form.taxRate"}})],1),s("el-form-item",{attrs:{label:"支付状态",prop:"status"}},[s("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.payStatus,(function(t,e){return s("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1)],1),s("div",{staticClass:"prod-table"},[s("div",{staticClass:"label"},[t._v("产品")]),s("div",{staticClass:"table-area"},[s("div",{staticClass:"table-head"},t._l(t.tableTitles,(function(e,a){return s("div",{key:a,staticClass:"head-item",class:"型号"==e.label?"code":""},[t._v(t._s(e.label))])})),0),t._l(t.goodsList,(function(e,a){return s("div",{key:a,staticClass:"table-list"},[s("div",{staticClass:"list-item code"},[s("el-autocomplete",{attrs:{size:"mini","fetch-suggestions":t.queryProduct,placeholder:"请输入产品名"},on:{select:function(e){t.handleProductSelect(e,a)}},model:{value:e.specification,callback:function(s){t.$set(e,"specification",s)},expression:"list.specification"}})],1),s("div",{staticClass:"list-item"},[s("el-input",{attrs:{size:"mini"},on:{change:function(s){return t.changaItem(s,e,a,"caseNum")}},model:{value:e.caseNum,callback:function(s){t.$set(e,"caseNum",s)},expression:"list.caseNum"}})],1),s("div",{staticClass:"list-item"},[s("el-input",{attrs:{size:"mini",disabled:""},on:{change:function(s){return t.changaItem(s,e,a,"goodsTotal")}},model:{value:e.goodsTotal,callback:function(s){t.$set(e,"goodsTotal",s)},expression:"list.goodsTotal"}})],1),s("div",{staticClass:"list-item"},[s("el-input",{attrs:{size:"mini"},on:{change:function(s){return t.changaItem(s,e,a,"goodsPrice")}},model:{value:e.goodsPrice,callback:function(s){t.$set(e,"goodsPrice",s)},expression:"list.goodsPrice"}})],1),s("div",{staticClass:"list-item"},[s("span",{staticClass:"my-checkbox",on:{click:function(s){return t.changaItem(!0,e,a,"isTail")}}},[e.isTail?s("i",{staticClass:"el-icon-check",on:{click:function(s){return s.stopPropagation(),function(s){return t.changaItem(!1,e,a,"isTail")}()}}}):t._e(),e.isTail?t._e():s("i",{staticClass:"el-icon-check",staticStyle:{opacity:"0"}})])]),s("div",{staticClass:"list-item"},[t._v("\n                    "+t._s(e.isTail?e.stock:e.stock-e.tailBox||"")+"\n                ")]),s("div",{staticClass:"list-item"},[t._v("\n                    "+t._s(e.caseNum*e.goodsTotal*e.goodsPrice||0)+"\n                ")]),s("div",{staticClass:"del-btn",on:{click:function(e){return t.delList(a)}}},[s("el-button",{attrs:{type:"text",icon:"el-icon-close"}})],1)])})),s("div",{staticClass:"add-btn",on:{click:t.addList}},[s("span",{staticClass:"plus"},[t._v("+")]),s("el-button",{attrs:{type:"text"}},[t._v("添加产品")])],1)],2),s("div",{staticClass:"count"},[s("span",{staticClass:"count-label"},[t._v("总销售金额：")]),s("span",{staticClass:"value"},[t._v(t._s(t.getTotal("total")))]),s("span",{staticClass:"count-label"},[t._v("总箱数：")]),s("span",{staticClass:"value"},[t._v(t._s(t.getTotal("caseNum")))]),s("span",{staticClass:"count-label"},[t._v("折扣金额：")]),s("span",{staticClass:"value"},[t._v(t._s(t.getTotal("discount")))]),s("span",{staticClass:"count-label"},[t._v("税后金额：")]),s("span",{staticClass:"value"},[t._v(t._s(t.getTotal("tax")))])])])],1)},i=[],o=(s("c5f6"),s("7f7f"),s("ac6a"),s("2ef0")),l=s("7609"),n=s("365c"),r=s("6a47"),c=s("9dcd"),u=s.n(c),m={name:"DialogNewOrder",components:{CustomerNameSelector:r["a"]},data:function(){return{dict:{},form:{},payStatus:[],accountType:[],taxRate:0,tableTitles:[{label:"型号",name:"type"},{label:"箱数",name:"boxes"},{label:"件数/箱",name:"pics"},{label:"售价",name:"price"},{label:"是否尾箱",name:"isTail"},{label:"库存",name:"isTail"},{label:"总计",name:"total"}],lockCustomer:!1,goodsList:[],listOrigin:{specification:"",goodsName:"",goodsId:"",caseNum:"",goodsPrice:"",goodsTotal:"",isTail:!1},rules:{name:[{required:!0,message:"请输入",trigger:"change"}],status:[{required:!0,message:"请选择",trigger:"change"}],companyName:[{required:!0,message:"请选择",trigger:"change"}]}}},created:function(){this.dict=l["a"],this.payStatus=[l["a"].payStatus[0],l["a"].payStatus[1]],this.accountType=[l["a"].accountType[0],l["a"].accountType[2],l["a"].accountType[3]],this.getTaxRate()},methods:{changaItem:function(t,e,s,a){if("isTail"==a&&!0===t&&e["goodsId"])return this.goodsList[s+1]&&this.goodsList[s+1].goodsId===e.goodsId||(0!==e.tailBox?this.goodsList.splice(s+1,0,{specification:e.specification,goodsId:e.goodsId,goodsName:e.goodsName,caseNum:e.tailBox,stock:e.tailBox+"（尾箱数)",goodsTotal:e.tailTotal,goodsPrice:e.goodsPrice,isTail:!0}):this.$message.warning("当前商品尾箱数为0无法选择销售尾箱")),void this.$set(this.goodsList[s],a,!1);"isTail"==a&&!1===t&&e["goodsId"]?this.delList(s):this.$set(this.goodsList[s],a,t)},addList:function(){var t=Object(o["cloneDeep"])(this.listOrigin);this.goodsList.push(t)},delList:function(t){this.goodsList.splice(t,1)},saveSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.form.exchangeRate=t.taxRate;var s=Object(o["cloneDeep"])(t.form);s.goodsList=Object(o["cloneDeep"])(t.goodsList);var a=!0;if(s.goodsList.forEach((function(e){e.caseNum>e.stock&&(t.$message.warning("销售箱数不能大于库存！请重新填写"),a=!1),e.isTail?e.isTail=1:e.isTail=0,delete e.stock,delete e.tailBox})),!a)return;s.taxRate=s.taxRate/100,t.$emit("saveData",s)}}))},resetData:function(t){var e=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&t.customerId?this.lockCustomer=!0:this.lockCustomer=!1,this.form={customerId:t?t.customerId:"",customerName:t?t.customerName:"",customerAddress:"",transportName:"",payType:"",monetaryUnit:"欧元",discount:0,exchangeRate:"",taxRate:0,companyName:"",companyId:"",status:""},this.goodsList=[{specification:"",goodsName:"",goodsId:"",caseNum:"",goodsPrice:"",goodsTotal:"",isTail:!1}],this.$nextTick((function(){s&&e.$refs.nameSelector.reset(),e.$refs.form.clearValidate()}))},setName:function(t){this.$refs.nameSelector.setName(t)},editData:function(t){var e=this;this.form=t.form,this.goodsList=t.goodsList,this.$nextTick((function(){e.$refs.form.clearValidate()}))},queryName:function(t,e){Object(n["ob"])({level:"",status:"",page:1,pageSize:10,userName:t}).then((function(t){for(var s=[],a=0;a<t.records.length;a++){var i=t.records[a];s.push({value:i.memberName,id:i.id,memberName:i.memberName})}e(s)}))},queryProduct:function(t,e){Object(n["m"])({page:1,pageSize:5,specification:t}).then((function(t){for(var s=[],a=0;a<t.records.length;a++){var i=t.records[a];i.value=i.specification,s.push(i)}e(s)}))},queryTransport:function(t,e){var s={pageSize:5,page:1,transporterName:t};Object(n["Y"])(s).then((function(t){for(var s=[],a=0;a<t.records.length;a++){var i=t.records[a];i.value=i.transporterName,s.push(i)}e(s)}))},queryCompany:function(t,e){var s={pageSize:5,page:1,name:t};Object(n["H"])(s).then((function(t){for(var s=[],a=0;a<t.records.length;a++){var i=t.records[a];i.value=i.name,s.push(i)}e(s)}))},handleProductSelect:function(t,e){this.$set(this.goodsList[e],"goodsId",t.goodsId),this.$set(this.goodsList[e],"goodsName",t.name),this.$set(this.goodsList[e],"stock",t.stock),this.$set(this.goodsList[e],"tailBox",t.tailBox),this.$set(this.goodsList[e],"tailTotal",t.tailTotal),this.$set(this.goodsList[e],"caseNum",1),this.$set(this.goodsList[e],"goodsTotal",t.goodsTotal),this.$set(this.goodsList[e],"goodsPrice",t.salePrice)},handleSelect:function(t){this.form.customerName=t.memberName,this.form.customerId=t.id},handleSelectCompany:function(t){this.form.companyId=t.id},getTaxRate:function(){var t=this,e={status:"taxRate"};Object(n["X"])(e).then((function(e){var s=e instanceof Array?e:[];t.taxRate=s[0].configValue}))},getTotal:function(t){for(var e=0,s=0,a=this.form.discount||0,i=this.form.taxRate||0,o=0;o<this.goodsList.length;o++){var l=this.goodsList[o];e+=Number(l.caseNum),s+=Number(l.caseNum*l.goodsTotal*l.goodsPrice)}if("caseNum"==t)return e;if("total"==t)return s;if("discount"==t){var n=new u.a(s).minus(a).toNumber();return n}if("tax"==t){var r=new u.a(s).minus(a),c=new u.a(1).minus(i/100);return r.times(c).toNumber()}}}},d=m,f=(s("0bf5"),s("2877")),p=Object(f["a"])(d,a,i,!1,null,"70662c67",null);e["a"]=p.exports},f74d:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-selector"},[s("div",{staticClass:"date"},[s("el-select",{ref:"selector",attrs:{placeholder:t.placeholder},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("div",{staticClass:"showDate",style:"width:"+t.width,on:{click:t.dateClick}},[t._v("\n        "+t._s(t.showValue?t.showValue:t.placeholder)+"\n        "),s("span",{staticClass:"unfold-pic"})])])},i=[],o={name:"DateSelector",props:{placeholder:String,options:Array,width:{type:String,default:"83px"}},data:function(){return{value:"",showValue:""}},mounted:function(){},methods:{dateClick:function(){console.log(this.$refs),this.$refs.selector.focus()},change:function(t){console.log(t);for(var e=0;e<this.options.length;e++){var s=this.options[e];if(s.value==t){this.showValue=s.label;break}}this.$emit("change",t)}}},l=o,n=(s("72e4"),s("2877")),r=Object(n["a"])(l,a,i,!1,null,"f8f72a3c",null);e["a"]=r.exports}}]);