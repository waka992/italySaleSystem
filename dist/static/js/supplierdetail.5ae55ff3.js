(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["supplierdetail"],{7609:function(e,t,a){"use strict";var l={accountType:[{value:0,label:"现金"},{value:3,label:"发票"},{value:4,label:"汇款"},{value:5,label:"欠款"}],accountTypeEN:[{value:0,label:"CASH"},{value:3,label:"INVOICE"},{value:4,label:"REMITTANCE"},{value:5,label:"ARREARS"}],payWay:[{value:0,label:"发票"},{value:1,label:"汇款"}],payENWay:[{value:0,label:"INVOICE"},{value:1,label:"CASH"}],payStatus:[{value:0,label:"未支付"},{value:1,label:"已支付"},{value:2,label:"欠款"},{value:3,label:"已结欠"}],payENStatus:[{value:0,label:"PAID"},{value:1,label:"UNPAID"}],soldStatus:[{value:0,label:"即将到货"},{value:1,label:"现货"},{value:2,label:"售罄"}],settingItemValue:[{value:5,label:"特色/Special"},{value:0,label:"颜色/Color"},{value:1,label:"尺码/Size"},{value:2,label:"面料/Material"},{value:4,label:"配比/Ratio"}],containerStatus:[{value:0,label:"未运输"},{value:1,label:"已发货"},{value:2,label:"已到达待确认"},{value:3,label:"已确认货物"}],transportType:[{value:0,label:"海运"},{value:2,label:"空运"},{value:3,label:"其他"}],verifyStatus:[{value:0,label:"未审核"},{value:1,label:"不通过"},{value:2,label:"审核通过"},{value:3,label:"通过欠款待发货"},{value:4,label:"仓库发货"},{value:5,label:"退审处理中"},{value:6,label:"退审处理中"}],verifyCheckStatus:[{value:0,label:"未审核"},{value:1,label:"已审核"},{value:2,label:"退审"}],userLevel:[{value:1,label:"销售人员"},{value:2,label:"管理员"}],getDict:function(e,t){for(var a=0;a<l[t].length;a++){var i=l[t][a];if(i.value==e)return i.label}}};t["a"]=l},"95c4":function(e,t,a){"use strict";var l=a("f06c"),i=a.n(l);i.a},b25b:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("采购")]),a("el-breadcrumb-item",{attrs:{to:{name:"supplier"}}},[e._v("供应商")]),a("el-breadcrumb-item",[e._v("供应商详情")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"detail-card"},[a("div",{staticClass:"title"},[e._v("供应商详情")]),a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:e.editReady}},[e._v("编辑")])],1),a("el-row",{staticClass:"detail-row"},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("名称：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierName))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("地址：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierAddress))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("电话：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierMobile))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("其他联系方式：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.supplierOther))])])],1),a("el-row",{staticClass:"detail-row"},[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("备忘：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.memorandum))])]),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"detail-label"},[e._v("作用：")]),a("span",{staticClass:"detail-content"},[e._v(e._s(e.comInfo.effect))])])],1)],1),a("div",{staticClass:"record-card"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title"},[e._v("查询")]),a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:e.addIncomeReady}},[e._v("新增付款")])],1)]),a("div",{staticClass:"pay-record"},[a("div",{staticClass:"topic"},[e._v("付款记录")]),a("div",{staticClass:"search"},[a("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("el-button",{staticClass:"search-btn",attrs:{size:"mini",icon:"el-icon-search"},on:{click:e.getData}}),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(e.timeFormat(t.row.createTime))+"\n                            ")]}}])}),a("el-table-column",{attrs:{prop:"money",label:"支付金额",align:"center"}}),a("el-table-column",{attrs:{prop:"companyName",label:"支付名",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red",cursor:"pointer"},on:{click:function(a){return e.delPay(t.row.id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page.no,"page-size":e.page.size,total:e.page.total,"page-sizes":[5,10,20],layout:"total, prev, pager, next, sizes, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.basePageChange}})],1)],1),a("div",{staticClass:"operation-record"},[a("div",{staticClass:"topic"},[e._v("合作记录")]),a("div",{staticClass:"search"},[a("el-select",{attrs:{size:"mini",placeholder:"请选择",clearable:""},model:{value:e.cooperationSeason,callback:function(t){e.cooperationSeason=t},expression:"cooperationSeason"}},e._l(e.seasonOptions,(function(e){return a("el-option",{key:e.configValue,attrs:{label:e.configValue,value:e.configValue}})})),1)],1),a("el-button",{staticClass:"search-btn",attrs:{size:"mini",icon:"el-icon-search"},on:{click:e.getCooperationRecord}}),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.cooperationTableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"quarter",label:"季度",align:"center"}}),a("el-table-column",{attrs:{prop:"caseNum",label:"总箱数",align:"center"}}),a("el-table-column",{attrs:{prop:"total",label:"总件数",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"金额",align:"center"}})],1)],1),a("div",{staticClass:"operation-record"},[a("div",{staticClass:"topic"},[e._v("报损总汇")]),a("div",{staticClass:"search"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cleanDefect}},[e._v("清零")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.defectTableData,stripe:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"totals",label:"件数",align:"center"}}),a("el-table-column",{attrs:{prop:"sum",label:"报损金额",align:"center"}})],1)],1)])]),a("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"编辑供应商信息",visible:e.baseDialogVisible,width:"551px"},on:{"update:visible":function(t){e.baseDialogVisible=t}}},[a("el-popover",{attrs:{"popper-class":"del-confirm",placement:"bottom",width:"210"},model:{value:e.delVisible,callback:function(t){e.delVisible=t},expression:"delVisible"}},[a("div",{staticClass:"del-word"},[e._v("删除该供应商后，数据不可恢复，是否确认删除？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{staticClass:"del-btn1",attrs:{size:"mini",type:"text"},on:{click:function(t){e.delVisible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"del-btn2",attrs:{size:"mini"},on:{click:e.delConfirm}},[e._v("确认删除")])],1),a("el-button",{staticClass:"del-btn2 outer",attrs:{slot:"reference"},slot:"reference"},[e._v("删除")])],1),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"158px",rules:e.rules}},[a("el-form-item",{attrs:{label:"供应商名称",prop:"supplierName"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商名",maxlength:"15","show-word-limit":""},model:{value:e.form.supplierName,callback:function(t){e.$set(e.form,"supplierName",t)},expression:"form.supplierName"}})],1),a("el-form-item",{attrs:{label:"地址",prop:"supplierAddress"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商地址"},model:{value:e.form.supplierAddress,callback:function(t){e.$set(e.form,"supplierAddress",t)},expression:"form.supplierAddress"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"supplierMobile"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入供应商电话"},model:{value:e.form.supplierMobile,callback:function(t){e.$set(e.form,"supplierMobile",t)},expression:"form.supplierMobile"}})],1),a("el-form-item",{attrs:{label:"其他联系方式",prop:"supplierOther"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.supplierOther,callback:function(t){e.$set(e.form,"supplierOther",t)},expression:"form.supplierOther"}})],1),a("el-form-item",{attrs:{label:"备忘录",prop:"memorandum"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.memorandum,callback:function(t){e.$set(e.form,"memorandum",t)},expression:"form.memorandum"}})],1),a("el-form-item",{attrs:{label:"作用",prop:"effect"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.form.effect,callback:function(t){e.$set(e.form,"effect",t)},expression:"form.effect"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.baseDialogVisible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,title:"新增记录",visible:e.incomeDialogVisible,width:"551px"},on:{"update:visible":function(t){e.incomeDialogVisible=t}}},[a("el-form",{ref:"incomeform",attrs:{model:e.incomeform,"label-width":"178px",rules:e.incomerules}},[a("el-form-item",{attrs:{label:"日期",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择今日日期时间"},model:{value:e.incomeform.createTime,callback:function(t){e.$set(e.incomeform,"createTime",t)},expression:"incomeform.createTime"}})],1),a("el-form-item",{attrs:{label:"支付金额",prop:"money"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.incomeform.money,callback:function(t){e.$set(e.incomeform,"money",t)},expression:"incomeform.money"}})],1),a("el-form-item",{attrs:{label:"支付名",prop:"status"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.incomeform.companyName,callback:function(t){e.$set(e.incomeform,"companyName",t)},expression:"incomeform.companyName"}})],1),a("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[a("el-select",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.incomeform.payType,callback:function(t){e.$set(e.incomeform,"payType",t)},expression:"incomeform.payType"}},e._l(e.dict.accountType,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticClass:"form-input",attrs:{size:"mini",placeholder:"请输入备注内容"},model:{value:e.incomeform.remark,callback:function(t){e.$set(e.incomeform,"remark",t)},expression:"incomeform.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"curr-btn",attrs:{plain:""},on:{click:function(t){e.incomeDialogVisible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"curr-btn",attrs:{type:"primary"},on:{click:e.saveIncome}},[e._v("保存")])],1)],1)],1)},i=[],s=a("2ef0"),o=a("7609"),r=a("365c"),n={name:"SupplierDetail",data:function(){return{date:"",dict:{},seasonOptions:[],cooperationSeason:"",delVisible:!1,baseDialogVisible:!1,incomeDialogVisible:!1,page:{no:1,total:0,size:10},coopPage:{no:1,total:0,size:10},comInfo:{id:"",supplierName:"",supplierAddress:"",supplierMobile:"",supplierOther:"",memorandum:"",payDetail:"",effect:""},tableData:[],defectTableData:[],cooperationTableData:[],form:{name:"",address:"",mobile:"",otherContact:"",remark:"",payStatus:"",use:""},incomeform:{},rules:{supplierName:[{required:!0,message:"请输入供应商名",trigger:"change"}],supplierAddress:[{required:!0,message:"请输入供应商地址",trigger:"change"}],supplierMobile:[{required:!0,message:"请输入联系电话",trigger:"change"}]},incomerules:{name:[{required:!0,message:"请输入客户名",trigger:"change"}],createTime:[{required:!0,message:"请选择日期",trigger:"change"}],money:[{required:!0,message:"请输入",trigger:"change"}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},created:function(){var e=this.$route.params.data;this.comInfo={id:e.id,supplierName:e.supplierName,supplierAddress:e.supplierAddress,supplierMobile:e.supplierMobile,supplierOther:e.supplierOther,memorandum:e.memorandum,payDetail:e.payDetail,effect:e.effect}},mounted:function(){this.dict=o["a"],this.getSeason(),this.getData(),this.getDefectData(),this.getCooperationRecord()},methods:{editReady:function(){var e=this;this.form=Object(s["cloneDeep"])(this.comInfo),this.baseDialogVisible=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},delConfirm:function(){var e=this,t=this.$route.params.data.id;Object(r["C"])({id:t}).then((function(t){t&&(e.$message.success("删除成功"),e.delVisible=!1,e.baseDialogVisible=!1,e.$router.push({name:"supplier"}))}))},getSeason:function(){var e=this,t={status:"quarter"};Object(r["db"])(t).then((function(t){var a=t instanceof Array?t:[];e.seasonOptions=a||[]}))},getData:function(){var e=this,t={pageSize:this.page.size,page:this.page.no,supplierId:this.comInfo.id,date:this.date};Object(r["cb"])(t).then((function(t){e.tableData=t.records,e.page.total=t.total,e.page.no=t.current}))},getDefectData:function(){var e=this,t={id:this.comInfo.id};Object(r["y"])(t).then((function(t){e.defectTableData=[t]}))},cleanDefect:function(){var e=this;this.$confirm("确认清零报损？").then((function(t){var a={id:e.comInfo.id};Object(r["x"])(a).then((function(t){e.$message.success("清零报损成功"),e.getDefectData()}))})).catch((function(e){}))},getCooperationRecord:function(){var e=this,t={id:this.comInfo.id,season:this.cooperationSeason,pageSize:this.coopPage.size,page:this.coopPage.no};Object(r["ab"])(t).then((function(t){e.cooperationTableData=t}))},save:function(){var e=this,t=Object(s["cloneDeep"])(this.form);this.$refs.form.validate((function(a){a&&Object(r["h"])(t).then((function(t){t&&(e.$message.success({message:"修改成功"}),e.baseDialogVisible=!1,e.comInfo=Object(s["cloneDeep"])(e.form))}))}))},addIncomeReady:function(){var e=this;this.incomeform={createTime:"",money:"",companyName:"",payType:"",remark:""},this.incomeDialogVisible=!0,this.$nextTick((function(){e.$refs.incomeform.clearValidate()}))},saveIncome:function(){var e=this,t=Object(s["cloneDeep"])(this.incomeform);t.supplierId=this.comInfo.id,t.supplierName=this.comInfo.supplierName,this.$refs.incomeform.validate((function(a){a&&Object(r["i"])(t).then((function(t){t&&(e.$message.success({message:"添加成功"}),e.incomeDialogVisible=!1,e.getData())}))}))},delPay:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){Object(r["D"])({id:e}).then((function(e){t.$message.success({message:"删除成功"}),t.getData()}))})).catch((function(){}))},timeFormat:function(e){return this.$moment(e).add(8,"h").format("YYYY-MM-DD")},back:function(){this.$router.push({name:"supplier"})},basePageChange:function(e){this.$set(this.page,"no",e),this.getData()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getData()},coopPageChange:function(e){this.$set(this.coopPage,"no",e),this.getCooperationRecord()},handleCoopSizeChange:function(e){this.$set(this.coopPage,"size",e),this.$set(this.coopPage,"no",1),this.getCooperationRecord()}}},c=n,p=(a("95c4"),a("2877")),u=Object(p["a"])(c,l,i,!1,null,"26e70b74",null);t["default"]=u.exports},f06c:function(e,t,a){}}]);