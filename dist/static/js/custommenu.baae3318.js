(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["custommenu"],{1864:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods-form"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("app")]),a("el-breadcrumb-item",[e._v("自定义菜单")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"table-area"},[a("div",{staticStyle:{"text-align":"right"}},[a("div",{staticClass:"w200"},[a("el-select",{attrs:{placeholder:"请选择需要操作的菜单"},on:{change:e.menuCascaderChange},model:{value:e.menuId,callback:function(t){e.menuId=t},expression:"menuId"}},e._l(e.filterTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-button",{attrs:{icon:"el-icon-refresh-right",circle:""},on:{click:e.getHot}}),a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("添加商品")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.hotTableData,stripe:"","row-key":"id","header-cell-class-name":"table-header","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"specification",label:"型号"}}),a("el-table-column",{attrs:{prop:"isNew",label:"是否新品"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(0==t.row.isNew?"否":"是")+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"showStatus",label:"上架/下架"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(0==t.row.showStatus?"下架":"上架")+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"imgUrl",label:"封面图片"},scopedSlots:e._u([{key:"default",fn:function(t){return["eu"==e.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.imgUrl,expression:"scope.row.imgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.imgUrl,"preview-src-list":[t.row.imgUrl]}}):e._e(),"cn"==e.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.cnImgUrl,expression:"scope.row.cnImgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.cnImgUrl,"preview-src-list":[t.row.cnImgUrl]}}):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.delHot(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes, jumper","current-page":e.hotpage.no,"page-sizes":[5,10,20],total:e.hotpage.total},on:{"size-change":e.handleHotSizeChange,"current-change":e.handleHotPageChange}})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"create"===e.operate?"添加":"编辑",visible:e.dialogVisible,width:"1080px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[e._v("\n                分类：\n                "),a("div",{staticClass:"w200"},[a("el-cascader",{attrs:{clearable:"",props:e.cascaderProps,options:e.typeList},on:{change:e.cascaderChange},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}})],1),e._v("\n                搜索：\n                "),a("div",{staticClass:"w200"},[a("el-input",{model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:e.getGoodList}},[e._v("查询")]),a("el-button",{attrs:{type:"success"},on:{click:e.addHot}},[e._v("添加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","row-key":"id","header-cell-class-name":"table-header","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"specification",label:"型号"}}),a("el-table-column",{attrs:{prop:"goodsDetail",label:"商品描述"}}),a("el-table-column",{attrs:{prop:"isNew",label:"是否新品"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(0==t.row.isNew?"否":"是")+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"label",label:"特色"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.label,(function(t,i){return a("el-tag",{key:i},[e._v(e._s(t))])}))}}])}),a("el-table-column",{attrs:{prop:"showStatus",label:"上架/下架"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(0==t.row.showStatus?"下架":"上架")+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"imgUrl",label:"封面图片","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["eu"==e.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.imgUrl,expression:"scope.row.imgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.imgUrl,"preview-src-list":[t.row.imgUrl]}}):e._e(),"cn"==e.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.cnImgUrl,expression:"scope.row.cnImgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.cnImgUrl,"preview-src-list":[t.row.cnImgUrl]}}):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes, jumper","current-page":e.page.no,"page-sizes":[5,10,20],total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("完成")])],1)],1)],1)])])},s=[],n=(a("28a5"),a("7618")),o=(a("a481"),a("365c")),r=a("2ef0"),l={name:"CustomList",props:{},components:{},computed:{},data:function(){return{parentId:"",menuId:"",searchContent:"",cascaderProps:{label:"name",value:"id",checkStrictly:!0},firstGrade:"",secondGrade:"",thirdGrade:"",firstGradeEnum:"",secondGradeEnum:"",thirdGradeEnum:"",operate:"create",tableData:[],hotTableData:[],typeList:[],filterTypeList:[],page:{no:1,total:0,size:10},hotpage:{no:1,total:0,size:10},form:{name:"",specification:"",isNew:1,goodsDetail:"",elementDetail:[],level:"",label:[],showStatus:1,firstMenu:"",secondMenu:"",thirdMenu:"",imgUrl:[],goodsImgList:[]},dialogVisible:!1,detailDialogVisible:!1,delList:[],selectRow:[],area:"eu"}},created:function(){this.getData(),this.area=localStorage.getItem("area")||"eu"},methods:{saveDetail:function(){this.detailDialogVisible=!1;var e=Object(r["cloneDeep"])(this.$refs.detailForm.form);this.form.goodsImgList.push(e)},showDetailDialog:function(){this.detailDialogVisible=!0;try{this.$refs.detailForm.form=Object(r["cloneDeep"])(this.form.goodsImgList),this.$refs.detailForm.form}catch(e){console.log(e)}},handleHotSizeChange:function(e){this.$set(this.hotpage,"size",e),this.$set(this.hotpage,"no",1),this.getHot()},handleHotPageChange:function(e){this.hotpage.no=e,this.getHot()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getGoodList()},handlePageChange:function(e){this.page.no=e,this.getGoodList()},getData:function(){var e=this;Object(o["ub"])().then((function(t){var a=t.filter((function(e){return 1!==e.type})),i=t.filter((function(e){return 0!==e.type})),s=JSON.stringify(i),n=s.replace(/,"children":\[\]/g,"");e.filterTypeList=JSON.parse(n);var o=JSON.stringify(a),r=o.replace(/,"children":\[\]/g,"");e.typeList=JSON.parse(r)}))},getGoodList:function(){var e=this,t={pageSize:this.page.size,page:this.page.no,content:this.searchContent};"object"==Object(n["a"])(this.parentId)?t.parentId=this.parentId[this.parentId.length-1]:this.parentId&&(t.parentId=this.parentId),Object(o["db"])(t).then((function(t){for(var a=0;a<t.records.length;a++){var i=t.records[a];t.records[a].label&&(t.records[a].label=i.label.split(","))}e.tableData=t.records,e.page.total=t.total,e.page.no=t.current}))},getHot:function(){var e=this;if(this.menuId){var t={pageSize:this.hotpage.size,page:this.hotpage.no,id:this.menuId};Object(o["eb"])(t).then((function(t){e.hotTableData=t}))}},addHot:function(){var e=this;if(0!=this.selectRow.length){for(var t=[],a=0;a<this.selectRow.length;a++){var i=this.selectRow[a];t.push({id:i.id,menuId:this.menuId})}Object(o["e"])(t).then((function(t){e.$message.success({message:"添加成功"}),e.selectRow=[],e.dialogVisible=!1,e.getHot()}))}},removeHot:function(){},handleSelectionChange:function(e){this.selectRow=e},create:function(){this.menuId?(this.operate="create",this.initData(),this.getGoodList(),this.openDialog()):this.$message.info("请先选择要操作的自定义菜单")},initData:function(){this.form={name:"",specification:"",isNew:1,goodsDetail:"",elementDetail:[],size:"",label:[],showStatus:1,firstMenu:this.parentId[0]||"",secondMenu:this.parentId[1]||"",thirdMenu:this.parentId[2]||"",imgUrl:[],goodsImgList:[],arrtibuteList:[]}},delHot:function(e){var t=this;this.$confirm("确认移出热销商品列表？").then((function(a){var i=[e.hid];Object(o["G"])(i).then((function(e){t.$message.success({message:"删除成功"}),t.getHot()}))})).catch((function(e){}))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleAvatarSuccess:function(e,t){e.data&&this.$set(this.form,"picture",e.data)},cascaderChange:function(e){this.getGoodList()},menuCascaderChange:function(e){this.getHot()}}},c=l,u=(a("cd2d"),a("2877")),d=Object(u["a"])(c,i,s,!1,null,"feb17280",null);t["default"]=d.exports},"5d58":function(e,t,a){e.exports=a("d8d6")},"67bb":function(e,t,a){e.exports=a("f921")},7618:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a("5d58"),s=a.n(i),n=a("67bb"),o=a.n(n);function r(e){return r="function"===typeof o.a&&"symbol"===typeof s.a?function(e){return typeof e}:function(e){return e&&"function"===typeof o.a&&e.constructor===o.a&&e!==o.a.prototype?"symbol":typeof e},r(e)}},cd2d:function(e,t,a){"use strict";var i=a("f85f"),s=a.n(i);s.a},f85f:function(e,t,a){}}]);