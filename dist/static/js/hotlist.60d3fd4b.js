(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["hotlist"],{"51e4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods-form"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("app")]),a("el-breadcrumb-item",[e._v("热销管理")])],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"table-area"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{icon:"el-icon-refresh-right",circle:""},on:{click:e.getHot}}),a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("添加商品")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.hotTableData,stripe:"","row-key":"id","header-cell-class-name":"table-header","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"specification",label:"型号",align:"center"}}),a("el-table-column",{attrs:{prop:"isNew",label:"是否新品",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(0==t.row.isNew?"否":"是")+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"showStatus",label:"上架/下架",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(0==t.row.showStatus?"下架":"上架")+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"imgUrl",label:"封面图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{directives:[{name:"show",rawName:"v-show",value:e.row.imgUrl,expression:"scope.row.imgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.imgUrl,"preview-src-list":[e.row.imgUrl]}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.delHot(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes, jumper","current-page":e.hotpage.no,"page-sizes":[5,10,20],total:e.hotpage.total},on:{"size-change":e.handleHotSizeChange,"current-change":e.handleHotPageChange}})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"create"===e.operate?"添加":"编辑",visible:e.dialogVisible,width:"1080px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[e._v("\n                分类：\n                "),a("div",{staticClass:"w200"},[a("el-cascader",{attrs:{clearable:"",props:e.cascaderProps,options:e.typeList},on:{change:e.cascaderChange},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}})],1),e._v("\n                搜索：\n                "),a("div",{staticClass:"w200"},[a("el-input",{model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:e.getGoodList}},[e._v("查询")]),a("el-button",{attrs:{type:"success"},on:{click:e.addHot}},[e._v("添加")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,stripe:"","row-key":"id","header-cell-class-name":"table-header","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"specification",label:"型号",align:"center"}}),a("el-table-column",{attrs:{prop:"goodsDetail",label:"商品描述",align:"center"}}),a("el-table-column",{attrs:{prop:"isNew",label:"是否新品",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(0==t.row.isNew?"否":"是")+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"label",label:"特色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.label,(function(t,n){return a("el-tag",{key:n},[e._v(e._s(t))])}))}}])}),a("el-table-column",{attrs:{prop:"showStatus",label:"上架/下架",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(0==t.row.showStatus?"下架":"上架")+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"imgUrl",label:"封面图片","show-overflow-tooltip":!0,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["eu"==e.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.imgUrl,expression:"scope.row.imgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.imgUrl,"preview-src-list":[t.row.imgUrl]}}):e._e(),"cn"==e.area?a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.cnImgUrl,expression:"scope.row.cnImgUrl"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.cnImgUrl,"preview-src-list":[t.row.cnImgUrl]}}):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes, jumper","current-page":e.page.no,"page-sizes":[5,10,20],total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("完成")])],1)],1)],1)])])},i=[],o=(a("28a5"),a("7618")),s=(a("a481"),a("365c")),r=a("2ef0"),l={name:"HotList",props:{},components:{},computed:{},data:function(){return{parentId:"",searchContent:"",cascaderProps:{label:"name",value:"id",checkStrictly:!0},firstGrade:"",secondGrade:"",thirdGrade:"",firstGradeEnum:"",secondGradeEnum:"",thirdGradeEnum:"",operate:"create",tableData:[],hotTableData:[],typeList:[],page:{no:1,total:0,size:10},hotpage:{no:1,total:0,size:10},form:{name:"",specification:"",isNew:1,goodsDetail:"",elementDetail:[],level:"",label:[],showStatus:1,firstMenu:"",secondMenu:"",thirdMenu:"",imgUrl:[],goodsImgList:[]},dialogVisible:!1,detailDialogVisible:!1,delList:[],area:"eu"}},created:function(){this.getHot(),this.getData(),this.area=localStorage.getItem("area")||"eu"},methods:{saveDetail:function(){this.detailDialogVisible=!1;var e=Object(r["cloneDeep"])(this.$refs.detailForm.form);this.form.goodsImgList.push(e)},showDetailDialog:function(){this.detailDialogVisible=!0;try{this.$refs.detailForm.form=Object(r["cloneDeep"])(this.form.goodsImgList),this.$refs.detailForm.form}catch(e){console.log(e)}},handleHotSizeChange:function(e){this.$set(this.hotpage,"size",e),this.$set(this.hotpage,"no",1),this.getHot()},handleHotPageChange:function(e){this.hotpage.no=e,this.getHot()},handleSizeChange:function(e){this.$set(this.page,"size",e),this.$set(this.page,"no",1),this.getGoodList()},handlePageChange:function(e){this.page.no=e,this.getGoodList()},getData:function(){var e=this;Object(s["ub"])().then((function(t){t=t.filter((function(e){return 1!==e.type}));var a=JSON.stringify(t),n=a.replace(/,"children":\[\]/g,"");e.typeList=JSON.parse(n)}))},getGoodList:function(){var e=this,t={pageSize:this.page.size,page:this.page.no,content:this.searchContent};"object"==Object(o["a"])(this.parentId)?t.parentId=this.parentId[this.parentId.length-1]:this.parentId&&(t.parentId=this.parentId),Object(s["db"])(t).then((function(t){for(var a=0;a<t.records.length;a++){var n=t.records[a];t.records[a].label&&(t.records[a].label=n.label.split(","))}e.tableData=t.records,e.page.total=t.total,e.page.no=t.current}))},getHot:function(){var e=this,t={pageSize:this.hotpage.size,page:this.hotpage.no};Object(s["eb"])(t).then((function(t){e.hotTableData=t,t.total&&(e.hotpage.total=t.total,e.hotpage.no=t.current)}))},addHot:function(){var e=this;if(0!=this.selectRow.length){for(var t=[],a=0;a<this.selectRow.length;a++){var n=this.selectRow[a];t.push({id:n.id})}Object(s["e"])(t).then((function(t){e.$message.success({message:"添加成功"}),e.selectRow=[],e.dialogVisible=!1,e.getHot()}))}},handleSelectionChange:function(e){this.selectRow=e},create:function(){this.operate="create",this.initData(),this.openDialog()},initData:function(){this.form={name:"",specification:"",isNew:1,goodsDetail:"",elementDetail:[],size:"",label:[],showStatus:1,firstMenu:this.parentId[0]||"",secondMenu:this.parentId[1]||"",thirdMenu:this.parentId[2]||"",imgUrl:[],goodsImgList:[],arrtibuteList:[]}},delHot:function(e){var t=this;this.$confirm("确认移出热销商品列表？").then((function(a){var n=[e.id];Object(s["G"])(n).then((function(e){t.$message.success({message:"删除成功"}),t.getHot()}))})).catch((function(e){}))},openDialog:function(){this.dialogVisible=!0,this.page.no=1,this.getGoodList()},closeDialog:function(){this.dialogVisible=!1},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleAvatarSuccess:function(e,t){e.data&&this.$set(this.form,"picture",e.data)},cascaderChange:function(e){this.getGoodList()}}},c=l,h=(a("86e3"),a("2877")),p=Object(h["a"])(c,n,i,!1,null,"bb125982",null);t["default"]=p.exports},"5d58":function(e,t,a){e.exports=a("d8d6")},"67bb":function(e,t,a){e.exports=a("f921")},7618:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("5d58"),i=a.n(n),o=a("67bb"),s=a.n(o);function r(e){return r="function"===typeof s.a&&"symbol"===typeof i.a?function(e){return typeof e}:function(e){return e&&"function"===typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":typeof e},r(e)}},"86e3":function(e,t,a){"use strict";var n=a("e5c2"),i=a.n(n);i.a},e5c2:function(e,t,a){}}]);