(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profitstatistics"],{"33e7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box",style:"width: 100%;"},[a("div",{staticClass:"line-chart",attrs:{id:"line-chart"}})])},s=[],n=(a("2ef0"),a("63e3")),l={name:"LineChart",props:{height:{type:String,default:"0px"},width:{type:String,default:"0px"}},data:function(){return{chart:null}},mounted:function(){this.initCharts()},methods:{initCharts:function(){var t=null;if(!this.chart){var e=this.$el.querySelector(".line-chart");t=n["a"](e,this.theme,{width:"auto",height:this.height,renderer:"canvas"});var a={grid:{top:"20px",left:"30px",right:0,bottom:"30px"},xAxis:{type:"category",data:[],splitNum:1,interval:0,splitLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,fontSize:9}},yAxis:{axisTick:{show:!0},splitLine:{show:!1},axisLine:{show:!0},axisLabel:{fontSize:9}},series:[{name:" ",type:"bar",data:[],barWidth:12,itemStyle:{color:"#2183EA"}}],tooltip:{show:!0}};t.setOption(a),this.chart=t}},setData:function(t){this.chart.setOption(t)}}},r=l,o=a("2877"),c=Object(o["a"])(r,i,s,!1,null,"31a14ff4",null);e["a"]=c.exports},"4e21":function(t,e,a){},"4ea2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profit-statistics"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("公司")]),a("el-breadcrumb-item",[t._v("盈利统计")])],1)],1),a("div",{staticClass:"top-box"},[a("div",{staticClass:"title"},[t._v("销售统计")]),a("div",{staticClass:"date-select"},[a("date-selector",{on:{change:t.getSellDate}})],1),a("div",[a("div",{staticClass:"top-switch"},t._l(t.topTab,(function(e,i){return a("div",{key:e.name,staticClass:"tab",class:t.topSelected==i?"active":"",on:{click:function(e){return t.topTapClick(i)}}},[t._v(t._s(e.name))])})),0),a("div",{staticClass:"date-switch"},t._l(t.dateTab,(function(e,i){return a("div",{key:e.name,staticClass:"tab",class:t.dateSelected==i?"active":"",on:{click:function(e){return t.dateTapClick(i)}}},[t._v(t._s(e.name))])})),0),a("div",{staticClass:"charts"},[a("line-chart",{ref:"lineChart",attrs:{height:"180px",width:"300px"}})],1)])]),a("div",{staticClass:"top-box"},[a("div",{staticClass:"title"},[t._v("销售利润")]),a("div",{staticClass:"horizon-charts"},[a("horizon-line",{ref:"horizonLine",attrs:{height:"180px",width:"300px"}})],1)])])},s=[],n=(a("2ef0"),a("c1df")),l=a.n(n),r=a("33e7"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"horizon-line-box",style:"width: 100%;"},t._l(t.lineData,(function(e,i){return a("div",{key:i,staticClass:"line-item"},[a("div",{staticClass:"line-area"},[a("div",{staticClass:"label"},[t._v(t._s(e.label))]),a("div",{staticClass:"horizon-line-bg"},[a("div",{staticClass:"line",style:"backgroundColor:"+e.color+";transform:translateX("+e.offset+");"})])]),a("div",{staticClass:"value-area"},t._l(e.value,(function(e,i){return a("span",{key:i,staticStyle:{"margin-right":"10px"}},[a("span",{staticClass:"value-label"},[t._v(t._s(e.label)+"：")]),a("span",{staticClass:"value-amount"},[t._v(t._s(e.value))])])})),0)])})),0)},c=[],u={name:"HorizonLine",props:{height:{type:String,default:"0px"},width:{type:String,default:"0px"}},data:function(){return{lineData:[{label:"销售量",color:"#2183EA",offset:"-100%",value:[{label:"金额",value:0},{label:"总箱数",value:0}]},{label:"利润",offset:"-100%",color:"#E62A9A",value:[{label:"金额",value:0}]}]}},mounted:function(){},methods:{setData:function(t){console.log(t);var e=t||{},a=e.salePrice||0;this.lineData[0].value[0].value=a,this.lineData[0].value[1].value=e.caseNum||0,this.lineData[1].value[0].value=e.saleProfit||0;var i=a/.6;if(0==i)this.lineData[0].offset="-100%",this.lineData[1].offset="-100%";else{this.lineData[0].offset="-36%";var s=e.saleProfit/i*100-100;this.lineData[1].offset=s+"%",console.log(s)}}}},d=u,h=(a("f75c"),a("2877")),f=Object(h["a"])(d,o,c,!1,null,"9f0ee20e",null),p=f.exports,v=a("d0c2"),m=a("365c"),b={name:"ProfitStatistics",components:{LineChart:r["a"],DateSelector:v["a"],HorizonLine:p},data:function(){return{topTar:"",year:2020,topSelected:0,dateSelected:0,saleDate:"",topTab:[{name:"销售"},{name:"收入"},{name:"支出"},{name:"利润"}],dateTab:[{name:"今日"},{name:"7日"},{name:"14日"}]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this,e={saleDate:this.saleDate||l()().format("YYYY-MM-DD"),saleType:7*this.dateSelected-1>0?7*this.dateSelected-1:0};Object(m["T"])(e).then((function(e){var a=[];switch(t.topSelected){case 0:a=e.sale;break;case 1:a=e.income;break;case 2:a=e.pay;break;case 3:a=e.profit;break}for(var i=0;i<a.length;i++){var s=a[i];a[i].x=s.days.slice(5),a[i].y=s.price,a[i].caseNum=s.caseNum}t.setData(a),t.$refs.horizonLine.setData(e.saleToday)}))},getSellDate:function(t){this.saleDate=t,this.getData()},topTapClick:function(t){this.topSelected=t,0==t&&(this.topTar="sold"),1==t&&(this.topTar="income"),2==t&&(this.topTar="pay"),3==t&&(this.topTar="profit"),this.getData()},dateTapClick:function(t){this.dateSelected=t,this.getData()},setData:function(t){for(var e=[],a=[],i=0;i<t.length;i++){var s=t[i];e.push(s.x),a.push({value:s.y,amount:s.caseNum})}var n={xAxis:{data:e},series:[{data:a}]};"sold"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"金额:"+t.data.value+"&nbsp箱数"+t.data.amount}}),"income"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"收入金额:"+t.data.value}}),"pay"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"支出金额:"+t.data.value}}),"profit"==this.topTar&&(n.series[0].tooltip={formatter:function(t){return"利润:"+t.data.value}}),this.$refs.lineChart.setData(n)}}},C=b,g=(a("dba6"),Object(h["a"])(C,i,s,!1,null,"2795ac39",null));e["default"]=g.exports},"7ea6":function(t,e,a){},"948e":function(t,e,a){"use strict";var i=a("4e21"),s=a.n(i);s.a},d0c2:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-selector"},[a("div",{staticClass:"date"},[a("el-date-picker",{ref:"dateSelector",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"showDate",on:{click:t.dateClick}},[t._v("\n        "+t._s(t.date?t.date:"请选日期")+"\n        "),a("span",{staticClass:"unfold-pic"})])])},s=[],n={name:"DateSelector",props:{},data:function(){return{date:""}},mounted:function(){},methods:{resetDate:function(){this.date=""},dateClick:function(){this.$refs.dateSelector.focus()},dateChange:function(t){this.date=t,this.$emit("change",t)}}},l=n,r=(a("948e"),a("2877")),o=Object(r["a"])(l,i,s,!1,null,"4c16e271",null);e["a"]=o.exports},dba6:function(t,e,a){"use strict";var i=a("7ea6"),s=a.n(i);s.a},f75c:function(t,e,a){"use strict";var i=a("fbf7"),s=a.n(i);s.a},fbf7:function(t,e,a){}}]);